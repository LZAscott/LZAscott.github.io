<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leoliçš„åšå®¢</title>
  
  <subtitle>è¶ŠåŠªåŠ›ï¼Œè¶Šå¹¸è¿ï¼ï¼ï¼</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2023-12-02T12:24:09.619Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Leoli</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOSåŒ…é‡ç­¾åæŠ€æœ¯çŸ¥è¯†</title>
    <link href="http://example.com/post/ebb4149f.html"/>
    <id>http://example.com/post/ebb4149f.html</id>
    <published>2023-12-02T11:49:59.000Z</published>
    <updated>2023-12-02T12:24:09.619Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>åˆ©ç”¨Xcodeçš„å‘½ä»¤<code>security</code>å’Œ<code>codesign</code>å¤„ç†ipaé‡ç­¾ã€‚é‡ç­¾åä¸Xcodeæ‰“åŒ…ç­¾åæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸç†ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼Œæå‰éœ€è¦å‡†å¤‡ä»¥ä¸‹2ä¸ªæ–‡ä»¶ï¼š</p><table><thead><tr><th>æ–‡ä»¶å</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>Provisioning Profile</td><td>æè¿°æ–‡ä»¶ï¼Œä¼šåƒXcodeä¸€æ ·åŒå‡»å®‰è£…åœ¨ç”µè„‘ä¸Šçš„æè¿°æ–‡ä»¶ï¼Œç”¨å‘½ä»¤è¡Œå¯ä»¥åˆ—ä¸¾å‡ºæ¥ï¼Œå¯ä»¥è¿‡æ»¤è¿‡æœŸçš„è¯ä¹¦</td></tr><tr><td>Signing Certificate</td><td>é€‰æ‹©å¯¹åº”çš„è¯ä¹¦ï¼Œé€šç”¨ä¼šæ£€ç´¢ç³»ç»Ÿé’¥åŒ™ä¸²å®‰è£…çš„å¯ç”¨çš„è¯ä¹¦ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤æ‰è¿‡æœŸçš„</td></tr></tbody></table><span id="more"></span><h1 id="ä½¿ç”¨çš„å‘½ä»¤"><a href="#ä½¿ç”¨çš„å‘½ä»¤" class="headerlink" title="ä½¿ç”¨çš„å‘½ä»¤"></a>ä½¿ç”¨çš„å‘½ä»¤</h1><h2 id="æ·»åŠ p12è¯ä¹¦"><a href="#æ·»åŠ p12è¯ä¹¦" class="headerlink" title="æ·»åŠ p12è¯ä¹¦"></a>æ·»åŠ p12è¯ä¹¦</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">security import /Users/admin/Desktop/dis.p12 -P &#x27;123456&#x27;</span><br></pre></td></tr></table></figure><h2 id="è§£å‹ipaåŒ…"><a href="#è§£å‹ipaåŒ…" class="headerlink" title="è§£å‹ipaåŒ…"></a>è§£å‹ipaåŒ…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">unzip yourApp.ipa</span><br><span class="line"></span><br><span class="line">// æŸ¥æ‰¾.appç›®å½•ï¼Œåˆ é™¤ç³»ç»Ÿä¸´æ—¶æ–‡ä»¶</span><br><span class="line">rm -rf ./Payload/yourAppName.app/.DS_Store</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹Payload-yourName-appä¸­çš„iconå›¾æ ‡ã€info-plistæ–‡ä»¶çš„ä¿¡æ¯ç­‰"><a href="#ä¿®æ”¹Payload-yourName-appä¸­çš„iconå›¾æ ‡ã€info-plistæ–‡ä»¶çš„ä¿¡æ¯ç­‰" class="headerlink" title="ä¿®æ”¹Payload&#x2F;yourName.appä¸­çš„iconå›¾æ ‡ã€info.plistæ–‡ä»¶çš„ä¿¡æ¯ç­‰"></a>ä¿®æ”¹Payload&#x2F;yourName.appä¸­çš„iconå›¾æ ‡ã€info.plistæ–‡ä»¶çš„ä¿¡æ¯ç­‰</h2><p>(å¦‚æœ‰éœ€è¦)ï¼Œæ¯”å¦‚ç‰ˆæœ¬å·ï¼Œåº”ç”¨åç§°ç­‰</p><h2 id="åˆ é™¤ä¹‹å‰çš„ç­¾å-CodeSignature"><a href="#åˆ é™¤ä¹‹å‰çš„ç­¾å-CodeSignature" class="headerlink" title="åˆ é™¤ä¹‹å‰çš„ç­¾å -&gt; .CodeSignature"></a>åˆ é™¤ä¹‹å‰çš„ç­¾å -&gt; .CodeSignature</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf ./Payload/yourAppName.app/_CodeSignature</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆæƒæ–‡ä»¶ç”Ÿæˆentitlements-plistæ–‡ä»¶"><a href="#ç”¨æˆæƒæ–‡ä»¶ç”Ÿæˆentitlements-plistæ–‡ä»¶" class="headerlink" title="ç”¨æˆæƒæ–‡ä»¶ç”Ÿæˆentitlements.plistæ–‡ä»¶"></a>ç”¨æˆæƒæ–‡ä»¶ç”Ÿæˆentitlements.plistæ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥çœ‹æˆæƒæ–‡ä»¶å†…å®¹å‘½ä»¤</span><br><span class="line">security cms -D -i &quot;xxx.mobileprovision&quot;</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºåŸæ¥çš„ Entitlements é…ç½®(å¯èƒ½éœ€è¦ä¸4.2å¯¹æ¯”ï¼Œæ¯”å¦‚æ˜¯æ›´æ–°åŒ…åçš„åº”ç”¨ï¼Œbundle idæ˜¯å˜çš„ï¼)</span><br><span class="line">security cms -D -i embedded.mobileprovision &gt; entitlement_full.plist</span><br><span class="line"></span><br><span class="line">// åªä¿ç•™ Entitlements å±æ€§å†…å®¹</span><br><span class="line">/usr/libexec/PlistBuddy -x -c \&#x27;Print:Entitlements\&#x27; entitlement_full.plist &gt; entitlement.plist</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼šæœ¬æ­¥éª¤çš„ Entitlements å±æ€§å†…å®¹ éå¸¸é‡è¦ï¼Œä¸èƒ½å¤šå­—æ®µï¼Œå¦åˆ™é‡ç­¾æ˜¯æœ‰æ•ˆï¼Œä½†å¯¼è‡´ipaåŒ…å®‰è£…å¤±è´¥~</strong></p><h2 id="æ›¿æ¢æè¿°æ–‡ä»¶"><a href="#æ›¿æ¢æè¿°æ–‡ä»¶" class="headerlink" title="æ›¿æ¢æè¿°æ–‡ä»¶"></a>æ›¿æ¢æè¿°æ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æŠŠæ–°çš„æè¿°æ–‡ä»¶å¤åˆ¶æ›¿æ¢åˆ°è§£å‹åçš„ç›®å½•ä¸­ã€‚</span><br><span class="line">cp ./embedded.mobileprovision ./Payload/yourAppName.app/embedded.mobileprovision</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æŸ¥çœ‹ç³»ç»Ÿä¸­å·²ç»ä¿å­˜çš„æè¿°æ–‡ä»¶ï¼šâ€œ~&#x2F;Library&#x2F;MobileDevice&#x2F;Provisioning\ Profiles&#x2F;â€</p><h2 id="é‡æ–°ç­¾å"><a href="#é‡æ–°ç­¾å" class="headerlink" title="é‡æ–°ç­¾å"></a>é‡æ–°ç­¾å</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ä¸€æ­¥éœ€è¦è¯»å–ä½ é’¥åŒ™ä¸²ä¸­çš„å¼€å‘è€…è¯ä¹¦ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸‹æœ‰å“ªäº›è¯ä¹¦ï¼š</span><br><span class="line">security find-identity -p codesigning -v</span><br><span class="line"></span><br><span class="line">// å…ˆé‡ç­¾åframeworkå’Œdylibï¼ˆä¸é‡ç­¾çš„è¯ï¼Œå°±åˆ é™¤æ— æ³•ç­¾åçš„æ’ä»¶æ–‡ä»¶ï¼šPlugInsæ–‡ä»¶å¤¹ã€Watchæ–‡ä»¶å¤¹ï¼‰</span><br><span class="line">/usr/bin/codesign --force --sign &quot;iPhone Distribution:xxxxx&quot; --entitlements entitlements.plist /Payload/XX.app/Frameworks/xxx.framework</span><br><span class="line"></span><br><span class="line">// å†ç­¾å.appï¼š</span><br><span class="line">$ /usr/bin/codesign -f -s &quot;iPhone Distribution:xxxxx&quot; ./Desktop/Payload/yourAppName.app</span><br><span class="line"></span><br><span class="line">// æˆåŠŸåæç¤ºï¼š</span><br><span class="line">./Payload/yourAppName.app: replacing existing signature.</span><br></pre></td></tr></table></figure><h2 id="å‹ç¼©Payloadï¼Œå°±å®Œæˆäº†é‡ç­¾"><a href="#å‹ç¼©Payloadï¼Œå°±å®Œæˆäº†é‡ç­¾" class="headerlink" title="å‹ç¼©Payloadï¼Œå°±å®Œæˆäº†é‡ç­¾"></a>å‹ç¼©Payloadï¼Œå°±å®Œæˆäº†é‡ç­¾</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip -ry ABC.ipa Payload</span><br></pre></td></tr></table></figure><h2 id="éªŒè¯ï¼šæŸ¥çœ‹ç­¾åä¿¡æ¯å¹¶åœ¨çœŸæœºä¸Šè¿›è¡Œå®‰è£…"><a href="#éªŒè¯ï¼šæŸ¥çœ‹ç­¾åä¿¡æ¯å¹¶åœ¨çœŸæœºä¸Šè¿›è¡Œå®‰è£…" class="headerlink" title="éªŒè¯ï¼šæŸ¥çœ‹ç­¾åä¿¡æ¯å¹¶åœ¨çœŸæœºä¸Šè¿›è¡Œå®‰è£…"></a>éªŒè¯ï¼šæŸ¥çœ‹ç­¾åä¿¡æ¯å¹¶åœ¨çœŸæœºä¸Šè¿›è¡Œå®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// éªŒè¯ç­¾åæ­£ç¡®æ€§ï¼š</span><br><span class="line">codesign -v Payload/XX.app</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹appçš„ç­¾åä¿¡æ¯:</span><br><span class="line">codesign -vv -d Payload/XX.app</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å®‰è£…çš„P12è¯ä¹¦"><a href="#åˆ é™¤å®‰è£…çš„P12è¯ä¹¦" class="headerlink" title="åˆ é™¤å®‰è£…çš„P12è¯ä¹¦"></a>åˆ é™¤å®‰è£…çš„P12è¯ä¹¦</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">security delete-certificate -c &quot;iPhone Distribution: xxxxxx&quot;</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…äº†AppleWWDRCA.cerï¼š</span><br><span class="line">security find-certificate -c &quot;Apple Worldwide Developer Relations Certification Authority&quot;</span><br><span class="line"></span><br><span class="line">// æŸ¥çœ‹appçš„ entitlements</span><br><span class="line">codesign --entitlements :- -d Payload/yourAppName.app</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒå¼•ç”¨"><a href="#å‚è€ƒå¼•ç”¨" class="headerlink" title="å‚è€ƒå¼•ç”¨"></a>å‚è€ƒå¼•ç”¨</h1><ul><li><a href="https://github.com/HanProjectCoder/ResignForiOS">HanProjectCoder&#x2F;ResignForiOS: ipa resign</a></li><li><a href="https://github.com/fastlane/fastlane/tree/master/sigh">fastlane&#x2F;sigh at master Â· fastlane&#x2F;fastlane</a></li><li><a href="https://github.com/cjsliuj/Scalpel">cjsliuj&#x2F;Scalpel: A MacOS app with resign, dylib link injection&#x2F;delete, ipa metadata edit.</a></li><li><a href="https://blog.csdn.net/jerryandliujie/article/details/84845162">Scalpelçš„å®ç°ï¼šä¸€æ¬¾é›†åŠ¨æ€åº“æ³¨å…¥ä¸åˆ é™¤ã€IPAé‡ç­¾åã€IPAå…ƒæ•°æ®ä¿®æ”¹ä¸ºä¸€ä½“çš„MacOS App</a></li><li><a href="https://gist.github.com/FredCox3/0617eba0818a3ba957b7">cfgutil man page</a></li><li><a href="https://stackoverflow.com/questions/7485806/install-p12-or-cer-in-console-macos">shell - install .p12 or .cer in console macos - Stack Overflow</a></li><li><a href="https://github.com/hongbaoshi/reSignature/blob/master/reSignature/TFSignature.py">reSignature&#x2F;TFSignature.py at master Â· hongbaoshi&#x2F;reSignature</a></li><li><a href="https://www.jianshu.com/p/ce2893d99bd4">iOSå¼€å‘ä¸­çš„åº”ç”¨æ‰“åŒ…æ–¹å¼åŠé‡ç­¾åçš„ä¸€äº›æ€»ç»“ - ç®€ä¹¦</a></li><li><a href="https://blog.0x5e.cn/2016/09/25/ios-codesign-things/">iOSä»£ç ç­¾åä¸é‡ç­¾å Â· 0x5eçš„åšå®¢</a></li><li><a href="https://developer.apple.com/library/archive/technotes/tn2206/_index.html">Technical Note TN2206: macOS Code Signing In Depth</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;åˆ©ç”¨Xcodeçš„å‘½ä»¤&lt;code&gt;security&lt;/code&gt;å’Œ&lt;code&gt;codesign&lt;/code&gt;å¤„ç†ipaé‡ç­¾ã€‚é‡ç­¾åä¸Xcodeæ‰“åŒ…ç­¾åæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸç†ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼Œæå‰éœ€è¦å‡†å¤‡ä»¥ä¸‹2ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ–‡ä»¶å&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;Provisioning Profile&lt;/td&gt;
&lt;td&gt;æè¿°æ–‡ä»¶ï¼Œä¼šåƒXcodeä¸€æ ·åŒå‡»å®‰è£…åœ¨ç”µè„‘ä¸Šçš„æè¿°æ–‡ä»¶ï¼Œç”¨å‘½ä»¤è¡Œå¯ä»¥åˆ—ä¸¾å‡ºæ¥ï¼Œå¯ä»¥è¿‡æ»¤è¿‡æœŸçš„è¯ä¹¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Signing Certificate&lt;/td&gt;
&lt;td&gt;é€‰æ‹©å¯¹åº”çš„è¯ä¹¦ï¼Œé€šç”¨ä¼šæ£€ç´¢ç³»ç»Ÿé’¥åŒ™ä¸²å®‰è£…çš„å¯ç”¨çš„è¯ä¹¦ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤æ‰è¿‡æœŸçš„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="é‡ç­¾å" scheme="http://example.com/tags/%E9%87%8D%E7%AD%BE%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/post/4a17b156.html"/>
    <id>http://example.com/post/4a17b156.html</id>
    <published>2023-12-02T10:21:11.000Z</published>
    <updated>2023-12-02T12:09:54.078Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</summary>
    
    
    
    <category term="åšå®¢Blog" scheme="http://example.com/categories/%E5%8D%9A%E5%AE%A2Blog/"/>
    
    <category term="hexo" scheme="http://example.com/categories/%E5%8D%9A%E5%AE%A2Blog/hexo/"/>
    
    <category term="new-yilia" scheme="http://example.com/categories/%E5%8D%9A%E5%AE%A2Blog/new-yilia/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
    <category term="new-yilia" scheme="http://example.com/tags/new-yilia/"/>
    
  </entry>
  
  <entry>
    <title>math</title>
    <link href="http://example.com/post/a927044d.html"/>
    <id>http://example.com/post/a927044d.html</id>
    <published>2023-12-02T10:21:11.000Z</published>
    <updated>2023-12-02T10:27:22.216Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ $\lim_{x \to 0} \frac{\sin x}{x}$ æ¸²æŸ“çš„æ˜¯</p><p>$$<br>\begin{eqnarray}<br> \lim_{x \to 0} \frac{\sin x + x^2 + x^3}{x} &amp; &#x3D; &amp; \lim_{x \to 0} \frac{\sin x }{x} + \lim_{x \to 0} \frac{x^2 }{x} + \lim_{x \to 0}\frac{x^3}{x}<br>\\ &amp; &#x3D; &amp; \lim_{x \to 0}\frac{\sin x}{x}<br>\\ &amp; &#x3D; &amp; 1<br>\end{eqnarray}<br>$$</p><span id="more"></span><p>æ–æ³¢é‚£å¥‘æ•°åˆ—$A_n&#x3D;A_{n-1}+A_{n-2}$,å‰åä¸¤é¡¹çš„æ¯”å€¼é€æ¸æ”¶æ•›åˆ°é»„é‡‘åˆ†å‰²æ¯”ä¾‹<br>$$\lim_{n\to \infty}\frac{A_{n-1}}{A_n}&#x3D;\frac{\sqrt{5}-1}{2}.$$</p><p>å› å¼åˆ†è§£<br>$$\begin{split}(xâˆ’1)(xâˆ’3)&amp;&#x3D;x^2âˆ’4x+3 \<br>&amp;&#x3D;x^2âˆ’4x+4âˆ’1 \<br>&amp;&#x3D;(xâˆ’2)^2âˆ’1<br>\end{split}<br>$$</p><p>ç‹„åˆ©å…‹é›·å‡½æ•°</p><p>$$<br>D(x)&#x3D;<br>\begin{cases}<br>1,&amp; x \in Q \<br>0,&amp; x \notin Q<br>\end{cases}<br>$$</p><p>é«˜æ–¯å…¬å¼<br>$$<br>\iiint_{\Omega}\left(\frac{\partial P}{\partial x}+\frac{\partial Q}{\partial y}+\frac{\partial R}{\partial z}\right) d v&#x3D;\iint_{\Sigma} P d y d z+Q d z d x+R d x d y<br>$$</p><h2 id="ç‰©ç†å…¬å¼"><a href="#ç‰©ç†å…¬å¼" class="headerlink" title="ç‰©ç†å…¬å¼"></a>ç‰©ç†å…¬å¼</h2><ul><li>ç‰›é¡¿ç¬¬ä¸€å®šå¾‹: $\sum \vec{F}_{i}&#x3D;\frac{\mathrm{d} \vec{v}}{\mathrm{d} t}&#x3D;0$</li><li>ç‰›é¡¿ç¬¬äºŒå®šå¾‹: $\vec{F}&#x3D;\frac{\mathrm{d} m}{\mathrm{d} t} \vec{v}+m \frac{\mathrm{d} \vec{v}}{\mathrm{d} t}&#x3D;\frac{\mathrm{d} m}{\mathrm{d} t} \vec{v}+m \vec{a}&#x3D;\frac{\mathrm{d} m}{\mathrm{d} t} \vec{v}+m \frac{\mathrm{d}^{2} \vec{r}}{\mathrm{d} t^{2}}$</li><li>ç‰›é¡¿ç¬¬ä¸‰å®šå¾‹: $\overrightarrow{F_{12}}&#x3D;-\overrightarrow{F_{21}}$</li><li>è´¨èƒ½å®ˆæ’: $E&#x3D;mc^2$</li></ul><h2 id="åŒ–å­¦å…¬å¼"><a href="#åŒ–å­¦å…¬å¼" class="headerlink" title="åŒ–å­¦å…¬å¼"></a>åŒ–å­¦å…¬å¼</h2><p>ç¦»å­ååº”ä¸æ²‰æ·€: $\ce{SO4^2- + Ba^2+ -&gt; BaSO4 v}$</p><h2 id="ç”Ÿç‰©å…¬å¼"><a href="#ç”Ÿç‰©å…¬å¼" class="headerlink" title="ç”Ÿç‰©å…¬å¼"></a>ç”Ÿç‰©å…¬å¼</h2><p>å…‰åˆä½œç”¨<br>èŒƒå¾·è’™è¡Œåˆ—å¼<br>$$D_{n-1}&#x3D;\left|\begin{array}{cccc}<br>1 &amp; 1 &amp; \dots &amp; 1 \<br>x_{2} &amp; x_{3} &amp; \dots &amp; x_{n} \<br>\vdots &amp; \vdots &amp; &amp; \vdots \<br>x_{2}^{n-2} &amp; x_{3}^{n-2} &amp; \dots &amp; x_{n}^{n-2}<br>\end{array}\right|&#x3D;\prod_{2 \leq j&lt;i \leq n}\left(x_{i}-x_{j}\right)$$</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¦‚ $&#92;lim_{x &#92;to 0} &#92;frac{&#92;sin x}{x}$ æ¸²æŸ“çš„æ˜¯&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;&#92;begin{eqnarray}&lt;br&gt; &#92;lim_{x &#92;to 0} &#92;frac{&#92;sin x + x^2 + x^3}{x} &amp;amp; &amp;#x3D; &amp;amp; &#92;lim_{x &#92;to 0} &#92;frac{&#92;sin x }{x} + &#92;lim_{x &#92;to 0} &#92;frac{x^2 }{x} + &#92;lim_{x &#92;to 0}&#92;frac{x^3}{x}&lt;br&gt;&#92;&#92; &amp;amp; &amp;#x3D; &amp;amp; &#92;lim_{x &#92;to 0}&#92;frac{&#92;sin x}{x}&lt;br&gt;&#92;&#92; &amp;amp; &amp;#x3D; &amp;amp; 1&lt;br&gt;&#92;end{eqnarray}&lt;br&gt;$$&lt;/p&gt;</summary>
    
    
    
    <category term="math" scheme="http://example.com/categories/math/"/>
    
    
    <category term="math" scheme="http://example.com/tags/math/"/>
    
  </entry>
  
  <entry>
    <title>React Native--ç¯å¢ƒé…ç½®</title>
    <link href="http://example.com/post/41e657ca.html"/>
    <id>http://example.com/post/41e657ca.html</id>
    <published>2016-08-15T08:09:22.000Z</published>
    <updated>2023-12-02T10:27:22.189Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘å­¦ä¹ React Nativeï¼Œåšç‚¹ç¬”è®°ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åˆ°éœ€è¦çš„äººã€‚</p><span id="more"></span><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><h3 id="å®‰è£…Homebrew"><a href="#å®‰è£…Homebrew" class="headerlink" title="å®‰è£…Homebrew"></a>å®‰è£…Homebrew</h3><ul><li><strong>å®šä¹‰ï¼š</strong>Homebrewæ˜¯OS Xçš„å¥—ä»¶(åŒ…)ç®¡ç†å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒè·å–å¹¶ä¸”å®‰è£…å¾ˆå¤šç»„ä»¶ã€‚</li><li><strong>å®‰è£…æ–¹å¼ï¼š</strong>åœ¨ç»ˆç«¯è¿è¡Œ<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">&quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span></span><br></pre></td></tr></table></figure></li><li><strong>æ³¨æ„ï¼š</strong>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼Œå®‰è£…è¿‡ç¨‹å–å†³äºä½ å½“å‰çš„ç½‘é€Ÿã€‚</li></ul><h3 id="å®‰è£…npmå’ŒNode-js"><a href="#å®‰è£…npmå’ŒNode-js" class="headerlink" title="å®‰è£…npmå’ŒNode.js"></a>å®‰è£…npmå’ŒNode.js</h3><ul><li>Node.jsæœ€å¥½å®‰è£…<strong>4.0</strong>åŠå…¶ä»¥ä¸Šæ›´é«˜ç‰ˆæœ¬ï¼Œnodeå®‰è£…æˆåŠŸä¹‹ånpmè‡ªåŠ¨å°±æœ‰äº†ï¼Œç›´æ¥ä¸‹è½½å®‰è£…Node.jsï¼Œç½‘å€ï¼š<a href="http://nodejs.cn/download/">http://nodejs.cn/download/</a></li></ul><h3 id="å®‰è£…WatchMan"><a href="#å®‰è£…WatchMan" class="headerlink" title="å®‰è£…WatchMan"></a>å®‰è£…WatchMan</h3><ul><li><strong>ä½œç”¨ï¼š</strong>è¯¥æ’ä»¶ç”¨äºç›‘æ§bugå’Œæ–‡ä»¶å˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥è§¦å‘æŒ‡å®šçš„æ“ä½œã€‚(éå¿…é¡»å®‰è£…ï¼Œçœ‹è‡ªå·±æ„æ„¿)</li><li><strong>å®‰è£…æ–¹å¼ï¼š</strong><code>brew install watchman</code>,å½“å‡ºç°ğŸºå›¾æ ‡çš„æ—¶å€™ï¼Œè¡¨ç¤ºå·²ç»å®‰è£…æˆåŠŸï¼Œç”±äºæˆ‘ç”µè„‘å·²ç»å®‰è£…äº†ï¼Œæ‰€ä»¥ä¼šæç¤º<code>Warning: watchman-4.5.0 already installed</code></li><li><strong>æ³¨æ„ï¼š</strong>åœ¨Mac OS X 10.11(EI Capitan)ç‰ˆæœ¬ä¸­ï¼Œhomebrewåœ¨å®‰è£…è½¯ä»¶æ—¶å¯èƒ½ä¼šç¢°åˆ°&#x2F;usr&#x2F;localç›®å½•ä¸å¯å†™çš„æƒé™é—®é¢˜ã€‚å¯ä»¥ä½¿ç”¨åœ¨å‰é¢æ·»åŠ  <code>sudo</code>(ç®¡ç†å‘˜æƒé™)ã€‚</li></ul><h3 id="å®‰è£…Flow"><a href="#å®‰è£…Flow" class="headerlink" title="å®‰è£…Flow"></a>å®‰è£…Flow</h3><ul><li><strong>å®šä¹‰ï¼š</strong>flowæ˜¯ä¸€ä¸ªJavaScriptçš„é™æ€ç±»å‹æ£€æŸ¥å™¨ï¼Œå»ºè®®å®‰è£…å®ƒï¼Œä»¥æ–¹ä¾¿æ‰¾å‡ºä»£ç ä¸­å¯èƒ½å­˜åœ¨çš„ç±»å‹é”™è¯¯ã€‚</li><li><strong>å®‰è£…æ–¹å¼ï¼š</strong><code>brew install flow</code>ï¼ŒåŒå®‰è£…WatchManä¸€æ ·ï¼Œå½“å‡ºç°ğŸºå›¾æ ‡çš„æ—¶å€™ï¼Œè¡¨ç¤ºå·²ç»å®‰è£…æˆåŠŸï¼Œå¦‚æœä½ ç”µè„‘å·²ç»å®‰è£…äº†ï¼Œåˆ™ä¼šæç¤º<code>Warning: flow-0.24.1 already installed</code></li><li><strong>æ³¨æ„ï¼š</strong>å¦‚æœæç¤º<code>command not found</code>ï¼Œè¯·åŠ ä¸Š<code>sudo</code>è·å–ç®¡ç†å‘˜æƒé™ã€‚</li></ul><h2 id="React-Nativeå®‰è£…"><a href="#React-Nativeå®‰è£…" class="headerlink" title="React Nativeå®‰è£…"></a>React Nativeå®‰è£…</h2><h3 id="å®‰è£…React-Native"><a href="#å®‰è£…React-Native" class="headerlink" title="å®‰è£…React Native"></a>å®‰è£…React Native</h3><ul><li><strong>å®‰è£…æ–¹å¼ï¼š</strong><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g react-native-cli</span><br></pre></td></tr></table></figure></li></ul><h2 id="React-Nativeçš„ç¬¬ä¸€ä¸ªåº”ç”¨"><a href="#React-Nativeçš„ç¬¬ä¸€ä¸ªåº”ç”¨" class="headerlink" title="React Nativeçš„ç¬¬ä¸€ä¸ªåº”ç”¨"></a>React Nativeçš„ç¬¬ä¸€ä¸ªåº”ç”¨</h2><h3 id="æ‰§è¡Œå‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªå·¥ç¨‹"><a href="#æ‰§è¡Œå‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªå·¥ç¨‹" class="headerlink" title="æ‰§è¡Œå‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªå·¥ç¨‹"></a>æ‰§è¡Œå‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªå·¥ç¨‹</h3><ul><li>react-native init é¡¹ç›®å</li></ul><p>ç­‰å¾…ç»ˆç«¯å®Œæˆã€‚å°±ä»£è¡¨æˆ‘ä»¬çš„ç¯å¢ƒå·²ç»é…ç½®å¥½äº†ã€‚<br><strong>æ³¨æ„ï¼š</strong>æœ¬æ–‡æ˜¯é’ˆå¯¹ iOS,å› æ­¤æ²¡æœ‰é…ç½® Androidç¯å¢ƒã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ€è¿‘å­¦ä¹ React Nativeï¼Œåšç‚¹ç¬”è®°ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åˆ°éœ€è¦çš„äººã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="React Native" scheme="http://example.com/categories/React-Native/"/>
    
    
    <category term="React Native" scheme="http://example.com/tags/React-Native/"/>
    
  </entry>
  
  <entry>
    <title>Nextä¸»é¢˜æ·»åŠ ç•™è¨€æœ¬é¡µé¢</title>
    <link href="http://example.com/post/a893cf31.html"/>
    <id>http://example.com/post/a893cf31.html</id>
    <published>2016-08-13T13:34:24.000Z</published>
    <updated>2023-12-02T10:27:22.187Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•ç»™Nextä¸»é¢˜æ·»åŠ ç•™è¨€åŠŸèƒ½ã€‚</p><span id="more"></span><h3 id="æ·»åŠ ç•™è¨€æœ¬page"><a href="#æ·»åŠ ç•™è¨€æœ¬page" class="headerlink" title="æ·»åŠ ç•™è¨€æœ¬page"></a>æ·»åŠ ç•™è¨€æœ¬page</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page guestbook</span><br></pre></td></tr></table></figure><h3 id="ç•™è¨€æœ¬é¡µé¢"><a href="#ç•™è¨€æœ¬é¡µé¢" class="headerlink" title="ç•™è¨€æœ¬é¡µé¢"></a>ç•™è¨€æœ¬é¡µé¢</h3><p>åœ¨ä¸Šä¸€æ­¥ä½¿ç”¨<code>hexo</code>å‘½ä»¤æ–°å»ºäº†çš„pageé¡µé¢ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;ds-recent-visitors&quot;</span> data-num-items=<span class="string">&quot;28&quot;</span> data-avatar-size=<span class="string">&quot;42&quot;</span> id=<span class="string">&quot;ds-recent-visitors&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åç™»é™†è‡ªå·±çš„å¤šè¯´ç«™ç‚¹ï¼Œè¿›å…¥è®¾ç½®-&gt;è‡ªå®šä¹‰CSS,æ·»åŠ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#ds-reset .<span class="property">ds</span>-avatar img,</span><br><span class="line">#ds-recent-visitors .<span class="property">ds</span>-avatar img &#123;</span><br><span class="line">   <span class="attr">width</span>: 54px;</span><br><span class="line">   <span class="attr">height</span>: 54px;     <span class="comment">/*è¨­ç½®åœ–åƒçš„é•·å’Œå¯¬ï¼Œé€™è£è¦æ ¹æ“šè‡ªå·±çš„è©•è«–æ¡†æƒ…æ³æ›´æ”¹*/</span></span><br><span class="line">   border-<span class="attr">radius</span>: 27px;     <span class="comment">/*è¨­ç½®åœ–åƒåœ“è§’æ•ˆæœ,åœ¨é€™è£æˆ‘ç›´æ¥è¨­ç½®äº†è¶…éwidth/2çš„åƒç´ ï¼Œå³ç‚ºåœ“å½¢äº†*/</span></span><br><span class="line">   -webkit-border-<span class="attr">radius</span>: 27px;     <span class="comment">/*åœ“è§’æ•ˆæœï¼šå…¼å®¹webkitç€è¦½å™¨*/</span></span><br><span class="line">   -moz-border-<span class="attr">radius</span>: 27px;</span><br><span class="line">   box-<span class="attr">shadow</span>: inset <span class="number">0</span> -1px <span class="number">0</span> #3333sf;     <span class="comment">/*è¨­ç½®åœ–åƒé™°å½±æ•ˆæœ*/</span></span><br><span class="line">   -webkit-box-<span class="attr">shadow</span>: inset <span class="number">0</span> -1px <span class="number">0</span> #3333sf;</span><br><span class="line">&#125;</span><br><span class="line">#ds-recent-visitors .<span class="property">ds</span>-avatar &#123;</span><br><span class="line">   <span class="attr">float</span>: left</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*éš±è—å¤šèªªåº•éƒ¨ç‰ˆæ¬Š*/</span></span><br><span class="line">#ds-thread #ds-reset .<span class="property">ds</span>-powered-by &#123;</span><br><span class="line">   <span class="attr">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èœå•è®¾ç½®ä¸­æ·»åŠ ç•™è¨€æœ¬"><a href="#èœå•è®¾ç½®ä¸­æ·»åŠ ç•™è¨€æœ¬" class="headerlink" title="èœå•è®¾ç½®ä¸­æ·»åŠ ç•™è¨€æœ¬"></a>èœå•è®¾ç½®ä¸­æ·»åŠ ç•™è¨€æœ¬</h3><p>æ‰¾åˆ°<code>NexT</code>ä¸»é¢˜è®¾ç½®çš„<code>_config.yml</code>æ–‡ä»¶é‡Œé¢çš„<code>menu</code>é¡¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line"> home: /</span><br><span class="line"> categories: /categories</span><br><span class="line"> archives: /archives</span><br><span class="line"> tags: /tags</span><br><span class="line"> about: /about</span><br><span class="line"> guestbook: /guestbook</span><br><span class="line"> #commonweal: /404.html</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶çš„å€¼"><a href="#æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶çš„å€¼" class="headerlink" title="æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶çš„å€¼"></a>æ·»åŠ å¤šè¯­è¨€æ–‡ä»¶çš„å€¼</h3><p>å› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸­æ–‡ï¼Œæ‰¾åˆ°<code>languages</code>æ–‡ä»¶å¤¹é‡Œé¢çš„<code>zh-Hans.yml</code>æ–‡ä»¶ï¼Œ<code>menu</code>å­é¡¹ä¸­æ·»åŠ ç•™è¨€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line"> home: é¦–é¡µ</span><br><span class="line"> archives: å½’æ¡£</span><br><span class="line"> categories: åˆ†ç±»</span><br><span class="line"> tags: æ ‡ç­¾</span><br><span class="line"> about: å…³äº</span><br><span class="line"> search: æœç´¢</span><br><span class="line"> commonweal: å…¬ç›Š404</span><br><span class="line"> guestbook: ç•™è¨€</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•ç»™Nextä¸»é¢˜æ·»åŠ ç•™è¨€åŠŸèƒ½ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Hexo" scheme="http://example.com/categories/Hexo/"/>
    
    
    <category term="Hexo" scheme="http://example.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•æ­£ç¡®ä½¿ç”¨const(å¸¸é‡),define(å®)</title>
    <link href="http://example.com/post/5f6a69b3.html"/>
    <id>http://example.com/post/5f6a69b3.html</id>
    <published>2016-06-23T14:47:59.000Z</published>
    <updated>2023-12-02T10:27:22.239Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å¼€å‘ä¸­ï¼Œä¹Ÿè®¸æˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨åˆ°å®å®šä¹‰ï¼Œæˆ–è€…ç”¨constä¿®é¥°ä¸€äº›æ•°æ®ç±»å‹ï¼Œç»å¸¸æœ‰å¼€å‘è€…ä¸çŸ¥é“æ€ä¹ˆæ­£ç¡®ä½¿ç”¨ï¼Œå¯¼è‡´é¡¹ç›®ä¸­ä¹±ç”¨å®å®šä¹‰ä¸constä¿®é¥°ç¬¦ã€‚æœ¬ç¯‡ä¸»è¦ä»‹ç»åœ¨å¼€å‘ä¸­æ€ä¹ˆæ­£ç¡®ä½¿ç”¨<code>const</code>ä¸<code>define(å®å®šä¹‰)</code></p><span id="more"></span><p>å½“æˆ‘ä»¬æƒ³å®šä¹‰å…¨å±€å…±ç”¨çš„ä¸€äº›æ•°æ®æ—¶ï¼Œæ¯”å¦‚é€šçŸ¥åå­—ï¼ŒåŠ¨ç”»æ—¶é•¿ç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>å®</code>ã€<code>å¸¸é‡</code>ã€<code>å˜é‡</code>ï¼š</p><ul><li><p><strong>å®ï¼š</strong></p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„åé¢ä¸éœ€è¦å¸¦ç¬¦å·</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ScottDidLoginSuccess @<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span></span></span><br></pre></td></tr></table></figure></li><li><p><strong>å˜é‡ï¼š</strong></p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„åé¢ä¸€å®šè¦å¸¦ç¬¦å·</span></span><br><span class="line"><span class="built_in">NSString</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>ï¼›</span><br></pre></td></tr></table></figure></li><li><p><strong>å¸¸é‡ï¼š</strong></p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å››ç§å†™æ³•</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">NSString</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>ï¼›</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">NSString</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> <span class="keyword">const</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br></pre></td></tr></table></figure></li></ul><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬åˆ°åº•è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ<br>è®©æˆ‘æ¥å…ˆå°†ä¸€ä¸‹æˆ‘å¯¹å®ƒä»¬ä¹‹é—´çš„ç†è§£å§ï¼š</p><ul><li><strong>å®ï¼š</strong>åªæ˜¯åœ¨é¢„å¤„ç†é˜¶æ®µè¿›è¡Œæ–‡æœ¬æ›¿æ¢ï¼Œæ²¡æœ‰ç±»å‹ï¼Œä¸åšä»»ä½•ç±»å‹æ£€æŸ¥ï¼Œç¼–è¯‘å™¨å¯ä»¥å¯¹ç›¸åŒçš„å­—ç¬¦ä¸²è¿›è¡Œä¼˜åŒ–ï¼Œåªä¿å­˜ä¸€ä»½åˆ°æ•°æ®æ®µã€‚ç”šè‡³æœ‰ç›¸åŒåç¼€çš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä¼˜åŒ–ï¼Œä½ å¯ä»¥ä½¿ç”¨GCCç¼–è¯‘æµ‹è¯•ï¼Œ<code>Hello world</code>ä¸<code>world</code>ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œåªå­˜å‚¨å‰é¢ä¸€ä¸ªã€‚å–çš„æ—¶å€™åªéœ€è¦ç»™å‰é¢å’Œä¸­é—´çš„åœ°å€ï¼Œå¦‚æœæ˜¯æ•´å‹ã€æµ®ç‚¹å‹ä¼šæœ‰å¤šåˆ†æ‹·è´ï¼Œä½†è¿™äº›æ•°å†™åœ¨æŒ‡ä»¤ä¸­ï¼Œå çš„åªæ˜¯ä»£ç ç‰‡æ®µè€Œä¸”ï¼Œå¤§é‡ä½¿ç”¨å®ä¼šå¯¼è‡´äºŒè¿›åˆ¶æ–‡ä»¶å˜å¤§ã€‚</li><li><strong>å˜é‡ï¼š</strong>å…±äº«ä¸€å—å†…å­˜ç©ºé—´ï¼Œå°±ç®—é¡¹ç›®ä¸­Nå¤„ç”¨åˆ°ï¼Œä¹Ÿä¸ä¼šåˆ†é…Nå—å†…å­˜ç©ºé—´ï¼Œå¯ä»¥è¢«ä¿®æ”¹ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µåšç±»å‹æ£€æŸ¥ã€‚</li><li><strong>å¸¸é‡ï¼š</strong>å…±äº«ä¸€å—å†…å­˜ç©ºé—´ï¼Œå°±ç®—é¡¹ç›®ä¸­Nå¤„ç”¨åˆ°ï¼Œä¹Ÿä¸ä¼šåˆ†é…Nå—å†…å­˜ç©ºé—´ï¼Œå¯ä»¥æ ¹æ®<code>const</code>ä¿®é¥°çš„ä½ç½®è®¾å®šèƒ½å¤Ÿä¿®æ”¹ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µåšç±»å‹æ£€æŸ¥ã€‚</li></ul><h2 id="å¸¸é‡åŒºåˆ†"><a href="#å¸¸é‡åŒºåˆ†" class="headerlink" title="å¸¸é‡åŒºåˆ†"></a>å¸¸é‡åŒºåˆ†</h2><ul><li><p><strong>å…¨å±€å¸¸é‡ï¼š</strong>ä¸ç®¡ä½ å®šä¹‰åœ¨ä»»ä½•æ–‡ä»¶å¤¹ï¼Œå¤–éƒ¨éƒ½èƒ½è®¿é—®</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">NSString</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>å±€éƒ¨å¸¸é‡ï¼š</strong>ç”¨staticä¿®é¥°åï¼Œä¸èƒ½ä¾›å¤–ç•Œè®¿é—®</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">NSString</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br></pre></td></tr></table></figure></li></ul><h2 id="constä¿®é¥°ä½ç½®ä¸åŒï¼Œä»£è¡¨ä»€ä¹ˆ"><a href="#constä¿®é¥°ä½ç½®ä¸åŒï¼Œä»£è¡¨ä»€ä¹ˆ" class="headerlink" title="constä¿®é¥°ä½ç½®ä¸åŒï¼Œä»£è¡¨ä»€ä¹ˆ"></a>constä¿®é¥°ä½ç½®ä¸åŒï¼Œä»£è¡¨ä»€ä¹ˆ</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">NSString</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="built_in">NSString</span> <span class="keyword">const</span> *scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="built_in">NSString</span> * <span class="keyword">const</span> scottDidLoginSuccess = <span class="string">@&quot;ç™»é™†æˆåŠŸ&quot;</span>;</span><br></pre></td></tr></table></figure><p>å’‹ä¸€çœ‹ï¼ŒWTFï¼Œè¿™ä¸éƒ½å¼ ä¸€æ ·å˜›ï¼Œå…¶å®ä¸ä¸€æ ·ï¼Œä¸‹é¢è§£é‡Šä¸€ä¸‹å„ä»£è¡¨ä»€ä¹ˆ</p><ol><li><code>*scottDidLoginSuccess</code>ä¸èƒ½è¢«ä¿®æ”¹ï¼Œ<code>scottDidLoginSuccess</code>èƒ½è¢«ä¿®æ”¹</li><li><code>*scottDidLoginSuccess</code>ä¸èƒ½è¢«ä¿®æ”¹ï¼Œ<code>scottDidLoginSuccess</code>èƒ½è¢«ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯å’Œç¬¬ä¸€ç§æƒ…å†µæ˜¯ä¸€æ ·çš„</li><li><code>scottDidLoginSuccess</code>ä¸èƒ½è¢«ä¿®æ”¹ï¼Œ<code>*scottDidLoginSuccess</code>èƒ½è¢«ä¿®æ”¹ã€‚</li></ol><p><strong>ç»“è®ºï¼š</strong><code>const</code>å³è¾¹çš„æ€»ä¸èƒ½è¢«ä¿®æ”¹</p><blockquote><p>æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å®šä¹‰ä¸€ä¸ªå¸¸é‡åˆä¸æƒ³è¢«ä¿®æ”¹ï¼Œåº”è¯¥è¿™æ ·å®šä¹‰ï¼š<br>    <code>NSString *const scottDidLoginSuccess = @&quot;ç™»é™†æˆåŠŸ&quot;;</code></p></blockquote><h2 id="ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«"><a href="#ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«"></a>ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«</h2><ul><li><code>define</code>åœ¨é¢„å¤„ç†é˜¶æ®µè¿›è¡Œæ›¿æ¢ï¼Œ<code>const</code>å¸¸é‡åœ¨ç¼–è¯‘é˜¶æ®µä½¿ç”¨ï¼›</li><li><code>define</code>ä¸åšç±»å‹æ£€æŸ¥ï¼Œåªè¿›è¡Œæ›¿æ¢ï¼Œ<code>const</code>å¸¸é‡æœ‰æ•°æ®ç±»å‹ï¼Œä¼šæ‰§è¡Œç±»å‹æ£€æŸ¥ï¼›</li><li><code>define</code>ä¸èƒ½è°ƒè¯•ï¼Œ<code>const</code>å¸¸é‡å¯ä»¥è°ƒè¯•ï¼›</li><li><code>define</code>å®šä¹‰çš„å¸¸é‡åœ¨æ›¿æ¢åè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šä¸æ–­å ç”¨å†…å­˜ï¼Œè€Œ<code>const</code>å®šä¹‰çš„å¸¸é‡å­˜å‚¨åœ¨æ•°æ®æ®µï¼Œåªæœ‰ä¸€ä»½æ‹·è´ï¼Œæ•ˆç‡æ›´é«˜ï¼›</li><li><code>define</code>å¯ä»¥å®šä¹‰å‡½æ•°ï¼Œ<code>const</code>ä¸å¯ä»¥ã€‚</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨å¼€å‘ä¸­ï¼Œä¹Ÿè®¸æˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨åˆ°å®å®šä¹‰ï¼Œæˆ–è€…ç”¨constä¿®é¥°ä¸€äº›æ•°æ®ç±»å‹ï¼Œç»å¸¸æœ‰å¼€å‘è€…ä¸çŸ¥é“æ€ä¹ˆæ­£ç¡®ä½¿ç”¨ï¼Œå¯¼è‡´é¡¹ç›®ä¸­ä¹±ç”¨å®å®šä¹‰ä¸constä¿®é¥°ç¬¦ã€‚æœ¬ç¯‡ä¸»è¦ä»‹ç»åœ¨å¼€å‘ä¸­æ€ä¹ˆæ­£ç¡®ä½¿ç”¨&lt;code&gt;const&lt;/code&gt;ä¸&lt;code&gt;define(å®å®šä¹‰)&lt;/code&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="constã€define" scheme="http://example.com/tags/const%E3%80%81define/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨Runtimeå®ç°ç®€å•çš„å­—å…¸è½¬æ¨¡å‹</title>
    <link href="http://example.com/post/f61e800.html"/>
    <id>http://example.com/post/f61e800.html</id>
    <published>2016-06-19T03:00:15.000Z</published>
    <updated>2023-12-02T10:27:22.236Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¼€å‘ä¸­ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯å°†æœåŠ¡å™¨è¿”å›çš„æ•°æ®è½¬æ¢æˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ¨¡å‹å¯¹è±¡ã€‚å½“ç„¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç»“æ„æœ‰<code>xml</code>ç±»å‹çš„ï¼Œä¹Ÿæœ‰<code>json</code>ç±»å‹çš„ã€‚æœ¬æ–‡åªè®¨è®º<code>json</code>æ ¼å¼çš„ã€‚</p><span id="more"></span><p><strong>å¤§å®¶åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬æ˜¯æ€ä¹ˆæ ·å°†æœåŠ¡å™¨è¿”å›çš„<code>json</code>è½¬åŒ–æˆè‡ªå·±å®šä¹‰çš„æ¨¡å‹ç±»å‘¢ï¼Ÿ</strong></p><p>æˆ‘åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨çš„<a href="https://github.com/CoderMJLee/MJExtension">MJExtension</a>ã€‚<br>æœ¬æ–‡è®²è§£çš„ä¹ŸåŸºæœ¬å°±æ˜¯è§£è¯»<code>MJExtension</code>ä¸­çš„éƒ¨åˆ†æºç ã€‚<br>å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œletâ€™s go</p><h2 id="ç®€å•å­—å…¸è½¬æ¨¡å‹"><a href="#ç®€å•å­—å…¸è½¬æ¨¡å‹" class="headerlink" title="ç®€å•å­—å…¸è½¬æ¨¡å‹"></a>ç®€å•å­—å…¸è½¬æ¨¡å‹</h2><p>é¦–å…ˆï¼Œä»æœ€ç®€å•çš„å­—å…¸å¼€å§‹ï¼Œä¾‹å¦‚æˆ‘ä»¬éœ€è¦å°†å¦‚ä¸‹çš„å­—å…¸è½¬åŒ–æˆè‡ªå®šä¹‰çš„æ¨¡å‹ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;<span class="string">@&quot;name&quot;</span>:<span class="string">@&quot;Scott&quot;</span>,</span><br><span class="line">                       <span class="string">@&quot;icon&quot;</span> : <span class="string">@&quot;lufy.png&quot;</span>,</span><br><span class="line">                       <span class="string">@&quot;age&quot;</span> : <span class="string">@&quot;20&quot;</span>,</span><br><span class="line">                       <span class="string">@&quot;height&quot;</span> : @<span class="number">1.75</span>,</span><br><span class="line">                       <span class="string">@&quot;money&quot;</span> : <span class="string">@&quot;100.9&quot;</span>,</span><br><span class="line">                       <span class="string">@&quot;sex&quot;</span> : @(SexMale),</span><br><span class="line">                       <span class="string">@&quot;gay&quot;</span> : <span class="string">@&quot;ture&quot;</span>,</span><br><span class="line">                       &#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>ScottUser</code>ç±»ï¼Œå¹¶ä¸”å®šä¹‰å¥½å±æ€§åå¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, Sex) &#123;</span><br><span class="line">    SexMale,    <span class="comment">// ç”·</span></span><br><span class="line">    SexFemale   <span class="comment">// å¥³</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ScottUser</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">/**  å§“å */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="comment">/**  å¤´åƒ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *icon;</span><br><span class="line"><span class="comment">/**  å¹´é¾„ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="type">unsigned</span> <span class="type">int</span> age;</span><br><span class="line"><span class="comment">/**  èº«é«˜ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSNumber</span> *height;</span><br><span class="line"><span class="comment">/**  è´¢å¯Œ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *money;</span><br><span class="line"><span class="comment">/**  æ€§åˆ« */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) Sex sex;</span><br><span class="line"><span class="comment">/**  æ˜¯å¦åŒæ€§ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>, <span class="keyword">getter</span>=isGay) <span class="type">BOOL</span> gay;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸‹ä¸€æ­¥çš„ç›®æ ‡å°±æ˜¯æ‹¿åˆ°å­—å…¸é‡Œé¢çš„å€¼(<code>value</code>)å¯¹<code>ScottUser</code>æ¨¡å‹å±æ€§è¿›è¡Œèµ‹å€¼ï¼Œæ¨¡å‹çš„å±æ€§åå¯¹åº”ç€å­—å…¸é‡Œé¢çš„<code>key</code>ã€‚</p><p>æœ€ç›´æ¥çš„æ–¹æ³•å°±æ˜¯ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ScottUser *user = [[ScottUser alloc] init];</span><br><span class="line">   user.name = dict[<span class="string">@&quot;name&quot;</span>];</span><br><span class="line">   user.icon = dict[<span class="string">@&quot;icon&quot;</span>];</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¯¹äºæ¯ä¸€æ¬¡çš„æ•°æ®è½¬æ¨¡å‹ï¼Œä½ éƒ½è¦è¿™æ ·å»å†™å¤§é‡çš„é‡å¤ä»£ç ï¼Œæ¯«æ— æ„ä¹‰ã€‚<br>å½“ç„¶æˆ‘ä»¬åˆ©ç”¨<code>setValuesForKeysWithDictionary:(NSDictionary *)dict</code>è¿›è¡Œ<code>kvc</code>èµ‹å€¼ã€‚</p><p><strong>KVCèµ‹å€¼</strong></p><ul><li><strong>ä¼˜ç‚¹ï¼š</strong>ä¸éœ€è¦å»æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªå±æ€§èµ‹å€¼ã€‚</li><li><strong>ç¼ºç‚¹ï¼š</strong>å½“è‡ªå®šä¹‰çš„å±æ€§å’Œå­—å…¸ä¸­çš„keyä¸ä¸€æ ·çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™ã€‚</li><li><strong>è§£å†³åŠæ³•ï¼š</strong>é‡å†™<code>- (void)setValue:(id)value forUndefinedKey:(NSString *)key</code>æ–¹æ³•ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å†™ä¸€ä¸ªæ¡†æ¶è‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°å­—å…¸è½¬æ¨¡å‹ï¼Œå¤§è‡´æ€è·¯å°±æ˜¯ï¼š</p><ol><li>éå†æ¨¡å‹ä¸­çš„<code>å±æ€§</code>ï¼Œç„¶åæ‹¿åˆ°<code>å±æ€§å</code>ä½œä¸º<code>é”®å€¼</code>å»å­—å…¸ä¸­å¯»æ‰¾<code>å€¼</code>;</li><li>æ‰¾åˆ°<code>å€¼</code>åï¼Œæ ¹æ®æ¨¡å‹çš„<code>å±æ€§ç±»å‹</code>å°†<code>å€¼</code>è½¬åŒ–æˆæ­£ç¡®çš„<code>ç±»å‹</code>;</li><li>ç»™<code>å±æ€§å</code>èµ‹å€¼ã€‚</li></ol><hr><h3 id="éå†æ¨¡å‹ä¸­çš„å±æ€§ï¼Œæ‹¿åˆ°å±æ€§åä½œä¸ºé”®å€¼å»å­—å…¸ä¸­å¯»æ‰¾å€¼"><a href="#éå†æ¨¡å‹ä¸­çš„å±æ€§ï¼Œæ‹¿åˆ°å±æ€§åä½œä¸ºé”®å€¼å»å­—å…¸ä¸­å¯»æ‰¾å€¼" class="headerlink" title="éå†æ¨¡å‹ä¸­çš„å±æ€§ï¼Œæ‹¿åˆ°å±æ€§åä½œä¸ºé”®å€¼å»å­—å…¸ä¸­å¯»æ‰¾å€¼"></a>éå†æ¨¡å‹ä¸­çš„<code>å±æ€§</code>ï¼Œæ‹¿åˆ°<code>å±æ€§å</code>ä½œä¸º<code>é”®å€¼</code>å»å­—å…¸ä¸­å¯»æ‰¾<code>å€¼</code></h3><p>æ–¹æ³•ä¼ªä»£ç ï¼š</p><pre><code>[æ¨¡å‹ç±» éå†å±æ€§çš„æ–¹æ³•];</code></pre><p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œåˆ›å»ºä¸€ä¸ªå«<code>NSObject+ScottProperty</code>çš„åˆ†ç±»ï¼Œå†™ä¸€ä¸ªè·å–æ‰€æœ‰å±æ€§çš„æ–¹æ³•ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSObject</span> (<span class="title">ScottProperty</span>)</span></span><br><span class="line">+ (<span class="built_in">NSArray</span> *)properties;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>å‡è®¾æˆ‘ä»¬åœ¨çœ‹ä¸åˆ°ä¸€ä¸ªç±»çš„<code>.h</code>å’Œ<code>.m</code>æ–‡ä»¶çš„å‰æä¸‹ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è·å–å®ƒæ‰€æœ‰çš„å®ä¾‹å˜é‡å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯é€šè¿‡<code>Runtime</code>ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;NSObject+ScottProperty.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSObject</span> (<span class="title">ScottProperty</span>)</span></span><br><span class="line">+ (<span class="built_in">NSArray</span> *)properties &#123;</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *propertiesArr = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> outCount = <span class="number">0</span>;</span><br><span class="line">    objc_property_t *properties = class_copyPropertyList(<span class="keyword">self</span>, &amp;outCount);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;outCount; i++) &#123;</span><br><span class="line">        objc_property_t property = properties[i];</span><br><span class="line">        [propertiesArr addObject:propertyObj];</span><br><span class="line">        <span class="type">char</span> *name = property_getName(property);</span><br><span class="line">        <span class="type">char</span> *att = property_getAttributes(property);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;name:%s-----att:%s&quot;</span>,name,att);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> propertiesArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¤–éƒ¨è°ƒç”¨<code>+ (NSArray *)properties</code>æ–¹æ³•èƒ½å¤Ÿæ‰“å°å‡ºä¸€ä¸ªç±»çš„æ‰€æœ‰å±æ€§ï¼Œå¦‚ï¼š</p><pre><code>NSArray *arr = [ScottUser properties];</code></pre><p>è¿è¡Œç¨‹åºï¼Œèƒ½å¤Ÿçœ‹åˆ°æ§åˆ¶å°çš„è¾“å‡ºï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension1.png" alt="å›¾1"></p><p>ä»è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ°é€šè¿‡<code>property_getName()</code>è·å–æ¯ä¸€ä¸ª<code>objc_property_t</code>çš„<code>name</code>è¡¨ç¤ºæˆå‘˜å±æ€§çš„åå­—ï¼Œé€šè¿‡<code>property_getAttributes()</code>è·å–æ¯ä¸€ä¸ª<code>objc_property_t</code>çš„<code>attributes</code>è¡¨ç¤ºæˆå‘˜å±æ€§ä¸­çš„ä¸€äº›ç‰¹æ€§(å¦‚æ˜¯ä»€ä¹ˆç±»ï¼ŒåŸå­æ€§è¿˜æ˜¯éåŸå­æ€§ï¼Œæ˜¯strongè¿˜æ˜¯weakè¿˜æ˜¯copy,ç”Ÿæˆçš„æˆå‘˜å˜é‡åç­‰ä¿¡æ¯â€¦)</p><p>ä»è‹¹æœçš„<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html">å®˜æ–¹æ–‡æ¡£(Objective-C Runtime Programming Guide)</a>å¯ä»¥å¾—çŸ¥ï¼Œ<code>attributes</code>æ˜¯ä¸€ä¸ªç±»å‹ç¼–ç å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä»¥<code>T</code>ä½œä¸ºå¼€å§‹ï¼Œæ¥ä¸Š<code>@encode</code>ç±»å‹ç¼–ç å’Œä¸€ä¸ªé€—å·ï¼Œä»¥<code>V</code>æ¥ä¸Šå®ä¾‹å˜é‡åä½œä¸ºç»“å°¾ï¼Œåœ¨ä»–ä»¬ä¹‹é—´æ˜¯ä¸€äº›å…¶ä»–ä¿¡æ¯ï¼Œä»¥é€—å·åˆ†éš”ï¼Œå…·ä½“å†…å®¹å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ä¸­è¯¦ç»†çš„è¡¨æ ¼ã€‚</p><p>åœ¨å®é™…èµ‹å€¼è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¯¥å±æ€§çš„å†…å­˜ç®¡ç†ã€ç”Ÿæˆçš„æˆå‘˜å˜é‡åã€æˆ–è€…å…¶ä»–ä»€ä¹ˆä¿¡æ¯ï¼Œåœ¨<code>attributes</code>ä¸­ï¼Œåªéœ€è¦çŸ¥é“å®ƒæ‰€å±çš„<code>ç±»</code>æˆ–è€…çŸ¥é“ä»€ä¹ˆ<code>åŸºæœ¬æ•°æ®ç±»å‹</code>,å³<code>T</code>è‡³<code>ç¬¬ä¸€ä¸ªé€—å·ä¹‹å‰</code>ä¸­é—´çš„å†…å®¹ï¼Œå¦‚æœæ˜¯<code>ç±»</code>çš„è¯è¿˜éœ€è¦å°†<code>@</code>å’Œ<code>&quot;&quot;</code>å»æ‰ã€‚</p><p>å®é™…ä¸Šï¼Œ<code>Runtime</code>å·²ç»ç»™æˆ‘ä»¬æä¾›è·å–å±æ€§åå’Œå±æ€§ç‰¹æ€§çš„å‡½æ•°äº†ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡<code>property_getName()</code>å’Œ<code>property_getAttributes()</code>ã€‚</p><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è·å–åˆ°å±æ€§åå’Œå±æ€§å¯¹åº”çš„å±æ€§ç‰¹æ€§äº†ã€‚</p><h3 id="æ‰¾åˆ°å€¼åï¼Œæ ¹æ®å±æ€§ç±»å‹å°†å€¼è½¬åŒ–æˆæ­£ç¡®çš„ç±»å‹"><a href="#æ‰¾åˆ°å€¼åï¼Œæ ¹æ®å±æ€§ç±»å‹å°†å€¼è½¬åŒ–æˆæ­£ç¡®çš„ç±»å‹" class="headerlink" title="æ‰¾åˆ°å€¼åï¼Œæ ¹æ®å±æ€§ç±»å‹å°†å€¼è½¬åŒ–æˆæ­£ç¡®çš„ç±»å‹"></a>æ‰¾åˆ°<code>å€¼</code>åï¼Œæ ¹æ®<code>å±æ€§ç±»å‹</code>å°†<code>å€¼</code>è½¬åŒ–æˆæ­£ç¡®çš„<code>ç±»å‹</code></h3><p>ç°åœ¨å·²ç»å®Œæˆäº†ç¬¬ä¸€æ­¥ï¼Œå¹¶ä¸”æ‹¿åˆ°äº†<code>å±æ€§å</code>,ä½†æ˜¯æ•°æ®ç±»å‹è¿˜éœ€è¦æˆ‘ä»¬è¿›ä¸€æ­¥æˆªå–ï¼Œæˆªå–æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;outCount; i++) &#123;</span><br><span class="line">       objc_property_t property = properties[i];</span><br><span class="line">       <span class="comment">// ä¸ºäº†ä»¥åæ–¹ä¾¿ä½¿ç”¨ï¼Œå°†Cå­—ç¬¦ä¸²è½¬åŒ–æˆOCå¯¹è±¡</span></span><br><span class="line"><span class="comment">//    char *name = property_getName(property);</span></span><br><span class="line">    <span class="built_in">NSString</span> *name = @(property_getName(property));</span><br><span class="line"><span class="comment">//    char *att = property_getAttributes(property);</span></span><br><span class="line">    <span class="built_in">NSString</span> *att = @(property_getAttributes(property));</span><br><span class="line">       <span class="built_in">NSUInteger</span> loc = <span class="number">1</span>;</span><br><span class="line">       <span class="built_in">NSUInteger</span> len = [att rangeOfString:<span class="string">@&quot;,&quot;</span>].location - loc;</span><br><span class="line">       <span class="built_in">NSString</span> *type = [att substringWithRange:<span class="built_in">NSMakeRange</span>(loc, len)];</span><br><span class="line">       <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,type);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°ç»“æœæ˜¾ç¤ºï¼Œæˆ‘ä»¬èƒ½å¤Ÿæˆªå–åˆ°å…¶ä¸­çš„ç±»å‹äº†ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension2.png" alt="å›¾2"></p><p>å›å½’åˆ°æˆ‘ä»¬æ‹¿åˆ°è¿™äº›<code>å±æ€§ç±»å‹</code>çš„åˆè¡·ï¼Œæ˜¯ä¸ºäº†ç”¨å­—å…¸ä¸­çš„<code>å€¼çš„ç±»å‹</code>ä¸æ¨¡å‹ä¸­<code>å±æ€§çš„ç±»å‹</code>è¿›è¡Œå¯¹æ¯”ï¼Œæƒ³è¦å¯¹æ¯”ï¼Œéœ€è¦æ‹¿åˆ°<code>å±æ€§çš„ç±»å‹</code>,å› æ­¤éœ€è¦å°†è¿™äº›ç¼–ç è½¬æ¢æˆä¸€ä¸ª<strong>è¡¨ç¤ºç±»çš„ç±»</strong>ï¼Œåˆ›å»ºä¸€ä¸ªç±»ç”¨æ¥åŒ…è£…ç±»å‹ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ScottPropertyType</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">/**  æ˜¯å¦ä¸ºidç±»å‹ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">getter</span>=isIdType) <span class="type">BOOL</span> idType;</span><br><span class="line"><span class="comment">/**  æ˜¯å¦ä¸ºåŸºæœ¬æ•°æ®ç±»å‹(intã€floatç­‰) */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">getter</span>=isNumberType) <span class="type">BOOL</span> numberType;</span><br><span class="line"><span class="comment">/**  æ˜¯å¦ä¸ºboolç±»å‹ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">getter</span>=isBoolType) <span class="type">BOOL</span> boolType;</span><br><span class="line"><span class="comment">/**  å¯¹è±¡ç±»å‹(å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ­¤å€¼ä¸ºnil) */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) Class typeClass;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>OCå¯¹è±¡å¯ä»¥é€šè¿‡<code>Class</code>æ¥è¡¨ç¤ºç±»å‹ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹åªèƒ½ç”¨å¸ƒå°”æ¥æ ‡è¯†ã€‚</p><p>æŠŠè¿™äº›åå­—å’Œç±»å‹éå†å‡ºæ¥ï¼Œè‚¯å®šæ˜¯ä¸ºäº†ä»¥åæœ‰ç”¨ï¼Œæ‰€ä»¥éœ€è¦æŠŠå®ƒä»¬å­˜èµ·æ¥ï¼Œç”±äºå®ƒä»¬æ˜¯ä¸€ä¸ªâ€æ•´ä½“â€,æ‰€ä»¥è¿˜æ˜¯è®¾è®¡ä¸€ä¸ªç±»å°†ä»–ä»¬åŒ…è£…èµ·æ¥æ¯”è¾ƒå¥½ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…è£…æˆå‘˜å±æ€§çš„ç±»â€“<code>ScottProperty</code>ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@class</span> <span class="title">ScottPropertyType</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ScottProperty</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">/**  å±æ€§å */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="comment">/**  æˆå‘˜å±æ€§çš„ç±»å‹ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) ScottPropertyType *type;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œä»£ç å°±å¯ä»¥è¿›è¡Œé‡æ„äº†ï¼Œå°†å±äºä¸åŒç±»çš„åŠŸèƒ½å°è£…åˆ°å¯¹åº”çš„ç±»ä¸Šï¼Œè®©<code>ScottProperty</code>æä¾›ä¸€ä¸ªç±»æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ªå°†<code>objc_property_t</code>è¿›è¡ŒåŒ…è£…çš„ç±»ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;outCount; i++) &#123;</span><br><span class="line">       objc_property_t property = properties[i];</span><br><span class="line">       ScottProperty *propertyObj = [ScottProperty propertyWithProperty:property];</span><br><span class="line">       [propertiesArr addObject:propertyObj];</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><code>propertyWithProperty:</code>æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ScottProperty</span></span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)propertyWithProperty:(objc_property_t)property &#123;</span><br><span class="line">    <span class="keyword">return</span> [[ScottProperty alloc] initWithProperty:property];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithProperty:(objc_property_t)property &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="variable language_">super</span> init]) &#123;</span><br><span class="line">        _name = @(property_getName(property));</span><br><span class="line">        _type = [ScottPropertyType propertiesWithAttributeString:@(property_getAttributes(property))];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p><code>ScottPropertyType</code>ä¹Ÿæä¾›ç±»æ–¹æ³•ç”¨äºåŒ…è£…ç±»å‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;ScottPropertyType.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ScottPropertyType</span></span></span><br><span class="line">+ (<span class="keyword">instancetype</span>)propertiesWithAttributeString:(<span class="built_in">NSString</span> *)att &#123;</span><br><span class="line">    <span class="keyword">return</span> [[ScottPropertyType alloc] initWithTypeString:att];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithTypeString:(<span class="built_in">NSString</span> *)typeString &#123;   </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="variable language_">super</span> init]) &#123;</span><br><span class="line">        <span class="built_in">NSUInteger</span> loc = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">NSUInteger</span> len = [typeString rangeOfString:<span class="string">@&quot;,&quot;</span>].location - loc;</span><br><span class="line">        <span class="built_in">NSString</span> *typeCode = [typeString substringWithRange:<span class="built_in">NSMakeRange</span>(loc, len)];</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,typeCode);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>é‡æ„å®Œæˆä¹‹åï¼Œç»“æ„æ˜¾å¾—æ›´åŠ æ¸…æ™°ï¼Œæ›´åŠ æœ‰åˆ©äºæ¥ä¸‹æ¥çš„å·¥ä½œï¼Œä¸‹é¢ç»§ç»­å®Œæˆ<code>typeCode</code>çš„æå–ã€‚<br>è¿è¡Œé‡æ„ä¹‹åçš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å’Œé‡æ„ä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension3.png" alt="å›¾3"></p><p>ä¸Šé¢æåˆ°çš„è¿™äº›ç±»å‹ï¼Œæ˜¯ç±»å‹ç¼–ç ï¼Œåœ¨è‹¹æœæ–‡æ¡£ä¸­å‘Šè¯‰æˆ‘ä»¬ç¼–ç å¯¹åº”çš„ç±»å‹ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension4.png" alt="å›¾4"><br>æ ¹æ®è¿™ä¸ªå¯¹åº”å…³ç³»çš„å›¾è¡¨ï¼Œæˆ‘ä»¬å°†å¸¸ç”¨çš„å‡ ä¸ªç¼–ç å®šä¹‰æˆå¸¸é‡å­—ç¬¦ä¸²æˆ–è€…å®è¡¨ç¤ºå®ƒæ‰€å¯¹åº”çš„ç±»å‹ï¼Œåˆ©äºç¼–ç å’Œé˜…è¯»ï¼š<br>åœ¨<code>ScottPropertyType</code>ç±»å®šä¹‰ä»¥ä¸‹å±æ€§ç±»å‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æˆå‘˜å˜é‡ç±»å‹ï¼ˆå±æ€§ç±»å‹ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeInt = <span class="string">@&quot;i&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeShort = <span class="string">@&quot;s&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeFloat = <span class="string">@&quot;f&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeDouble = <span class="string">@&quot;d&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeLong = <span class="string">@&quot;q&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeChar = <span class="string">@&quot;c&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeBOOL1 = <span class="string">@&quot;c&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeBOOL2 = <span class="string">@&quot;b&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypePointer = <span class="string">@&quot;*&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeIvar = <span class="string">@&quot;^&#123;objc_ivar=&#125;&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeMethod = <span class="string">@&quot;^&#123;objc_method=&#125;&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeBlock = <span class="string">@&quot;@?&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeClass = <span class="string">@&quot;#&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeSEL = <span class="string">@&quot;:&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> ScottPropertyTypeId = <span class="string">@&quot;@&quot;</span>;</span><br></pre></td></tr></table></figure><p>å¹¶å†™ä¸€ä¸ªæ–¹æ³•ç”¨äºæå–æ¯ä¸ªå±æ€§çš„ç±»å‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)initWithTypeString:(<span class="built_in">NSString</span> *)typeString &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="variable language_">super</span> init]) &#123;</span><br><span class="line">        <span class="built_in">NSUInteger</span> loc = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">NSUInteger</span> len = [typeString rangeOfString:<span class="string">@&quot;,&quot;</span>].location - loc;</span><br><span class="line">        <span class="built_in">NSString</span> *typeCode = [typeString substringWithRange:<span class="built_in">NSMakeRange</span>(loc, len)];</span><br><span class="line">        [<span class="keyword">self</span> getTypeCode:typeCode];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">void</span>)getTypeCode:(<span class="built_in">NSString</span> *)code &#123;</span><br><span class="line">    <span class="keyword">if</span> ([code isEqualToString:ScottPropertyTypeId]) &#123;</span><br><span class="line">        _idType = <span class="literal">YES</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (code.length &gt; <span class="number">3</span> &amp;&amp; [code hasPrefix:<span class="string">@&quot;@\&quot;&quot;</span>])&#123;</span><br><span class="line">        <span class="comment">// å»æ‰@&quot;å’Œ&quot;ï¼Œæˆªå–ä¸­é—´çš„ç±»å‹åç§°</span></span><br><span class="line">        code = [code substringWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">2</span>, code.length - <span class="number">3</span>)];</span><br><span class="line">        _typeClass = <span class="built_in">NSClassFromString</span>(code);</span><br><span class="line">        _numberType = (_typeClass == [<span class="built_in">NSNumber</span> <span class="keyword">class</span>] || [_typeClass isSubclassOfClass:[<span class="built_in">NSNumber</span> <span class="keyword">class</span>]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ˜¯å¦ä¸ºæ•°å­—ç±»å‹</span></span><br><span class="line">    <span class="built_in">NSString</span> *lowerCode = code.lowercaseString;</span><br><span class="line">    <span class="built_in">NSArray</span> *numberTypes = @[ScottPropertyTypeInt,</span><br><span class="line">                             ScottPropertyTypeShort,</span><br><span class="line">                             ScottPropertyTypeFloat,</span><br><span class="line">                             ScottPropertyTypeDouble,</span><br><span class="line">                             ScottPropertyTypeLong,</span><br><span class="line">                             ScottPropertyTypeChar,</span><br><span class="line">                             ScottPropertyTypeBOOL1,</span><br><span class="line">                             ScottPropertyTypeBOOL2];</span><br><span class="line">    <span class="keyword">if</span> ([numberTypes containsObject:lowerCode]) &#123;</span><br><span class="line">        _numberType = <span class="literal">YES</span>;</span><br><span class="line">        <span class="keyword">if</span> ([lowerCode isEqualToString:ScottPropertyTypeBOOL1] || [lowerCode isEqualToString:ScottPropertyTypeBOOL2]) &#123;</span><br><span class="line">            _boolType = <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€ä¸ª<code>ScottProperty</code>çš„éª¨æ¶å¤§è‡´å°±æ­å¥½äº†ã€‚</p><p>åœ¨<code>NSObject+ScottProperty</code>åˆ†ç±»ä¸­éå†å±æ€§çš„æ—¶å€™ï¼Œæ‰“å°å±æ€§åå’Œå±æ€§ç±»å‹çœ‹çœ‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;outCount; i++) &#123;</span><br><span class="line">        objc_property_t property = properties[i];</span><br><span class="line">        ScottProperty *propertyObj = [ScottProperty propertyWithProperty:property];</span><br><span class="line">        [propertiesArr addObject:propertyObj];</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;name:%@--type:%@&quot;</span>,propertyObj.name,propertyObj.type.typeClass);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension5.png" alt="å›¾5"><br>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå±äºåŸºæœ¬ç±»å‹çš„å±æ€§æ‰“å°å‡ºæ¥çš„ç±»å‹æ˜¯<code>null</code>ï¼Œå…¶ä»–çš„éƒ½èƒ½æ­£ç¡®æ‰“å°å‡ºå¯¹åº”ç±»å‹ã€‚</p><p>å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨å­—å…¸è½¬æ¨¡å‹åŠŸèƒ½çš„æ—¶å€™ï¼Œæä¾›ä¸€ä¸ªç±»æ–¹æ³•æ–¹ä¾¿è½¬æ¢ï¼Œè¯¥æ–¹æ³•æ”¾åœ¨<code>NSObject+ScottKeyValue</code>åˆ†ç±»ä¸­ï¼Œè¯¥åˆ†ç±»è´Ÿè´£å­—å…¸è½¬æ¨¡å‹çš„æ–¹æ³•å®ç°ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">instancetype</span>)objectWithKeyValues:(<span class="type">id</span>)keyValues &#123;</span><br><span class="line">    <span class="keyword">if</span> (!keyValues) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">return</span> [[[<span class="keyword">self</span> alloc] init] setKeyValues:keyValues];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">instancetype</span>)setKeyValues:(<span class="type">id</span>)keyValues &#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *propertiesArray = [<span class="keyword">self</span>.class properties];</span><br><span class="line">    <span class="keyword">for</span> (ScottProperty *property <span class="keyword">in</span> propertiesArray) &#123;</span><br><span class="line">        ScottPropertyType *type = property.type;</span><br><span class="line">        Class typeClass = type.typeClass;</span><br><span class="line">        <span class="keyword">if</span> (type.isBoolType) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;Bool&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (type.isIdType)&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;ID&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (type.isNumberType)&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;Number&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,typeClass);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³è¦å­—å…¸è½¬æ¨¡å‹çš„æ—¶å€™ï¼Œç›´æ¥å¦‚ä¸‹ä½¿ç”¨ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;<span class="string">@&quot;name&quot;</span>:<span class="string">@&quot;Scott&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;icon&quot;</span> : <span class="string">@&quot;lufy.png&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;age&quot;</span> : <span class="string">@&quot;20&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;height&quot;</span> : @<span class="number">1.75</span>,</span><br><span class="line">                          <span class="string">@&quot;money&quot;</span> : <span class="string">@&quot;100.9&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;sex&quot;</span> : @(SexMale),</span><br><span class="line">                          <span class="string">@&quot;gay&quot;</span> : <span class="string">@&quot;ture&quot;</span>,</span><br><span class="line">                          &#125;;</span><br><span class="line">   ScottUser *userModel = [ScottUser objectWithKeyValues:dict];</span><br></pre></td></tr></table></figure><p>ok,è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡º<code>ScottUser</code>ç±»ä¸­å„å±æ€§å¯¹åº”çš„ç±»å‹ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension6.png" alt="å›¾6"></p><p>æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€æ­¥ï¼š<strong>ç”¨è¯¥å±æ€§åä½œä¸ºé”®å»å­—å…¸ä¸­å¯»æ‰¾å¯¹åº”çš„å€¼</strong></p><p>ä¼ªä»£ç ï¼š</p><pre><code>[å­—å…¸ valueForKey:å±æ€§å];</code></pre><p>æ­¤å¤„çš„å±æ€§åä¼šæœ‰ç‚¹é—®é¢˜ï¼Œä¾‹å¦‚æˆ‘ä»¬å®šä¹‰å±æ€§åçš„æ—¶å€™ä¸èƒ½æ˜¯å…³é”®å­—ï¼Œè€Œå¦‚æœå­—å…¸ä¸­çš„<code>key</code>æ˜¯æ¶‰åŠåˆ°å…³é”®å­—çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è½¬æ¢ï¼Œä½†æ˜¯ä¹Ÿå¹¶éæ‰€æœ‰çš„éƒ½æœ‰è¿™ç§æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä½¿ç”¨ä»£ç†ã€‚æˆ‘ä»¬åœ¨<code>NSObject+ScottKeyValue</code>åˆ†ç±»ä¸­å†™ä¸€ä¸ª<code>ScottKeyValue</code>åè®®ï¼Œå¹¶ä¸”è®©å®ƒéµå®ˆè¯¥åè®®:</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">ScottKeyValue</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">+ (<span class="built_in">NSDictionary</span> *)replacedKeyFromPropertyName;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æä¾›ä¸€ä¸ªç±»æ–¹æ³•ï¼Œç”¨äºå¤„ç†å°†å±æ€§åä¸å­—å…¸ä¸­çš„<code>key</code>è¾¾åˆ°ä¸€è‡´ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSString</span> *)propertyKey:(<span class="built_in">NSString</span> *)propertyName &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *key;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> respondsToSelector:<span class="keyword">@selector</span>(replacedKeyFromPropertyName)]) &#123;</span><br><span class="line">        key = [<span class="keyword">self</span> replacedKeyFromPropertyName][propertyName];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> key ? key : propertyName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// å±æ€§åä½œä¸ºé”®å»å¯»æ‰¾å¯¹åº”çš„å€¼</span></span><br><span class="line">   <span class="type">id</span> value = [keyValues valueForKey:[<span class="keyword">self</span>.class propertyKey:property.name]];</span><br><span class="line">   <span class="keyword">if</span> (!value) <span class="keyword">continue</span>;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,value);</span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»èƒ½å¤Ÿæ‹¿åˆ°å€¼äº†ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension7.png" alt="å›¾7"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‹¿åˆ°å€¼åå°†å€¼çš„ç±»å‹è½¬æ¢ä¸ºå±æ€§å¯¹åº”çš„æ•°æ®ç±»å‹ã€‚</p><p>é¦–å…ˆéœ€è¦å¤„ç†æ•°å­—ç±»å‹ï¼Œå¦‚æœæ¨¡å‹çš„å±æ€§æ˜¯æ•°å­—ç±»å‹ï¼Œå³<code>type.isNumberType == YES</code>,å¦‚æœå­—å…¸ä¸­çš„å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œéœ€è¦å°†å…¶è½¬æˆNSNumberç±»å‹ï¼Œå¦‚æœæœ¬æ¥å°±æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™ä¸ç”¨è¿›è¡Œä»»ä½•è½¬æ¢ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (type.isNumberType == <span class="literal">YES</span>) &#123;</span><br><span class="line">      <span class="comment">// å­—ç¬¦ä¸²--&gt;æ•°å­—</span></span><br><span class="line">      <span class="keyword">if</span> ([value isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">          value = [[[<span class="built_in">NSNumberFormatter</span> alloc] init] numberFromString:value];</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸€ç§æƒ…å†µï¼Œæ˜¯éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†çš„ï¼Œå½“æ¨¡å‹çš„å±æ€§æ˜¯<code>char</code>ç±»å‹æˆ–è€…<code>bool</code>ç±»å‹æ—¶ï¼Œè·å–åˆ°çš„ç¼–ç éƒ½æ˜¯<code>c</code>,å¹¶ä¸”<code>bool</code>è¿˜æœ‰å¯èƒ½æ˜¯<code>B</code>ç¼–ç ï¼Œå®ƒä»¬éƒ½å¯¹åº”<code>_boolType</code>ï¼Œå› ä¸ºæ•°å­—ç±»å‹åŒ…å«å¸ƒå°”ç±»å‹ï¼Œæ‰€ä»¥<code>bool</code>ç±»å‹è¦åœ¨æ•°å­—ç±»å‹çš„æ¡ä»¶ä¸‹è¿›è¡Œé¢å¤–åˆ¤æ–­ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (type.isNumberType == <span class="literal">YES</span>) &#123;</span><br><span class="line">       <span class="built_in">NSString</span> *oldValue = value;</span><br><span class="line">       <span class="comment">// å­—ç¬¦ä¸²--&gt;æ•°å­—</span></span><br><span class="line">       <span class="keyword">if</span> ([value isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">           value = [[[<span class="built_in">NSNumberFormatter</span> alloc] init] numberFromString:value];</span><br><span class="line">           <span class="keyword">if</span> (type.isBoolType) &#123;</span><br><span class="line">               <span class="built_in">NSString</span> *lower = [oldValue lowercaseString];</span><br><span class="line">               <span class="keyword">if</span> ([lower isEqualToString:<span class="string">@&quot;yes&quot;</span>] || [lower isEqualToString:<span class="string">@&quot;ture&quot;</span>]) &#123;</span><br><span class="line">                   value = @YES;</span><br><span class="line">               &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([lower isEqualToString:<span class="string">@&quot;no&quot;</span>] || [lower isEqualToString:<span class="string">@&quot;false&quot;</span>])&#123;</span><br><span class="line">                   value = @NO;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//  ç„¶åå¤„ç†å…¶ä»–ç±»å‹è½¬åŒ–æˆå­—ç¬¦ä¸²ç±»å‹çš„æƒ…å†µï¼š</span></span><br><span class="line">         <span class="keyword">if</span> (typeClass == [<span class="built_in">NSString</span> <span class="keyword">class</span>]) &#123;</span><br><span class="line">             <span class="keyword">if</span> ([value isKindOfClass:[<span class="built_in">NSNumber</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">                 <span class="keyword">if</span> (type.isNumberType)</span><br><span class="line">                     <span class="comment">// NSNumber -&gt; NSString</span></span><br><span class="line">                     value = [value description];</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([value isKindOfClass:[<span class="built_in">NSURL</span> <span class="keyword">class</span>]])&#123;</span><br><span class="line">                 <span class="comment">// NSURL -&gt; NSString</span></span><br><span class="line">                 value = [value absoluteString];</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  <span class="comment">// æœ€åèµ‹å€¼      </span></span><br><span class="line">     [<span class="keyword">self</span> setValue:value forKey:property.name];</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬è°ƒç”¨å¹¶æ‰“å°</p><pre><code>ScottUser *userModel = [ScottUser objectWithKeyValues:dict];    NSLog(@&quot;name:%@,icon:%@,age:%d,height:%@,money:%@,sex:%ld,gay:%d&quot;,userModel.name,userModel.icon,userModel.age,userModel.height,userModel.money,(long)userModel.sex,userModel.gay);</code></pre><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension8.png" alt="å›¾8"></p><p>åˆ°è¿™é‡Œæœ€ç®€å•çš„å­—å…¸è½¬æ¨¡å‹å¤§è‡´å®Œæˆäº†ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šçš„ç»†èŠ‚æ²¡æœ‰å®Œå–„ï¼Œåé¢å†åšå¤„ç†ã€‚</p><h2 id="JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹"><a href="#JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹" class="headerlink" title="JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹"></a>JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹</h2><p>å®šä¹‰ä¸€ä¸ª<code>json</code>å­—ç¬¦ä¸²è½¬æˆæ¨¡å‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹</span></span><br><span class="line"><span class="type">void</span> keyValues2object1()&#123;</span><br><span class="line">    <span class="comment">// 1.å®šä¹‰ä¸€ä¸ªjsonå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">NSString</span> *jsonString = <span class="string">@&quot;&#123;\&quot;name\&quot;:\&quot;scott\&quot;,\&quot;icon\&quot;:\&quot;lufy.png\&quot;,\&quot;age\&quot;:20&#125;&quot;</span>;</span><br><span class="line">    <span class="comment">// 2.å°†jsonå­—ç¬¦ä¸²è½¬ä¸ºLZUseræ¨¡å‹</span></span><br><span class="line">    ScottUser *user = [ScottUser objectWithKeyValues:jsonString];</span><br><span class="line">    <span class="comment">// 3.æ‰“å°æ¨¡å‹å±æ€§</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;name=%@, icon=%@, age=%d&quot;</span>,user.name,user.icon,user.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œè¿™æ—¶ç¨‹åºä¼šåä¸½ä¸½çš„å´©æºƒï¼Œå› ä¸ºç¨‹åºåŸæ¥åªå¯¹å­—å…¸ç±»å‹ä½œäº†å¤„ç†ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥å®šä½åˆ°ç¨‹åºå´©æºƒåœ¨è¿™é‡Œ</span></span><br><span class="line"><span class="type">id</span> value = [keyValues valueForKey:[<span class="keyword">self</span>.class propertyKey:property.name]];</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åœ¨è¿™ä¹‹å‰éœ€è¦å°†<code>JSON</code>è½¬æˆ<code>Foundation</code>æ¡†æ¶ä¸­çš„å¯¹è±¡ï¼Œè‹¹æœæä¾›äº†å¼ºå¤§çš„<code>NSJSONSerialization</code>ï¼Œåˆ©ç”¨å®ƒï¼Œåœ¨åˆšå¼€å§‹ä¼ å…¥å­—å…¸&#x2F;<code>JSON</code>å­—ç¬¦ä¸²çš„æ—¶å€™å°†å…¶è¿›è¡Œè½¬æ¢ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)setKeyValues:(<span class="type">id</span>)keyValues &#123; </span><br><span class="line">    keyValues = [keyValues JSONObject]; </span><br><span class="line">    <span class="built_in">NSArray</span> *propertiesArray = [<span class="keyword">self</span>.class properties];</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•çš„å®ç°å¦‚ä¸‹ï¼Œå¦‚æœå½“å‰æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è½¬æ¢æˆ<code>NSData</code>å†è¿›è¡Œåºåˆ—åŒ–ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">id</span>)JSONObject &#123;</span><br><span class="line">    <span class="type">id</span> foundationObj;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *str = (<span class="built_in">NSString</span> *)<span class="keyword">self</span>;</span><br><span class="line">        foundationObj = [<span class="built_in">NSJSONSerialization</span>  JSONObjectWithData:[str dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>] options:kNilOptions error:<span class="literal">nil</span>];</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([<span class="keyword">self</span> isKindOfClass:[<span class="built_in">NSData</span> <span class="keyword">class</span>]])&#123;</span><br><span class="line">        foundationObj = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:(<span class="built_in">NSData</span> *)<span class="keyword">self</span> options:kNilOptions error:<span class="literal">nil</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœfoundationObjæœ‰å€¼ï¼Œåˆ™è¿”å›foundationObjï¼Œå¦åˆ™è¿”å›self</span></span><br><span class="line">    <span class="keyword">return</span> foundationObj ? : <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œè¿è¡Œç¨‹åºï¼ŒOKï¼Œèƒ½å¤Ÿçœ‹åˆ°æ§åˆ¶å°èƒ½æ­£ç¡®è¾“å…¥ç»“æœï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension9.png" alt="å›¾9"></p><h2 id="å¤æ‚å­—å…¸è½¬æ¨¡å‹"><a href="#å¤æ‚å­—å…¸è½¬æ¨¡å‹" class="headerlink" title="å¤æ‚å­—å…¸è½¬æ¨¡å‹"></a>å¤æ‚å­—å…¸è½¬æ¨¡å‹</h2><p>å®šä¹‰ä¸€ä¸ªæ¨¡å‹ä¸­åŒ…å«æ¨¡å‹çš„å¤æ‚å­—å…¸ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;<span class="string">@&quot;text&quot;</span>:<span class="string">@&quot;æ˜¯å•Šï¼Œä»Šå¤©å¤©æ°”ç¡®å®ä¸é”™ï¼&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;user&quot;</span>:@&#123;</span><br><span class="line">                                  <span class="string">@&quot;name&quot;</span>:<span class="string">@&quot;scott&quot;</span>,</span><br><span class="line">                                  <span class="string">@&quot;icon&quot;</span>:<span class="string">@&quot;lufy.png&quot;</span></span><br><span class="line">                                  &#125;,</span><br><span class="line">                          <span class="string">@&quot;retweetedStatus&quot;</span>:@&#123;</span><br><span class="line">                                  <span class="string">@&quot;text&quot;</span>:<span class="string">@&quot;æ˜¯å•Šï¼Œä»Šå¤©å¤©æ°”ç¡®å®ä¸é”™&quot;</span>,</span><br><span class="line">                                  <span class="string">@&quot;user&quot;</span>:@&#123;</span><br><span class="line">                                          <span class="string">@&quot;name&quot;</span>:<span class="string">@&quot;scott_status&quot;</span>,</span><br><span class="line">                                          <span class="string">@&quot;icon&quot;</span>:<span class="string">@&quot;lufy_status.png&quot;</span></span><br><span class="line">                                          &#125;</span><br><span class="line">                                  &#125;</span><br><span class="line">                          &#125;;</span><br></pre></td></tr></table></figure><p>å¯¹å¾…è¿™ç§å­—å…¸çš„æ€è·¯ï¼Œåº”è¯¥æƒ³åˆ°é€’å½’ï¼Œå½“ç¢°åˆ°æ¨¡å‹ä¸­çš„å±æ€§ç±»å‹æ˜¯ä¸€ä¸ªæ¨¡å‹ç±»æ—¶ï¼Œå°†å­—å…¸ä¸­çš„<code>value</code>ä½œä¸ºå­—å…¸å¤„ç†ï¼Œç„¶åå†è°ƒç”¨å­—å…¸è½¬æ¨¡å‹çš„æ–¹æ³•è¿”å›ä¸€ä¸ªæ¨¡å‹ç±»ï¼Œæ‰€ä»¥åœ¨åŒ…è£…ç±»å‹æ—¶è¿˜è¦æœ‰ä¸ªå±æ€§è¡¨ç¤ºå®ƒæ˜¯å¦æ˜¯è‡ªå®šä¹‰çš„æ¨¡å‹ç±»ï¼Œæ‰èƒ½ä½œä¸ºä¾æ®ç»§ç»­é€’å½’ï¼Œåˆ¤æ–­çš„æ–¹æ³•æ˜¯çœ‹å®ƒæ˜¯å¦æ¥è‡ªäº<code>Foundationæ¡†æ¶</code>çš„ç±»ã€‚<br>åœ¨<code>ScottPropertyType</code>ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§:</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  æ˜¯å¦æ¥æºäºFoundationæ¡†æ¶ï¼Œæ¯”å¦‚NSString,NSArrayç­‰ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">getter</span>=isFromFoundation) <span class="type">BOOL</span> fromFoundation;</span><br></pre></td></tr></table></figure><p>åœ¨<code>- (void)getTypeCode:(NSString *)code</code>æ–¹æ³•ä¸­æ·»åŠ è¿™æ ·ä¸€æ¡:</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (code.length &gt; <span class="number">3</span> &amp;&amp; [code hasPrefix:<span class="string">@&quot;@\&quot;&quot;</span>])&#123;</span><br><span class="line">       <span class="comment">// å»æ‰@&quot;å’Œ&quot;ï¼Œæˆªå–ä¸­é—´çš„ç±»å‹åç§°</span></span><br><span class="line">       code = [code substringWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">2</span>, code.length - <span class="number">3</span>)];</span><br><span class="line">       _typeClass = <span class="built_in">NSClassFromString</span>(code);</span><br><span class="line">       _numberType = (_typeClass == [<span class="built_in">NSNumber</span> <span class="keyword">class</span>] || [_typeClass isSubclassOfClass:[<span class="built_in">NSNumber</span> <span class="keyword">class</span>]]);</span><br><span class="line">       <span class="comment">// åˆ¤æ–­æ˜¯å¦æ¥è‡ªäºfoundationæ¡†æ¶</span></span><br><span class="line">       _fromFoundation = [<span class="built_in">NSObject</span> isClassFromFoundation:_typeClass];</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>NSObject+ScottProperty</code>åˆ†ç±»ä¸­æ·»åŠ ä¸€ä¸ªç±»æ–¹æ³•ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨äºåˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ¥è‡ªäºfoundationæ¡†æ¶</span></span><br><span class="line">+ (<span class="type">BOOL</span>)isClassFromFoundation:(Class)c;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœåˆ¤æ–­æ˜¯å¦æ¥è‡ªäº<code>Foundationæ¡†æ¶</code>å‘¢ï¼Ÿ ä¸‹å›¾å±•ç¤ºäº†<code>Foundationæ¡†æ¶(NSObjectéƒ¨åˆ†)</code>ä¸‹çš„ç±»ç»“æ„:<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension10.png" alt="å›¾10"></p><p>ç”¨ä¸€ä¸ª<code>NSSet</code>(æ¯”ç”¨<code>NSArray</code>æ£€ç´¢æ•ˆç‡æ›´é«˜)ï¼Œè¿”å›ä¸€äº›å¸¸ç”¨åŸºæœ¬çš„<code>Foundationæ¡†æ¶</code>ä¸‹ç»§æ‰¿è‡ª<code>NSObject</code>çš„ç±»ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">NSSet</span> *foundationClasses_;</span><br><span class="line">+ (<span class="built_in">NSSet</span> *)foundationClass &#123;</span><br><span class="line">    <span class="keyword">if</span> (foundationClasses_ == <span class="literal">nil</span>) &#123;</span><br><span class="line">        foundationClasses_ = [<span class="built_in">NSSet</span> setWithObjects:[<span class="built_in">NSURL</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSDate</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSValue</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSData</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSArray</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSDictionary</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSString</span> <span class="keyword">class</span>],</span><br><span class="line">                              [<span class="built_in">NSMutableString</span> <span class="keyword">class</span>], <span class="literal">nil</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> foundationClasses_;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åˆ¤æ–­æ˜¯å¦æ˜¯<code>foundationæ¡†æ¶</code>çš„ç±»æ–¹æ³•å…·ä½“å®ç°ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="type">BOOL</span>)isClassFromFoundation:(Class)c &#123;</span><br><span class="line">    <span class="comment">// å› ä¸ºfoundationClasses_é‡Œé¢çš„ç±»éƒ½æ˜¯ç»§æ‰¿NSObjectï¼Œå› æ­¤NSObjectä¸èƒ½æ”¾åˆ°ä¸Šé¢çš„é›†åˆï¼Œéœ€è¦é¢å¤–åšåˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (c == [<span class="built_in">NSObject</span> <span class="keyword">class</span>]) <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    __block <span class="type">BOOL</span> result = <span class="literal">NO</span>;</span><br><span class="line">    [[<span class="keyword">self</span> foundationClass] enumerateObjectsUsingBlock:^(Class foundationClass, <span class="type">BOOL</span> *stop) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([c isSubclassOfClass:foundationClass]) &#123;</span><br><span class="line">            result = <span class="literal">YES</span>;</span><br><span class="line">            *stop = <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°ç»“æœåï¼Œéœ€è¦åœ¨<code>NSObject+ScottKeyValue</code>åˆ†ç±»ä¸­çš„<code>setKeyValues:</code>æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœä¸æ˜¯æ¥è‡ªfoundationæ¡†æ¶çš„ç±»å¹¶ä¸”ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ ,åˆ™é€’å½’,å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒtypeClassä¸ºnil</span></span><br><span class="line"><span class="keyword">if</span> (!type.isFromFoundation &amp;&amp; typeClass) &#123;</span><br><span class="line">    value = [typeClass objectWithKeyValues:value];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œå¤æ‚å­—å…¸è½¬æ¨¡å‹å°±ç®—æ˜¯å®Œæˆäº†ï¼Œå…·ä½“è°ƒç”¨çš„è¿‡ç¨‹çœ‹æºç <strong>æ–‡ç« ç»“å°¾ä¼šç»™åœ°å€</strong>ã€‚</p><h2 id="å­—å…¸æ•°ç»„è½¬æ¨¡å‹"><a href="#å­—å…¸æ•°ç»„è½¬æ¨¡å‹" class="headerlink" title="å­—å…¸æ•°ç»„è½¬æ¨¡å‹"></a>å­—å…¸æ•°ç»„è½¬æ¨¡å‹</h2><p>ç¨å¾®å¤æ‚çš„ä¸€ç§æƒ…å†µæ˜¯ä¸€ä¸ªå­—å…¸é‡Œé¢å¸¦æœ‰æ•°ç»„ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">                          <span class="string">@&quot;statuses&quot;</span> : @[</span><br><span class="line">                                  @&#123;</span><br><span class="line">                                      <span class="string">@&quot;text&quot;</span> : <span class="string">@&quot;ä»Šå¤©å¤©æ°”çœŸä¸é”™ï¼&quot;</span>,</span><br><span class="line">                                      <span class="string">@&quot;user&quot;</span> : @&#123;</span><br><span class="line">                                              <span class="string">@&quot;name&quot;</span> : <span class="string">@&quot;Rose&quot;</span>,</span><br><span class="line">                                              <span class="string">@&quot;icon&quot;</span> : <span class="string">@&quot;nami.png&quot;</span></span><br><span class="line">                                              &#125;</span><br><span class="line">                                      &#125;,</span><br><span class="line">                                  @&#123;</span><br><span class="line">                                      <span class="string">@&quot;text&quot;</span> : <span class="string">@&quot;æ˜å¤©å»æ—…æ¸¸äº†&quot;</span>,</span><br><span class="line">                                      <span class="string">@&quot;user&quot;</span> : @&#123;</span><br><span class="line">                                              <span class="string">@&quot;name&quot;</span> : <span class="string">@&quot;Jack&quot;</span>,</span><br><span class="line">                                              <span class="string">@&quot;icon&quot;</span> : <span class="string">@&quot;lufy.png&quot;</span></span><br><span class="line">                                              &#125;</span><br><span class="line">                                      &#125;</span><br><span class="line">                                  ],</span><br><span class="line">                          <span class="string">@&quot;ads&quot;</span> : @[</span><br><span class="line">                                  @&#123;</span><br><span class="line">                                      <span class="string">@&quot;image&quot;</span> : <span class="string">@&quot;ad01.png&quot;</span>,</span><br><span class="line">                                      <span class="string">@&quot;url&quot;</span> : <span class="string">@&quot;http://www.baidu.com&quot;</span></span><br><span class="line">                                      &#125;,</span><br><span class="line">                                  @&#123;</span><br><span class="line">                                      <span class="string">@&quot;image&quot;</span> : <span class="string">@&quot;ad02.png&quot;</span>,</span><br><span class="line">                                      <span class="string">@&quot;url&quot;</span> : <span class="string">@&quot;http://www.sina.com&quot;</span></span><br><span class="line">                                      &#125;</span><br><span class="line">                                  ],</span><br><span class="line">                          <span class="string">@&quot;totalNumber&quot;</span> : <span class="string">@&quot;2014&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;previousCursor&quot;</span> : <span class="string">@&quot;13476589&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;nextCursor&quot;</span> : <span class="string">@&quot;13476599&quot;</span></span><br><span class="line">                          &#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå­—å…¸ï¼Œåˆ›å»ºä¸€ä¸ª<code>ScottStatusResult</code>æ¨¡å‹ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªæ•°ç»„ï¼Œå¦å¤–è¿˜æœ‰å…¶ä»–3ä¸ªé”®ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ScottStatusResult</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">/** å­˜æ”¾ç€æŸä¸€é¡µå¾®åšæ•°æ®ï¼ˆé‡Œé¢éƒ½æ˜¯Statusæ¨¡å‹ï¼‰ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span> *statuses;</span><br><span class="line"><span class="comment">/** å­˜æ”¾ç€ä¸€å †çš„å¹¿å‘Šæ•°æ®ï¼ˆé‡Œé¢éƒ½æ˜¯Adæ¨¡å‹ï¼‰ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *ads;</span><br><span class="line"><span class="comment">/** æ€»æ•° */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSNumber</span> *totalNumber;</span><br><span class="line"><span class="comment">/** ä¸Šä¸€é¡µçš„æ¸¸æ ‡ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="type">long</span> <span class="type">long</span> previousCursor;</span><br><span class="line"><span class="comment">/** ä¸‹ä¸€é¡µçš„æ¸¸æ ‡ */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="type">long</span> <span class="type">long</span> nextCursor;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸€ä¸ªæ•°ç»„æ¥è¯´ï¼Œä½ å¿…é¡»è¦å‘Šè¯‰æ–¹æ³•é‡Œé¢è£…çš„æ˜¯ä»€ä¹ˆæ¨¡å‹ï¼Œæ‰èƒ½å°†å­—å…¸ä¸­å€¼ä¸ºæ•°ç»„çš„æˆå‘˜è½¬æˆæ¨¡å‹ã€‚<br>åœ¨<code>MJExtension</code>ä¸­ï¼Œæä¾›äº†ä¸¤ç§æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</p><ul><li><p>æ–¹å¼ä¸€ï¼šè°ƒç”¨<code>NSObject</code>åˆ†ç±»ä¸­çš„ç±»æ–¹æ³•ï¼š</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ScottStatusResult setupObjectClassInArray:^<span class="built_in">NSDictionary</span> *&#123;</span><br><span class="line"> <span class="keyword">return</span> @&#123; <span class="string">@&quot;statuses&quot;</span> : <span class="string">@&quot;ScottStatus&quot;</span>,</span><br><span class="line">  <span class="comment">// æˆ–è€… @&quot;statuses&quot; : [ScottStatus class],</span></span><br><span class="line">           <span class="string">@&quot;ads&quot;</span> : <span class="string">@&quot;ScottAd&quot;</span></span><br><span class="line">  <span class="comment">// æˆ–è€… @&quot;ads&quot; : [ScottAd class]</span></span><br><span class="line">               &#125;;</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure></li><li><p>æ–¹å¼äºŒï¼šåœ¨æ¨¡å‹çš„.mæ–‡ä»¶ä¸­å®ç°æ–¹æ³•ä¾›å›è°ƒï¼š</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSDictionary</span> *)objectClassInArray</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> @&#123;</span><br><span class="line">             <span class="string">@&quot;statuses&quot;</span> : <span class="string">@&quot;ScottStatus&quot;</span>,</span><br><span class="line">              <span class="comment">// æˆ–è€… @&quot;statuses&quot; : [ScottStatus class],</span></span><br><span class="line">             <span class="string">@&quot;ads&quot;</span> : <span class="string">@&quot;ScottAd&quot;</span></span><br><span class="line">             <span class="comment">// æˆ–è€… @&quot;ads&quot; : [ScottAd class]</span></span><br><span class="line">             &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>åŸç†ä¸Šéƒ½å·®ä¸å¤šï¼Œéƒ½æ˜¯é€šè¿‡ä»£ç è¿›è¡Œå›è°ƒï¼Œè¿™ä¸ªä¸»è¦å®ç°æ–¹å¼äºŒã€‚<br>åœ¨<code>NSObject+ScottKeyValue</code>åˆ†ç±»ä¸­çš„<code>ScottKeyValue</code>åè®®ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSDictionary</span> *)objectClassInArray;</span><br></pre></td></tr></table></figure><p>åœ¨<code>NSObject+ScottKeyValue</code>åˆ†ç±»ä¸­çš„<code>setKeyValues:</code>æ–¹æ³•ä¸­æ·»åŠ ä¸€ç§ç±»å‹åˆ¤æ–­</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœä¸æ˜¯æ¥è‡ªfoundationæ¡†æ¶çš„ç±»å¹¶ä¸”ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ ,åˆ™é€’å½’,å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒtypeClassä¸ºnil</span></span><br><span class="line">      <span class="keyword">if</span> (!type.isFromFoundation &amp;&amp; typeClass) &#123;</span><br><span class="line">          value = [typeClass objectWithKeyValues:value];</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([<span class="keyword">self</span>.class respondsToSelector:<span class="keyword">@selector</span>(objectClassInArray)])&#123; <span class="comment">// çœ‹è¯¥ç±»æ˜¯å¦å®ç°äº†objectClassInArrayæ–¹æ³•</span></span><br><span class="line">          <span class="type">id</span> objectClass;</span><br><span class="line">          objectClass = [<span class="keyword">self</span>.class objectClassInArray][property.name];</span><br><span class="line">         <span class="comment">// å¦‚æœæ˜¯NSStringç±»å‹</span></span><br><span class="line">         <span class="keyword">if</span> ([objectClass isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">             objectClass = <span class="built_in">NSClassFromString</span>(objectClass);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (objectClass) &#123;</span><br><span class="line">             <span class="comment">// è¿”å›ä¸€ä¸ªè£…äº†æ¨¡å‹çš„æ•°ç»„</span></span><br><span class="line">             value = [objectClass objectArrayWithKeyValuesArray:value];</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><p>è¿”å›ä¸€ä¸ªè£…äº†æ¨¡å‹çš„æ•°ç»„æ–¹æ³•å®ç°ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ ¹æ®å­—å…¸/JSONè¿”å›æ¨¡å‹æ•°ç»„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param keyValuesArray å­—å…¸/JSONæ•°ç»„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @return æ¨¡å‹æ•°ç»„</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="built_in">NSMutableArray</span> *)objectArrayWithKeyValuesArray:(<span class="type">id</span>)keyValuesArray</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> isClassFromFoundation:<span class="keyword">self</span>])</span><br><span class="line">        <span class="keyword">return</span> keyValuesArray;</span><br><span class="line">    keyValuesArray = [keyValuesArray JSONObject];</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *modelArray = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">    <span class="comment">// éå†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSDictionary</span> *keyValues <span class="keyword">in</span> keyValuesArray) &#123;</span><br><span class="line">        <span class="type">id</span> model;</span><br><span class="line">        model = [<span class="keyword">self</span> objectWithKeyValues:keyValues];</span><br><span class="line">        <span class="keyword">if</span> (model) &#123;</span><br><span class="line">            [modelArray addObject:model];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">return</span> modelArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œå­—å…¸æ•°ç»„è½¬æ¨¡å‹å°±ç®—æ˜¯å®Œæˆäº†ï¼Œå…·ä½“è°ƒç”¨çš„è¿‡ç¨‹çœ‹æºç <strong>æ–‡ç« ç»“å°¾ä¼šç»™åœ°å€</strong>ã€‚</p><h2 id="keyçš„æ›¿æ¢"><a href="#keyçš„æ›¿æ¢" class="headerlink" title="keyçš„æ›¿æ¢"></a>keyçš„æ›¿æ¢</h2><p>åœ¨å®é™…å¼€å‘ä¸­ï¼ŒæœåŠ¡å™¨é€šå¸¸è¿”å›ä¸€ä¸ªå­—æ®µå<code>id</code>,æˆ–è€…<code>description</code>çš„<code>JSON</code>æ•°æ®,è€Œè¿™ä¸¤ä¸ªåå­—åœ¨<code>OC</code>ä¸­æœ‰ç‰¹æ®Šå«ä¹‰,åœ¨å®šä¹‰å±æ€§çš„æ—¶å€™å¹¶ä¸èƒ½ä½¿ç”¨è¿™ç±»åç§°.è¿™æ—¶å±æ€§åä¸å­—å…¸<code>key</code>ä¸å†æ˜¯ç›´æ¥å¯¹åº”çš„å…³ç³»,éœ€è¦åŠ å…¥ä¸€å±‚è½¬æ¢ã€‚<br>è¿™ä¸ªåœ¨å‰é¢<strong>ç”¨è¯¥å±æ€§åä½œä¸ºé”®å»å­—å…¸ä¸­å¯»æ‰¾å¯¹åº”çš„å€¼</strong>è®²åˆ°è¿‡ï¼Œåœ¨æ¬¡å°±ä¸å†é‡å¤è®²è§£ã€‚</p><h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><p>å°†5ä¸ªå­—å…¸è½¬æ¨¡å‹çš„ä¾‹å­åŒæ—¶è¿è¡Œï¼Œåœ¨<code>NSObject+ScottProperty</code>åˆ†ç±»ä¸­çš„<code>+ (NSArray *)properties</code>æ–¹æ³•ä¸­æ·»åŠ ä¸€å¥æ‰“å°<code>NSLog(@&quot;%@è°ƒç”¨äº†propertiesæ–¹æ³•&quot;,[self class]);</code>ã€‚å¦å¤–ï¼Œä¹‹å‰çš„ä¾‹å­éƒ½æ˜¯æœ‰å†…å­˜æ³„éœ²çš„ï¼Œè¿™é‡Œæ·»åŠ äº†<code>free(properties);</code>ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSArray</span> *)properties &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@è°ƒç”¨äº†propertiesæ–¹æ³•&quot;</span>,[<span class="keyword">self</span> <span class="keyword">class</span>]);</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *propertiesArr = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> outCount = <span class="number">0</span>;</span><br><span class="line">    objc_property_t *properties = class_copyPropertyList(<span class="keyword">self</span>, &amp;outCount);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;outCount; i++) &#123;</span><br><span class="line">        objc_property_t property = properties[i];</span><br><span class="line">        ScottProperty *propertyObj = [ScottProperty propertyWithProperty:property];</span><br><span class="line">        [propertiesArr addObject:propertyObj];</span><br><span class="line">    &#125;</span><br><span class="line">    free(properties);</span><br><span class="line">    <span class="keyword">return</span> propertiesArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension11.png" alt="å›¾11"><br>å¯ä»¥çœ‹åˆ°,å¾ˆå¤šçš„ç±»éƒ½ä¸æ­¢ä¸€æ¬¡è°ƒç”¨äº†è·å–å±æ€§çš„æ–¹æ³•,å¯¹äºä¸€ä¸ªç±»æ¥è¯´,è¦è·å–å®ƒçš„å…¨éƒ¨å±æ€§,åªè¦è·å–ä¸€æ¬¡å°±å¤Ÿäº†.è·å–åˆ°åå°†ç»“æœç¼“å­˜èµ·æ¥,ä¸‹æ¬¡å°±ä¸å¿…è¿›è¡Œä¸å¿…è¦çš„è®¡ç®—ã€‚<br>ä¸‹é¢è¿›è¡Œä¼˜åŒ–ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ä¸€ä¸ªå…¨å±€å­—å…¸ç”¨æ¥å°†ç±»çš„å±æ€§éƒ½ç¼“å­˜èµ·æ¥</span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSMutableDictionary</span> *cachedProperties_;</span><br><span class="line">+ (<span class="type">void</span>)load</span><br><span class="line">&#123;</span><br><span class="line">    cachedProperties_ = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†æ–¹æ³•æ”¹å†™ä¸º:</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSArray</span> *)properties &#123;</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *propertiesArr = cachedProperties_[<span class="built_in">NSStringFromClass</span>(<span class="keyword">self</span>)];</span><br><span class="line">    <span class="keyword">if</span> (!propertiesArr) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;%@è°ƒç”¨äº†propertiesæ–¹æ³•&quot;</span>,[<span class="keyword">self</span> <span class="keyword">class</span>]);</span><br><span class="line">        propertiesArr = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> outCount = <span class="number">0</span>;</span><br><span class="line">        objc_property_t *properties = class_copyPropertyList(<span class="keyword">self</span>, &amp;outCount);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;outCount; i++) &#123;</span><br><span class="line">            objc_property_t property = properties[i];</span><br><span class="line">            ScottProperty *propertyObj = [ScottProperty propertyWithProperty:property];</span><br><span class="line">            [propertiesArr addObject:propertyObj];</span><br><span class="line">            <span class="comment">//        NSLog(@&quot;name:%@--type:%@&quot;,propertyObj.name,propertyObj.type.typeClass);</span></span><br><span class="line">            <span class="comment">// ä¸ºäº†ä»¥åæ–¹ä¾¿ä½¿ç”¨ï¼Œå°†Cå­—ç¬¦ä¸²è½¬åŒ–æˆOCå¯¹è±¡</span></span><br><span class="line">            <span class="comment">//        char *name = property_getName(property);</span></span><br><span class="line">            <span class="comment">//        NSString *name = @(property_getName(property));</span></span><br><span class="line">            <span class="comment">//        char *att = property_getAttributes(property);</span></span><br><span class="line">            <span class="comment">//        NSString *att = @(property_getAttributes(property));</span></span><br><span class="line">            <span class="comment">//        NSUInteger loc = 1;</span></span><br><span class="line">            <span class="comment">//        NSUInteger len = [att rangeOfString:@&quot;,&quot;].location - loc;</span></span><br><span class="line">            <span class="comment">//        NSString *type = [att substringWithRange:NSMakeRange(loc, len)];</span></span><br><span class="line">            <span class="comment">//        NSLog(@&quot;%@&quot;,type);</span></span><br><span class="line">        &#125;</span><br><span class="line">        free(properties);</span><br><span class="line">        cachedProperties_[<span class="built_in">NSStringFromClass</span>(<span class="keyword">self</span>)] = propertiesArr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> propertiesArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension12.png" alt="å›¾12"><br>å¯ä»¥çœ‹å‡ºæ¯ä¸€ä¸ªç±»åªç»è¿‡ä¸€æ¬¡å°±å¯ä»¥è·å–æ‰€æœ‰å±æ€§ã€‚</p><hr><p>é™¤äº†ç¼“å­˜å±æ€§å¤–ï¼Œæå–ç±»å‹ç¼–ç çš„è¿‡ç¨‹ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ç¼“å­˜ä¼˜åŒ–æ€§èƒ½ã€‚<br>åœ¨ä¸‹é¢çš„æ–¹æ³•ä¸­åŠ ä¸Šä¸€å¥æ‰“å°ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)getTypeCode:(<span class="built_in">NSString</span> *)code &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>,code);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension13.png" alt="å›¾13"></p><p>å¯ä»¥çœ‹åˆ°ä¸€äº›å¸¸ç”¨çš„ç±»å‹ä¾‹å¦‚<code>NSString</code>å¤šæ¬¡è°ƒç”¨äº†è¯¥æ–¹æ³•ã€‚æå–ç±»å‹æ—¶,åªè¦çŸ¥é“ç±»å(åœ¨è¿™é‡Œä¹Ÿå°±æ˜¯<code>typeCode</code>),ä¸€ä¸ª<code>ScottPropertyType</code>å°±å·²ç»å¯ä»¥ç¡®å®šäº†ã€‚</p><p>é‡å†™äº†<code>- initWithTypeString:</code>æ–¹æ³•:</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">NSMutableDictionary</span> *cacheTypes_;</span><br><span class="line">+ (<span class="type">void</span>)load &#123;</span><br><span class="line">    cacheTypes_ = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">&#125;</span><br><span class="line">+ (<span class="keyword">instancetype</span>)propertiesWithAttributeString:(<span class="built_in">NSString</span> *)att &#123;</span><br><span class="line">    <span class="keyword">return</span> [[ScottPropertyType alloc] initWithTypeString:att];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithTypeString:(<span class="built_in">NSString</span> *)typeString &#123;   </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="variable language_">super</span> init]) &#123;</span><br><span class="line">        <span class="built_in">NSUInteger</span> loc = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">NSUInteger</span> len = [typeString rangeOfString:<span class="string">@&quot;,&quot;</span>].location - loc;</span><br><span class="line">        <span class="built_in">NSString</span> *typeCode = [typeString substringWithRange:<span class="built_in">NSMakeRange</span>(loc, len)];</span><br><span class="line">        <span class="keyword">if</span> (!cacheTypes_[typeCode]) &#123;</span><br><span class="line">            [<span class="keyword">self</span> getTypeCode:typeCode];</span><br><span class="line">            cacheTypes_[typeCode] = <span class="keyword">self</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/ScottExtension14.png" alt="å›¾14"></p><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>OK,åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„è§£è¯»ä¹Ÿç®—æ˜¯å®Œæˆäº†ï¼Œç”±äºæ˜¯ä¸‹ç­ä¹‹åå†™çš„ï¼Œæ‰€ä»¥èŠ±è´¹äº†4å¤©çš„æ—¶é—´ï¼Œç»ˆäºæŠŠæ­¤ç¯‡æ–‡ç« å†™å®Œäº†ï¼Œæ¬¢è¿å¤§å®¶ç‚¹è¯„å¹¶è®¨è®ºã€‚<br>æœ€åä»£ç åœ°å€ï¼šâ€”&gt;<a href="https://github.com/LZAscott/ScottExtension">æˆ³è¿™é‡Œ</a></p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>å‚è€ƒèµ„æ–™ï¼š<a href="http://www.jianshu.com/p/d2ecef03f19e">è·Ÿç€MJExtensionå®ç°ç®€å•çš„å­—å…¸è½¬æ¨¡å‹</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¼€å‘ä¸­ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯å°†æœåŠ¡å™¨è¿”å›çš„æ•°æ®è½¬æ¢æˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ¨¡å‹å¯¹è±¡ã€‚å½“ç„¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç»“æ„æœ‰&lt;code&gt;xml&lt;/code&gt;ç±»å‹çš„ï¼Œä¹Ÿæœ‰&lt;code&gt;json&lt;/code&gt;ç±»å‹çš„ã€‚æœ¬æ–‡åªè®¨è®º&lt;code&gt;json&lt;/code&gt;æ ¼å¼çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="technology" scheme="http://example.com/categories/technology/"/>
    
    
    <category term="Runtime" scheme="http://example.com/tags/Runtime/"/>
    
  </entry>
  
  <entry>
    <title>iOS9æ–°ç‰¹æ€§</title>
    <link href="http://example.com/post/387a5c0e.html"/>
    <id>http://example.com/post/387a5c0e.html</id>
    <published>2016-06-15T13:46:49.000Z</published>
    <updated>2023-12-02T10:27:22.208Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘è¿™ä¸¤å¤©ï¼Œå¾®åšã€æœ‹å‹åœˆé‡Œé¢è¢«WWDCçš„å†…å®¹åˆ·å±ï¼Œè®²çš„éƒ½æ˜¯å…³äº<code>watch OS</code>ã€<code>tv OS</code>ã€<code>mac OS</code>ä»¥åŠ<code>iOS</code>ä¸Šé¢çš„ä¸€äº›æ›´æ–°ï¼Œå½“ç„¶ç›®å‰çš„æˆ‘æ¯”è¾ƒå…³å¿ƒçš„æ˜¯<code>iOS</code>æ–¹é¢çš„æ”¹å˜ã€‚ä¹Ÿæ˜¯å¥‡æ€ªï¼Œåˆ«äººéƒ½å‡ºiOS10çš„ç³»ç»Ÿäº†ï¼Œæˆ‘è¿˜åœ¨è¿™å†™iOS9çš„æ–°ç‰¹æ€§,å¥½å§ï¼Œå†™æ­¤ç¯‡æ–‡ç« æ˜¯ä¸ºäº†æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¾¿äºä»¥åæŸ¥çœ‹ã€‚</p><span id="more"></span><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><ul><li><p>æ‘˜è¦ï¼šä¸ºäº†å¢å¼ºæ•°æ®è®¿é—®å®‰å…¨ï¼ŒiOS9é»˜è®¤ä¼šæŠŠæ‰€æœ‰çš„<code>http</code>è¯·æ±‚éƒ½æ”¹ä¸º<code>https</code>è¯·æ±‚ï¼ŒiOS9.x-SDKç¼–è¯‘æ—¶ï¼Œé»˜è®¤ä¼šè®©æ‰€æœ‰ä»<code>NSURLConnection</code>ã€<code>CFURL</code>ã€<code>NSURLSession</code>å‘å‡ºçš„<code>http</code>è¯·æ±‚ç»Ÿä¸€é‡‡ç”¨<code>TLS1.2åè®®</code>ã€‚æœåŠ¡å™¨å› æ­¤éœ€è¦æ›´æ–°ï¼Œä»¥è§£æç›¸å…³æ•°æ®ã€‚å¦‚æœä¸æ›´æ–°ï¼Œå¯ä»¥é€šè¿‡åœ¨info.plistä¸­å£°æ˜ï¼Œå€’é€€å›ä¸å®‰å…¨çš„ç½‘ç»œè¯·æ±‚ã€‚è€Œè¿™ä¸€åšæ³•ï¼Œå®˜æ–¹æ–‡æ¡£ç§°ä¸º<code>ATS</code>,å…¨ç§°ä¸º<code>App Transport Security</code>,æ˜¯iOS9çš„ä¸€ä¸ªæ–°ç‰¹æ€§ã€‚</p></li><li><p>ä¸€ä¸ªç¬¦åˆ<code>ATS</code>çš„<code>https</code>ï¼Œåº”è¯¥ç¬¦åˆå¦‚ä¸‹æ¡ä»¶ï¼š</p><ol><li><code>Transport Layer Security</code>åè®®ç‰ˆæœ¬è¦æ±‚TLS1.2ä»¥ä¸Šï¼›</li><li>æœåŠ¡çš„<code>Ciphers</code>é…ç½®è¦æ±‚æ”¯æŒ<code>Forward Secrecy</code>ç­‰ï¼›</li><li>è¯ä¹¦ç­¾åç®—æ³•ç¬¦åˆATSè¦æ±‚ç­‰ã€‚</li></ol></li><li><p>å¦‚æœæˆ‘ä»¬æœåŠ¡å™¨ä¸æ›´æ–°ï¼Œæˆ‘ä»¬è®¿é—®çš„è¿˜æ˜¯<code>http</code>é“¾æ¥ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨å·¥ç¨‹çš„info.plistæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä»£ç å³å¯ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/iOS91.png" alt="å›¾1"></p></li></ul><h2 id="Bitcode"><a href="#Bitcode" class="headerlink" title="Bitcode"></a>Bitcode</h2><ul><li><p>æœªæ¥,Watchåº”ç”¨å¿…é¡»åŒ…å«bitcode,iOSä¸å¼ºåˆ¶ï¼ŒMac OSä¸æ”¯æŒã€‚ä½†æ˜¯æœ€å‘çš„ä¸€ç‚¹æ˜¯ï¼šXcode7åŠä»¥ä¸Šç‰ˆæœ¬ä¼šé»˜è®¤å¼€å¯bitcodeã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯bitcode?</p><p>  å®˜æ–¹æ–‡æ¡£çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š</p><blockquote><p>Bitcode is an intermediate representation of a compiled program. Apps you upload to iTunes Connect that contain bitcode will be compiled and linked on the App Store. Including bitcode will allow Apple to re-optimize your app binary in the future without the need to submit a new version of your app to the store.</p></blockquote><p>  ç¿»è¯‘è¿‡æ¥å°±æ˜¯:</p><blockquote><p>bitcode æ˜¯è¢«ç¼–è¯‘ç¨‹åºçš„ä¸€ç§ä¸­é—´å½¢å¼çš„ä»£ç ã€‚åŒ…å« bitcode é…ç½®çš„ç¨‹åºå°†ä¼šåœ¨ App Store ä¸Šè¢«ç¼–è¯‘å’Œé“¾æ¥ã€‚ bitcode å…è®¸è‹¹æœåœ¨åæœŸé‡æ–°ä¼˜åŒ–æˆ‘ä»¬ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬é‡æ–°æäº¤ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬åˆ° App Store ä¸Šã€‚</p></blockquote><p>  åœ¨Xcodeç®€ä»‹ä¸­æ˜¯è¿™æ ·æè¿°çš„:</p><blockquote><p>Bitcode. When you archive for submission to the App Store, Xcode will compile your app into an intermediate representation. The App Store will then compile the bitcode down into the 64 or 32 bit executables as necessary.</p></blockquote><p>  ç¿»è¯‘è¿‡æ¥å°±æ˜¯:</p><blockquote><p>å½“æˆ‘ä»¬æäº¤ç¨‹åºåˆ° App Storeä¸Šæ—¶ï¼Œ Xcode ä¼šå°†ç¨‹åºç¼–è¯‘ä¸ºä¸€ä¸ªä¸­é—´è¡¨ç°å½¢å¼( bitcode )ã€‚ç„¶å App store ä¼šå†å°†è¿™ä¸ª bitcode ç¼–è¯‘ä¸ºå¯æ‰§è¡Œçš„64ä½æˆ–32ä½ç¨‹åºã€‚</p></blockquote></li><li><p><strong>å¦‚æœä½ çš„åº”ç”¨å‡†å¤‡å¯ç”¨Bitcodeç¼–è¯‘æœºåˆ¶ï¼Œå°±éœ€è¦æ³¨æ„ä»¥ä¸‹çš„å‡ ç‚¹ï¼š</strong></p><ol><li>Xcode 7é»˜è®¤å¼€å¯ Bitcode ï¼Œå¦‚æœåº”ç”¨å¼€å¯ Bitcodeï¼Œé‚£ä¹ˆå…¶é›†æˆçš„å…¶ä»–ç¬¬ä¸‰æ–¹åº“ä¹Ÿéœ€è¦æ˜¯ Bitcode ç¼–è¯‘çš„åŒ…æ‰èƒ½çœŸæ­£è¿›è¡Œ Bitcode ç¼–è¯‘;</li><li>å¼€å¯ Bitcode ç¼–è¯‘åï¼Œç¼–è¯‘äº§ç”Ÿçš„ .app ä½“ç§¯ä¼šå˜å¤§(ä¸­é—´ä»£ç ï¼Œä¸æ˜¯ç”¨æˆ·ä¸‹è½½çš„åŒ…)ï¼Œä¸” .dSYM æ–‡ä»¶ä¸èƒ½ç”¨æ¥å´©æºƒæ—¥å¿—çš„ç¬¦å·åŒ–(ç”¨æˆ·ä¸‹è½½çš„åŒ…æ˜¯ Apple æœåŠ¡é‡æ–°ç¼–è¯‘äº§ç”Ÿçš„ï¼Œæœ‰äº§ç”Ÿæ–°çš„ç¬¦å·æ–‡ä»¶);</li><li>é€šè¿‡ Archive æ–¹å¼ä¸Šä¼  AppStore çš„åŒ…ï¼Œå¯ä»¥åœ¨Xcodeçš„Organizerå·¥å…·ä¸­ä¸‹è½½å¯¹åº”å®‰è£…åŒ…çš„æ–°çš„ç¬¦å·æ–‡ä»¶ã€‚</li></ol></li></ul><h2 id="URL-Schemeå¼•å…¥ç™½åå•"><a href="#URL-Schemeå¼•å…¥ç™½åå•" class="headerlink" title="URL Schemeå¼•å…¥ç™½åå•"></a>URL Schemeå¼•å…¥ç™½åå•</h2><ul><li><p>iOS9ä¸­ï¼Œå¦‚æœä½¿ç”¨<code>canOpenURL:</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¶‰åŠåˆ°çš„<code>URL Scheme</code>å¿…é¡»åœ¨info.plistä¸­å°†å®ƒä»¬åˆ—ä¸ºç™½åå•ï¼Œå¦åˆ™ä¸èƒ½ä½¿ç”¨ã€‚keyå«åš<code>LSApplicationQueriesSchemes</code>,é”®å€¼å†…å®¹æ˜¯:</p><pre><code>  &lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;  &lt;array&gt;   &lt;string&gt;urlscheme&lt;/string&gt;   &lt;string&gt;urlscheme2&lt;/string&gt;   &lt;string&gt;urlscheme3&lt;/string&gt;   &lt;string&gt;urlscheme4&lt;/string&gt;  &lt;/array&gt; </code></pre></li><li><p>å¸¸è§URL Schemeç™½åå•ã€‚</p><pre><code>  &lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;  &lt;array&gt;      &lt;!-- å¾®ä¿¡ URL Scheme ç™½åå•--&gt;      &lt;string&gt;wechat&lt;/string&gt;      &lt;string&gt;weixin&lt;/string&gt;        &lt;!-- æ–°æµªå¾®åš URL Scheme ç™½åå•--&gt;      &lt;string&gt;sinaweibohd&lt;/string&gt;      &lt;string&gt;sinaweibo&lt;/string&gt;      &lt;string&gt;sinaweibosso&lt;/string&gt;      &lt;string&gt;weibosdk&lt;/string&gt;      &lt;string&gt;weibosdk2.5&lt;/string&gt;        &lt;!-- QQã€Qzone URL Scheme ç™½åå•--&gt;      &lt;string&gt;mqqapi&lt;/string&gt;      &lt;string&gt;mqq&lt;/string&gt;      &lt;string&gt;mqqOpensdkSSoLogin&lt;/string&gt;      &lt;string&gt;mqqconnect&lt;/string&gt;      &lt;string&gt;mqqopensdkdataline&lt;/string&gt;      &lt;string&gt;mqqopensdkgrouptribeshare&lt;/string&gt;      &lt;string&gt;mqqopensdkfriend&lt;/string&gt;      &lt;string&gt;mqqopensdkapi&lt;/string&gt;      &lt;string&gt;mqqopensdkapiV2&lt;/string&gt;      &lt;string&gt;mqqopensdkapiV3&lt;/string&gt;      &lt;string&gt;mqzoneopensdk&lt;/string&gt;      &lt;string&gt;wtloginmqq&lt;/string&gt;      &lt;string&gt;wtloginmqq2&lt;/string&gt;      &lt;string&gt;mqqwpa&lt;/string&gt;      &lt;string&gt;mqzone&lt;/string&gt;      &lt;string&gt;mqzonev2&lt;/string&gt;      &lt;string&gt;mqzoneshare&lt;/string&gt;      &lt;string&gt;wtloginqzone&lt;/string&gt;      &lt;string&gt;mqzonewx&lt;/string&gt;      &lt;string&gt;mqzoneopensdkapiV2&lt;/string&gt;      &lt;string&gt;mqzoneopensdkapi19&lt;/string&gt;      &lt;string&gt;mqzoneopensdkapi&lt;/string&gt;      &lt;string&gt;mqzoneopensdk&lt;/string&gt;        &lt;!-- æ”¯ä»˜å®  URL Scheme ç™½åå•--&gt;      &lt;string&gt;alipay&lt;/string&gt;      &lt;string&gt;alipayshare&lt;/string&gt;  &lt;/array&gt;</code></pre></li><li><p><strong>æ³¨æ„ï¼šç™½åå•ä¸Šé™æ˜¯50ä¸ª</strong></p></li></ul><h2 id="å±æ€§å€¼nil"><a href="#å±æ€§å€¼nil" class="headerlink" title="å±æ€§å€¼nil"></a>å±æ€§å€¼nil</h2><p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œè‡ªä»Xcode7å¼€å§‹ï¼Œå®˜æ–¹æ–‡æ¡£çš„ç±»é‡Œé¢ä¸€äº›å±æ€§å°±å¤šäº†ä¸€äº›ç±»ä¼¼<code>nonnull</code>ã€<code>nullable</code>ã€<code>null_resettable</code>è¿™æ ·çš„å­—çœ¼ã€‚</p><ul><li><p><strong>nonnullï¼š</strong>è¡¨ç¤ºè¯¥å±æ€§çš„<code>setter</code>å’Œ<code>getter</code>æ–¹æ³•éƒ½ä¸èƒ½ä¸º<code>nil</code></p><pre><code>  @property (nonatomic, strong, nonnull) NSArray *names;  </code></pre><p>  ä¹Ÿå¯ä»¥è¿™æ ·å†™:</p><pre><code>  @property (nonatomic, strong) NSArray * __nonnull names;</code></pre><p>  ä»£è¡¨ç€<code>names</code>æ•°ç»„çš„<code>getter</code>æ–¹æ³•å’Œ<code>setter</code>æ–¹æ³•éƒ½ä¸èƒ½ä¸º<code>nil</code>ã€‚</p></li><li><p><strong>nullableï¼š</strong>è¡¨ç¤ºè¯¥å±æ€§çš„<code>setter</code>å’Œ<code>getter</code>æ–¹æ³•éƒ½èƒ½ä¸º<code>nil</code>ã€‚(<strong>æ³¨æ„ï¼šé»˜è®¤éƒ½æ˜¯<code>nullable</code></strong>)</p><pre><code>  @property (nonatomic, strong, nullable) NSArray *names;</code></pre><p>  ä¹Ÿå¯ä»¥è¿™æ ·å†™:</p><pre><code>  @property (nonatomic, strong) NSArray * __nullable names;  </code></pre><p>  ä»£è¡¨ç€<code>names</code>æ•°ç»„çš„<code>getter</code>å’Œ<code>setter</code>æ–¹æ³•éƒ½èƒ½ä¸º<code>nil</code>ã€‚</p></li><li><p><strong>null_resettableï¼š</strong><code>setter</code>æ–¹æ³•å¯ä»¥ä¸º<code>nil</code>,<code>getter</code>æ–¹æ³•ä¸èƒ½ä¸º<code>nil</code>ã€‚(**æ§åˆ¶å™¨çš„viewå°±æ˜¯ä½¿ç”¨è¿™ä¸ªä¿®é¥° **)</p><pre><code>  @property (nonatomic, strong, null_resettable) NSArray *array;  </code></pre><p>  <strong>æ³¨æ„ï¼šä»¥ä¸‹å†™æ³•æ˜¯é”™è¯¯çš„ï¼š</strong></p><blockquote><p><del>@property (nonatomic, strong) NSArray * __null_resettable array;</del></p></blockquote></li></ul><blockquote><p>æ€»ç»“ï¼š</p></blockquote><blockquote><ul><li>åªèƒ½ä¿®é¥°å¯¹è±¡ç±»å‹ï¼Œä¸èƒ½ä¿®é¥°åŸºæœ¬ç±»å‹;</li><li>æ—¢å¯ä»¥ä¿®é¥°å±æ€§ï¼Œåˆå¯ä»¥ä¿®é¥°æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼;</li><li><code>NS_ASSUME_NONNULL_BEGIN</code>å’Œ<code>NS_ASSUME_NONNULL_END</code>ä¹‹é—´çš„å±æ€§éƒ½æ˜¯æ·»åŠ äº†<code>nonnull</code>ä¿®é¥°çš„ã€‚</li></ul></blockquote><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p>ä¸¾ä¸ªğŸŒ°å§ï¼šæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¯å˜æ•°ç»„ï¼Œç„¶åå¯ä»¥éšä¾¿å¾€æ•°ç»„é‡Œé¢æ·»åŠ <code>NSString</code>,<code>NSNumber</code>,<code>NSObject</code>å¯¹è±¡ã€‚è¿™æ ·çš„è¯å½“æˆ‘ä»¬å–æ•°ç»„å…ƒç´ çš„æ—¶å€™è¿”å›çš„æ˜¯<code>id</code>ç±»å‹ï¼Œè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬æƒ³è¦å–é•¿åº¦çš„è¯ï¼Œä½¿ç”¨ç‚¹è¯­æ³•æ˜¯æ²¡æœ‰æç¤ºçš„ã€‚(<strong>å› ä¸ºidç±»å‹ä¸å¯ä»¥ä½¿ç”¨ç‚¹è¯­æ³•</strong>)ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>æ³›å‹</strong>æ¥ä¿®é¥°æˆ‘ä»¬å®šä¹‰çš„å¯å˜æ•°ç»„ã€‚</p><pre><code>@property (nonatomic, strong) NSMutableArray&lt;NSString *&gt; *names;</code></pre><p>è¿™æ ·å­ä¹‹åï¼Œæˆ‘ä»¬åªèƒ½å¾€è¯¥æ•°ç»„é‡Œé¢æ·»åŠ å­—ç¬¦ä¸²ç±»å‹çš„å…ƒç´ äº†ã€‚æ­¤æ—¶æˆ‘ä»¬è·å–å…ƒç´ çš„æ—¶å€™å°±èƒ½æ˜ç¡®åœ°çŸ¥é“æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ã€‚</p><h3 id="ä¸¾ä¸€åä¸‰"><a href="#ä¸¾ä¸€åä¸‰" class="headerlink" title="ä¸¾ä¸€åä¸‰"></a>ä¸¾ä¸€åä¸‰</h3><p>æˆ‘ä»¬å®šä¹‰å­—å…¸ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹</p><pre><code>// ä»£è¡¨ç€å­—å…¸çš„keyä¸ºNSStringç±»å‹ï¼Œvalueä¸ºNSNumberç±»å‹@property (nonatomic, strong) NSDictionary&lt;NSString *, NSNumber *&gt; *books;</code></pre><h3 id="è‡ªå®šä¹‰æ³›å‹"><a href="#è‡ªå®šä¹‰æ³›å‹" class="headerlink" title="è‡ªå®šä¹‰æ³›å‹"></a>è‡ªå®šä¹‰æ³›å‹</h3><p><strong>ä¾‹å­ï¼š</strong>å®šä¹‰ä¸€ä¸ª<code>ScottBag</code>ç±»ï¼Œä¸€ä¸ª<code>ScottBook</code>ç±»ï¼Œå¦‚æœæˆ‘ä»¬ç»™<code>ScottBag</code>ç±»æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p><pre><code>@interface ScottBag : NSObject- (void)add:(id)param;- (id)get:(NSInteger *)index;</code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨<code>ScottBag</code>ç±»ç”Ÿæˆçš„å¯¹è±¡å»<code>add</code>ä»»æ„å¯¹è±¡ã€‚</p><hr><p>å¦‚æœæˆ‘ä»¬ç»™<code>ScottBag</code>ç±»æ·»åŠ è‡ªå®šä¹‰æ³›å‹:</p><pre><code>@interface ScottBag&lt;ObjectType&gt; : NSObject- (void)add:(ObjectType)param;- (ObjectType)get:(NSInteger *)index;</code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼åªèƒ½å‘<code>ScottBag</code>ç±»ç”Ÿæˆçš„å¯¹è±¡ä¸­æ·»åŠ è§„å®šçš„ç±»å‹å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼Œæˆ‘ä»¬å°±è§„å®š<code>ScottBag</code>ç±»ç”Ÿæˆçš„å¯¹è±¡åªèƒ½æ·»åŠ <code>ScottBook</code>ç±»å‹çš„å¯¹è±¡ï¼š</p><pre><code>ScottBag&lt;ScottBook *&gt; *bag = [[ScottBag alloc] init];// &lt;#(ScottBook *)#&gt;è¡¨ç¤ºScottBookç±»å‹çš„å¯¹è±¡[bag add:&lt;#(ScottBook *)#&gt;];</code></pre><h2 id="StoryBoard-Refrence"><a href="#StoryBoard-Refrence" class="headerlink" title="StoryBoard Refrence"></a>StoryBoard Refrence</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ä»¥å‰å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨StoryBoardæ¥åšé¡¹ç›®çš„è¯ï¼Œè¦ä¹ˆå°±æ˜¯æ‰€æœ‰çš„æ§åˆ¶å™¨éƒ½æ”¾åœ¨ä¸€ä¸ªStoryBoardä¸­ï¼Œé€šè¿‡è¿çº¿çš„æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œè¦ä¹ˆå°±æ˜¯é€šè¿‡ä»£ç æ¥è¯»å–ä¸åŒStoryBoardç§çš„æ§åˆ¶å™¨æ¥é€šä¿¡ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œåœ¨iOS9ä¸­å¼•å…¥äº†<code>StoryBoard Refrence</code>è¿™ä¸ªæ¦‚å¿µï¼Œ<code>Storyboard Reference</code>å…è®¸ä½ ä»<code>segue</code>ä¸­å¼•ç”¨å…¶ä»–<code>storyboard</code>ä¸­çš„<code>viewController</code>ã€‚è¿™æ„å‘³ä¸­ä½ å¯ä»¥ä¿æŒä¸åŒåŠŸèƒ½æ¨¡å—åŒ–ï¼ŒåŒæ—¶<code>Storyboard</code>çš„ä½“ç§¯å˜å°å¹¶æ˜“ä¸ç®¡ç†ã€‚ä¸ä»…å®¹æ˜“ç†è§£äº†ï¼Œå’Œå›¢é˜Ÿä¸€èµ·å·¥ä½œæ—¶ï¼Œåˆå¹¶ï¼ˆå·¥ä½œæˆæœï¼‰ä¹Ÿå˜çš„ç®€å•äº†ã€‚</p><h2 id="Search-API"><a href="#Search-API" class="headerlink" title="Search API"></a>Search API</h2><p>è¿™ä¸ªåœ¨å®é™…å¼€å‘ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œä¸è¿‡å¤§å®¶å¯ä»¥è‡ªå·±å­¦ä¹ ã€‚â€”&gt;<a href="http://www.cocoachina.com/ios/20150819/13116.html">ä¼ é€é—¨</a></p><h2 id="UIStackView"><a href="#UIStackView" class="headerlink" title="UIStackView"></a>UIStackView</h2><p>è¿™ä¸ªåœ¨å¼€å‘ä¸­æš‚æ—¶æ²¡æœ‰ç”¨åˆ°ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å­¦ä¹ çš„èµ„æ–™ã€‚â€”&gt;<a href="http://www.cocoachina.com/ios/20150623/12233.html">ä¼ é€é—¨</a></p><h2 id="3D-touch"><a href="#3D-touch" class="headerlink" title="3D touch"></a>3D touch</h2><h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>åœ¨iPhone6sé—®ä¸–ä¹‹åï¼Œå¾ˆå¤šæœç²‰éƒ½äº‰å…ˆè¦ä½“éªŒ3D Touchç»™ç”¨æˆ·å¸¦æ¥çš„é¢å¤–ç»´åº¦ä¸Šçš„äº¤äº’ï¼Œè¿™ä¸ªè®¾è®¡ä¹‹æ‰€ä»¥å«åš3D Touchï¼Œå…¶åŸç†ä¸Šæ˜¯å¢åŠ äº†ä¸€ä¸ªå‹åŠ›çš„æ„Ÿè§¦ï¼Œé€šè¿‡åŒºåˆ†è½»æŒ‰å’Œé‡æŒ‰æ¥è¿›è¡Œä¸åŒçš„ç”¨æˆ·äº¤äº’ã€‚</p><h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><p>3D Touchæ˜¯ä¸€ä¸ªå¾ˆæ–°é¢–çš„è®¾è®¡ï¼Œå¯æ˜¯è‹¹æœæ–‡æ¡£ä¹Ÿç»™æˆ‘ä»¬è¯´äº†</p><blockquote><p>With Xcode 7.0 you must develop on a device that supports 3D Touch. Simulator in Xcode 7.0 does not support 3D Touch.</p></blockquote><p>WTF,æ˜¯ä¸æ˜¯çœ‹åˆ°è¿™é‡Œå¿ƒéƒ½å‡‰äº†ä¸€åŠï¼Œæ˜¯çš„ï¼ŒXcode7æ˜¯æ”¯æŒ3D Touchå¼€å‘çš„ï¼Œå¯æ˜¯æ¨¡æ‹Ÿå™¨å¹¶ä¸æ”¯æŒè¿™ä¸ªæ‰‹åŠ¿ã€‚ç”±äºæˆ‘æ²¡æœ‰6sæµ‹è¯•æœºï¼Œå› æ­¤å°±ä¸åšæ·±å…¥äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;æœ€è¿‘è¿™ä¸¤å¤©ï¼Œå¾®åšã€æœ‹å‹åœˆé‡Œé¢è¢«WWDCçš„å†…å®¹åˆ·å±ï¼Œè®²çš„éƒ½æ˜¯å…³äº&lt;code&gt;watch OS&lt;/code&gt;ã€&lt;code&gt;tv OS&lt;/code&gt;ã€&lt;code&gt;mac OS&lt;/code&gt;ä»¥åŠ&lt;code&gt;iOS&lt;/code&gt;ä¸Šé¢çš„ä¸€äº›æ›´æ–°ï¼Œå½“ç„¶ç›®å‰çš„æˆ‘æ¯”è¾ƒå…³å¿ƒçš„æ˜¯&lt;code&gt;iOS&lt;/code&gt;æ–¹é¢çš„æ”¹å˜ã€‚ä¹Ÿæ˜¯å¥‡æ€ªï¼Œåˆ«äººéƒ½å‡ºiOS10çš„ç³»ç»Ÿäº†ï¼Œæˆ‘è¿˜åœ¨è¿™å†™iOS9çš„æ–°ç‰¹æ€§,å¥½å§ï¼Œå†™æ­¤ç¯‡æ–‡ç« æ˜¯ä¸ºäº†æ€»ç»“ä¸€ä¸‹ï¼Œä»¥ä¾¿äºä»¥åæŸ¥çœ‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://example.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>åˆè¯†Runtime</title>
    <link href="http://example.com/post/c581c9e9.html"/>
    <id>http://example.com/post/c581c9e9.html</id>
    <published>2016-06-14T14:26:43.000Z</published>
    <updated>2023-12-02T11:32:07.677Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>ä¹‹å‰åœ¨çœ‹ä¸€äº›ç¬¬ä¸‰æ–¹æºç çš„æ—¶å€™ï¼Œæ—¶ä¸æ—¶çš„èƒ½ç¢°åˆ°ä¸€äº›å…³äºè¿è¡Œæ—¶ç›¸å…³çš„ä»£ç ã€‚äºæ˜¯ä¹ï¼Œå°±é˜…è¯»äº†ä¸€äº›å…³äºè¿è¡Œæ—¶çš„æ–‡ç« ï¼Œæ„Ÿè§‰å†™çš„éƒ½ä¸é”™ï¼Œå†™æ­¤ç¯‡æ–‡ç« ä¸ºäº†è®°å½•ä¸€ä¸‹ï¼ŒåŒæ—¶ä¹Ÿé‡æ–°å­¦ä¹ ä¸€éã€‚</p><h2 id="äºŒã€Runtimeç®€ä»‹"><a href="#äºŒã€Runtimeç®€ä»‹" class="headerlink" title="äºŒã€Runtimeç®€ä»‹"></a>äºŒã€Runtimeç®€ä»‹</h2><ul><li>Runtimeç®€ç§°è¿è¡Œæ—¶ï¼ŒOCå°±æ˜¯è¿è¡Œæ—¶æœºåˆ¶ã€‚</li><li>Cè¯­è¨€ä¸­å‡½æ•°çš„è°ƒç”¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šå†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚</li><li>å¯¹äºOCæ¥è¯´ï¼Œå±äºåŠ¨æ€è°ƒç”¨è¿‡ç¨‹ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å¹¶ä¸èƒ½å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œåªæœ‰çœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰ä¼šæ ¹æ®å‡½æ•°çš„åç§°æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨ã€‚</li><li>äº‹å®è¯æ˜ï¼š<ol><li>åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOCå¯ä»¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°å¹¶æœªå®ç°ï¼Œåªè¦ç”³æ˜å°±ä¸ä¼šæŠ¥é”™ã€‚</li><li>åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒCè¯­è¨€è°ƒç”¨æœªå®ç°çš„å‡½æ•°å°±ä¼šæŠ¥é”™ã€‚</li></ol></li></ul><span id="more"></span><h2 id="ä¸‰ã€Runtimeçš„ä½œç”¨"><a href="#ä¸‰ã€Runtimeçš„ä½œç”¨" class="headerlink" title="ä¸‰ã€Runtimeçš„ä½œç”¨"></a>ä¸‰ã€Runtimeçš„ä½œç”¨</h2><h3 id="3-1-å‘é€æ¶ˆæ¯"><a href="#3-1-å‘é€æ¶ˆæ¯" class="headerlink" title="3.1 å‘é€æ¶ˆæ¯"></a>3.1 å‘é€æ¶ˆæ¯</h3><ul><li><p>æ–¹æ³•è°ƒç”¨çš„æœ¬è´¨å°±æ˜¯å‘å¯¹è±¡å‘é€æ¶ˆæ¯ã€‚</p></li><li><p><code>objc_msgSend</code>,åªæœ‰å¯¹è±¡æ‰èƒ½å‘é€æ¶ˆæ¯ï¼Œå› æ­¤ä»¥<code>objc</code>å¼€å¤´ã€‚<strong>æ³¨æ„ï¼šåœ¨ocä¸­ï¼Œä¸è®ºæ˜¯å®ä¾‹å¯¹è±¡è¿˜æ˜¯Classï¼Œéƒ½æ˜¯idç±»å‹çš„å¯¹è±¡</strong></p></li><li><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ–¹æ³•è°ƒç”¨è½¬åŒ–æˆè¿è¡Œæ—¶çš„ä»£ç ï¼Œçœ‹çœ‹è°ƒç”¨æ–¹æ³•çš„çœŸé¢ç›®å§ã€‚</p><ol><li><p>æ–°å»ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥ç¨‹</p></li><li><p>ç„¶ååœ¨mainæ–¹æ³•é‡Œé¢å†™ä¸Š</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> main(<span class="type">int</span> argc, <span class="keyword">const</span> <span class="type">char</span> * argv[]) &#123;</span><br><span class="line">   <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">       <span class="built_in">NSObject</span> *obj = [[<span class="built_in">NSObject</span> alloc] init];</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç”¨ç»ˆç«¯è·³è½¬åˆ°å·¥ç¨‹æ‰€åœ¨çš„æ ¹ç›®å½•ï¼Œç„¶åå‘½ä»¤è¡Œè¿è¡Œ<code>clang -rewrite-objc main.m</code></p></li><li><p>ç„¶ålsæŸ¥çœ‹ä¸€ä¸‹å½“å‰ç›®å½•å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª<code>main.cpp</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨<code>open main.cpp</code>æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸€å¤§ä¸²ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç¿»åˆ°åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·çš„ä»£ç ï¼š</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> main(<span class="type">int</span> argc, <span class="keyword">const</span> <span class="type">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="comment">/* @autoreleasepool */</span> &#123; __AtAutoreleasePool __autoreleasepool; </span><br><span class="line">        <span class="built_in">NSObject</span> *obj = ((<span class="built_in">NSObject</span> *(*)(<span class="type">id</span>, SEL))(<span class="type">void</span> *)objc_msgSend)((<span class="type">id</span>)((<span class="built_in">NSObject</span> *(*)(<span class="type">id</span>, SEL))(<span class="type">void</span> *)objc_msgSend)((<span class="type">id</span>)objc_getClass(<span class="string">&quot;NSObject&quot;</span>), sel_registerName(<span class="string">&quot;alloc&quot;</span>)), sel_registerName(<span class="string">&quot;init&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤æ‰ä¸€äº›å¼ºåˆ¶è½¬æ¢ï¼Œå°†ä¸Šé¢çš„ä»£ç ç®€åŒ–åï¼š</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> main(<span class="type">int</span> argc, <span class="keyword">const</span> <span class="type">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="comment">/* @autoreleasepool */</span> &#123; __AtAutoreleasePool __autoreleasepool; </span><br><span class="line">        <span class="built_in">NSObject</span> *obj = objc_msgSend(objc_getClass(<span class="string">&quot;NSObject&quot;</span>), sel_registerName(<span class="string">&quot;alloc&quot;</span>)), sel_registerName(<span class="string">&quot;init&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><blockquote><p>æ€»ç»“ï¼šåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è°ƒç”¨æ–¹æ³•çš„æœ¬è´¨å°±æ˜¯å‘é€æ¶ˆæ¯äº†ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å†™çš„<br>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSObject</span> *obj = [[<span class="built_in">NSObject</span> alloc] init];</span><br></pre></td></tr></table></figure><br>ä¸Šé¢è¿™æ¡è¯­å¥å‘é€äº†ä¸¤æ¬¡æ¶ˆæ¯ï¼Œç¬¬ä¸€æ¬¡å‘é€äº†<code>alloc</code>æ¶ˆæ¯ï¼Œç¬¬äºŒæ¬¡å‘é€äº†<code>init</code>æ¶ˆæ¯ã€‚</p></blockquote><h3 id="3-2-ç»™åˆ†ç±»æ·»åŠ å±æ€§"><a href="#3-2-ç»™åˆ†ç±»æ·»åŠ å±æ€§" class="headerlink" title="3.2 ç»™åˆ†ç±»æ·»åŠ å±æ€§"></a>3.2 ç»™åˆ†ç±»æ·»åŠ å±æ€§</h3><p>ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“åˆ†ç±»æ˜¯ä¸å¯ä»¥æ·»åŠ å±æ€§çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ—¶ï¼Œç»™åˆ†ç±»åŠ¨æ€çš„æ·»åŠ å±æ€§ã€‚</p><p><strong>åŸç†ï¼š</strong>ç»™ä¸€ä¸ªåˆ†ç±»å£°æ˜å±æ€§ï¼Œå…¶æœ¬è´¨å°±æ˜¯ç»™è¿™ä¸ªç±»æ·»åŠ å…³è”ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æŠŠè¿™ä¸ªå€¼çš„å†…å­˜ç©ºé—´æ·»åŠ åˆ°ç±»å­˜ç©ºé—´ã€‚</p><h4 id="3-2-1-å®è·µ"><a href="#3-2-1-å®è·µ" class="headerlink" title="3.2.1 å®è·µ"></a>3.2.1 å®è·µ</h4><ul><li><p>æˆ‘ä»¬ç»™<code>NSObject</code>æ·»åŠ ä¸€ä¸ªåˆ†ç±»ï¼Œç„¶åå£°æ˜ä¸€ä¸ª<code>name</code>å±æ€§ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSObject</span> (<span class="title">Extension</span>)</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>NSObject</code>å¯¹è±¡ï¼Œç„¶åç»™<code>name</code>å±æ€§èµ‹å€¼ï¼Œå¹¶ä¸”æ‰“å°<code>name</code>çš„å€¼ã€‚<br> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¼–è¯‘æˆåŠŸï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™å°±ä¼šåä¸½ä¸½çš„å´©æºƒï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä¸èƒ½ç»™åˆ†ç±»æ·»åŠ å±æ€§çš„åŸå› äº†ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ—¶å®ç°ã€‚</p></li><li><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨.mæ–‡ä»¶é‡å†™<code>name</code>å±æ€§çš„<code>setter</code>ä»¥åŠ<code>getter</code>æ–¹æ³•ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;NSObject+Extension.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="type">char</span> *key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSObject</span> (<span class="title">Extension</span>)</span></span><br><span class="line">-(<span class="built_in">NSString</span> *)name &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®å…³è”çš„keyï¼Œè·å–å…³è”çš„å€¼</span></span><br><span class="line">    <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, key);</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)setName:(<span class="built_in">NSString</span> *)name &#123;</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç»™å“ªä¸ªå¯¹è±¡æ·»åŠ å…³è”</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šå…³è”çš„keyï¼Œé€šè¿‡è¿™ä¸ªkeyè·å–</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå…³è”çš„value</span></span><br><span class="line">    <span class="comment">// ç¬¬å››ä¸ªå‚æ•°:å…³è”çš„ç­–ç•¥</span></span><br><span class="line">    objc_setAssociatedObject(<span class="keyword">self</span>, key, name, OBJC_ASSOCIATION_COPY_NONATOMIC);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œç¨‹åºï¼Œç¼–è¯‘æˆåŠŸï¼Œè¿è¡Œä¹ŸæˆåŠŸã€‚</p></li></ul><h3 id="3-3-åŠ¨æ€æ·»åŠ æ–¹æ³•"><a href="#3-3-åŠ¨æ€æ·»åŠ æ–¹æ³•" class="headerlink" title="3.3 åŠ¨æ€æ·»åŠ æ–¹æ³•"></a>3.3 åŠ¨æ€æ·»åŠ æ–¹æ³•</h3><ul><li><strong>å¼€å‘ä½¿ç”¨åœºæ™¯:</strong> å¦‚æœä¸€ä¸ªç±»æ–¹æ³•éå¸¸å¤šï¼ŒåŠ è½½è¯¥ç±»åˆ°å†…å­˜çš„æ—¶å€™æ¯”è¾ƒè€—è´¹èµ„æºï¼Œéœ€è¦ç»™æ¯ä¸ªæ–¹æ³•ç”Ÿæˆæ˜ å°„è¡¨ï¼Œå¯ä»¥ä½¿ç”¨è¿è¡Œæ—¶ç»™è¯¥ç±»åŠ¨æ€æ·»åŠ æ–¹æ³•æ¥è§£å†³ã€‚(<strong>ps:æˆ‘æ„Ÿè§‰è¿™ä¸ªåœ¨å¼€å‘ä¸­ä¸å¸¸ç”¨</strong>)</li></ul><h4 id="3-3-1-å®è·µ"><a href="#3-3-1-å®è·µ" class="headerlink" title="3.3.1 å®è·µ"></a>3.3.1 å®è·µ</h4><ul><li><p>åˆ›å»ºä¸€ä¸ªç»§æ‰¿<code>NSObject</code>çš„<code>Student</code>ç±»ï¼Œå£°æ˜ä¸€ä¸ª<code>study</code>æ–¹æ³•ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Student</span> : <span class="title">NSObject</span></span></span><br><span class="line">-(<span class="type">void</span>)study;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ª<code>Student</code>å¯¹è±¡ï¼Œè°ƒç”¨<code>study</code>æ–¹æ³•ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student *s = [[Student alloc] init];</span><br><span class="line">  [s performSelector:<span class="keyword">@selector</span>(study)];</span><br></pre></td></tr></table></figure><p>  æ­¤æ—¶ä¼šå‡ºç°ä¸€ä¸ªç»å…¸çš„æŠ¥é”™ï¼š</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-[Student study]: unrecognized selector sent to instance <span class="number">0x7fd719cbb2f0</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>é”™è¯¯åŸå› :è°ƒç”¨ä¸€ä¸ªæœªå®ç°çš„å®ä¾‹æ–¹æ³•</strong></p></blockquote></li><li><p>æˆ‘ä»¬åœ¨<code>Student</code>ç±».mæ–‡ä»¶åŠ¨æ€æ·»åŠ studyæ–¹æ³•çš„å®ç°ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;Student.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Student</span></span></span><br><span class="line"><span class="comment">// void(*)()</span></span><br><span class="line"><span class="comment">// é»˜è®¤æ–¹æ³•éƒ½æœ‰ä¸¤ä¸ªéšå¼å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="type">void</span> studyStudent(<span class="type">id</span> <span class="keyword">self</span>, SEL sel)&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@--%@&quot;</span>,<span class="keyword">self</span>,<span class="built_in">NSStringFromSelector</span>(sel));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æœªå®ç°çš„æ–¹æ³•ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•å¤„ç†ï¼Œå¹¶ä¸”ä¼šæŠŠå¯¹åº”çš„æ–¹æ³•åˆ—è¡¨ä¼ è¿›æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œåˆ¤æ–­ï¼Œæœªå®ç°çš„æ–¹æ³•æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦åŠ¨æ€æ·»åŠ çš„æ–¹æ³•ã€‚</span></span><br><span class="line">+(<span class="type">BOOL</span>)resolveInstanceMethod:(SEL)sel &#123;    </span><br><span class="line">    <span class="keyword">if</span> (sel == <span class="keyword">@selector</span>(study)) &#123;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç»™å“ªä¸ªç±»æ·»åŠ æ–¹æ³•</span></span><br><span class="line">        <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šæ·»åŠ æ–¹æ³•çš„æ–¹æ³•ç¼–å·</span></span><br><span class="line">        <span class="comment">// ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ·»åŠ æ–¹æ³•çš„å‡½æ•°å®ç°ï¼ˆå‡½æ•°åœ°å€ï¼‰</span></span><br><span class="line">        <span class="comment">// ç¬¬å››ä¸ªå‚æ•°ï¼šå‡½æ•°çš„ç±»å‹ï¼Œ(è¿”å›å€¼+å‚æ•°ç±»å‹) v:void @:å¯¹è±¡-&gt;self :è¡¨ç¤ºSEL-&gt;_cmd</span></span><br><span class="line">        class_addMethod(<span class="keyword">self</span>, <span class="keyword">@selector</span>(study), studyStudent, <span class="string">&quot;v@:&quot;</span>);</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šæ­¤å¤„éœ€è¦é©¬ä¸Šç»“æŸæ­¤æ–¹æ³•(å¦åˆ™ï¼Œå¦‚æœå­˜åœ¨ç»§æ‰¿å…³ç³»çš„è¯ï¼Œä¼šè°ƒç”¨åˆ°çˆ¶ç±»å»)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [<span class="variable language_">super</span> resolveInstanceMethod:sel];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-4-äº¤æ¢æ–¹æ³•å®ç°"><a href="#3-4-äº¤æ¢æ–¹æ³•å®ç°" class="headerlink" title="3.4 äº¤æ¢æ–¹æ³•å®ç°"></a>3.4 äº¤æ¢æ–¹æ³•å®ç°</h3><ul><li>äº¤æ¢æ–¹æ³•å®ç°ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„<code>Method Swizzling</code>ã€‚</li><li><strong>åœºæ™¯ä¸€ï¼š</strong>å¦‚æœä½ æ•´ä¸ªé¡¹ç›®éƒ½åšå®Œäº†ï¼Œç„¶åäº§å“ç»ç†å‘Šè¯‰ä½ æƒ³ç»Ÿè®¡æ¯ä¸€ä¸ªé¡µé¢åœç•™çš„æ—¶é•¿ã€‚</li><li><strong>åœºæ™¯äºŒï¼š</strong>ç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•åŠŸèƒ½ä¸å¤Ÿï¼Œç»™ç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•æ‰©å±•ä¸€äº›åŠŸèƒ½ï¼Œå¹¶ä¸”ä¿æŒåŸæœ‰åŠŸèƒ½ã€‚</li></ul><h4 id="3-4-1-å®è·µ"><a href="#3-4-1-å®è·µ" class="headerlink" title="3.4.1 å®è·µ"></a>3.4.1 å®è·µ</h4><p><strong>åœºæ™¯ä¸€ï¼š</strong>ç»Ÿè®¡æ•´ä¸ªé¡¹ç›®æ¯ä¸€ä¸ªé¡µé¢åœç•™æ—¶é•¿ã€‚(<strong>è§£å†³æ–¹æ³•ä¹Ÿä¸æ˜¯å”¯ä¸€çš„</strong>)</p><ul><li><p>æ–¹å¼ä¸€ï¼šæ‰¾åˆ°æ‰€æœ‰çš„æ§åˆ¶å™¨ï¼Œç„¶åå†™ä¸Šï¼š</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="type">void</span>)viewWillAppear:(<span class="type">BOOL</span>)animated &#123;</span><br><span class="line">   [<span class="variable language_">super</span> viewWillAppear:animated];</span><br><span class="line">   [MobClick beginLogPageView:<span class="built_in">NSStringFromClass</span>([<span class="keyword">self</span> <span class="keyword">class</span>])];</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)viewWillDisappear:(<span class="type">BOOL</span>)animated &#123;</span><br><span class="line">   [<span class="variable language_">super</span> viewWillDisappear:animated];</span><br><span class="line">   [MobClick endLogPageView:<span class="built_in">NSStringFromClass</span>([<span class="keyword">self</span> <span class="keyword">class</span>])];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  ç„¶åæˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®å¯èƒ½æœ‰å‡ åä¸ªç”šè‡³ä¸Šç™¾ä¸ªé¡µé¢éœ€è¦ç»Ÿè®¡ï¼Œæˆ‘ä»¬æ€»ä¸å¯èƒ½æ¯ä¸ªé¡µé¢éƒ½è¿™æ ·å†™å§ã€‚äºæ˜¯ä¹ï¼Œå°±æœ‰äº†<strong>æ–¹å¼äºŒ</strong>ã€‚</p></li><li><p>æ–¹å¼äºŒï¼šæ‰€æœ‰çš„ç•Œé¢éƒ½ç»§æ‰¿äºä¸€ä¸ªåŸºç±»ï¼Œç„¶ååœ¨åŸºç±»ä¸­å†™ä¸Š</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="type">void</span>)viewWillAppear:(<span class="type">BOOL</span>)animated &#123;</span><br><span class="line">   [<span class="variable language_">super</span> viewWillAppear:animated];</span><br><span class="line">   [MobClick beginLogPageView:<span class="built_in">NSStringFromClass</span>([<span class="keyword">self</span> <span class="keyword">class</span>])];</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)viewWillDisappear:(<span class="type">BOOL</span>)animated &#123;</span><br><span class="line">   [<span class="variable language_">super</span> viewWillDisappear:animated];</span><br><span class="line">   [MobClick endLogPageView:<span class="built_in">NSStringFromClass</span>([<span class="keyword">self</span> <span class="keyword">class</span>])];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å¯æ˜¯ä¸€å¼€å§‹å†™é¡¹ç›®çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°ç»§æ‰¿ï¼Œæ‰€ä»¥åˆpapapaåœ°å°±æ•´ä¸ªé¡¹ç›®çš„æ§åˆ¶å™¨éƒ½ç»§æ‰¿äºä¸€ä¸ªåŸºç±»ï¼Œé‡å¤åœ°å°†æ¯ä¸€ä¸ªæ§åˆ¶å™¨çš„ç»§æ‰¿éƒ½è¯¥æˆäº†æˆ‘ä»¬åˆ›å»ºçš„åŸºç±»ã€‚ä½†æ˜¯ï¼Œè¿™æ ·è§£å†³çœŸçš„å¥½ä¹ˆï¼Œæœ‰å¯èƒ½æˆ‘ä»¬æœ‰äº›ç•Œé¢æ˜¯ç»§æ‰¿è‡ª<code>UITableViewController</code>çš„ï¼Œ<code>UICollectionViewController</code>ï¼Œç­‰ç­‰ã€‚é‚£ä¹ˆä½ å°±å¯èƒ½ä¼šå¯¹è¿™äº›æ§åˆ¶å™¨å†å•ç‹¬çš„å†™ä¸Šé¢çš„ä»£ç äº†ã€‚</p><p>  å¥½ä¸å®¹æ˜“å°†æ•´ä¸ªé¡¹ç›®æ”¹è¿‡æ¥äº†ï¼Œç„¶åæŸå¤©ï¼Œå…¬å¸æ¥äº†ä¸€ä½æ–°äººï¼Œä½ å‘Šè¯‰ä»–æ‰€æœ‰çš„ç±»éƒ½è¦ç»§æ‰¿è‡ªä½ å†™çš„é‚£ä¸ªåŸºç±»ï¼Œæ–°æ‰‹æ€»æ˜¯ä¼šä¸ç»æ„åœ°çŠ¯é”™è¯¯(<strong>ä¹Ÿæœ‰å¯èƒ½æ˜¯äººå®¶è¿˜æ²¡æœ‰ä¹ æƒ¯</strong>)ï¼Œæœ‰äº›ç±»å¿˜è®°ç»§æ‰¿äº†ï¼ŒåæœŸæ’æŸ¥èµ·æ¥è´¹åŠ›è´¹æ—¶ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¥½åœ°è§£å†³æ–¹å¼å‘¢ï¼Ÿ<strong>æ–¹å¼ä¸‰</strong>å°±å¯ä»¥å¤„ç†è¿™ç§é—®é¢˜ã€‚</p></li><li><p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨<code>Method Swizzling</code>å®ç°ï¼Œç»™<code>UIViewController</code>å†™ä¸€ä¸ªåˆ†ç±»ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;UIViewController+Help.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIViewController</span> (<span class="title">Help</span>)</span></span><br><span class="line">+(<span class="type">void</span>)load &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</span><br><span class="line">        Class <span class="keyword">class</span> = [<span class="keyword">self</span> <span class="keyword">class</span>];</span><br><span class="line">        methodSwizzling(<span class="keyword">class</span>, <span class="keyword">@selector</span>(viewWillAppear:), <span class="keyword">@selector</span>(scott_viewWillAppear:));</span><br><span class="line">        methodSwizzling(<span class="keyword">class</span>, <span class="keyword">@selector</span>(viewWillDisappear:), <span class="keyword">@selector</span>(scott_viewWillDisappear:));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> methodSwizzling(Class <span class="keyword">class</span>, SEL originSelector, SEL swizzSelector)&#123;</span><br><span class="line">    Method originMethod = class_getInstanceMethod(<span class="keyword">class</span>, originSelector);</span><br><span class="line">    Method swizzMethod = class_getInstanceMethod(<span class="keyword">class</span>, swizzSelector);</span><br><span class="line">    <span class="type">BOOL</span> isAddMethod = class_addMethod(<span class="keyword">class</span>, originSelector, method_getImplementation(swizzMethod), method_getTypeEncoding(swizzMethod));</span><br><span class="line">    <span class="keyword">if</span> (isAddMethod) &#123;</span><br><span class="line">        class_replaceMethod(<span class="keyword">class</span>, swizzSelector, method_getImplementation(originMethod), method_getTypeEncoding(originMethod));</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        method_exchangeImplementations(originMethod, swizzMethod);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)scott_viewWillAppear:(<span class="type">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">self</span> scott_viewWillAppear:animated];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;è°ƒç”¨è‡ªå®šä¹‰viewWillAppear&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)scott_viewWillDisappear:(<span class="type">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">self</span> scott_viewWillDisappear:animated];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;è°ƒç”¨è‡ªå®šä¹‰viewWillDissappear&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-5-å­—å…¸è½¬æ¨¡å‹"><a href="#3-5-å­—å…¸è½¬æ¨¡å‹" class="headerlink" title="3.5 å­—å…¸è½¬æ¨¡å‹"></a>3.5 å­—å…¸è½¬æ¨¡å‹</h3><p>è¿™ä¸ªå•ç‹¬å¼€ä¸€ç¯‡ç»™å¤§å®¶è®²è®²å§ã€‚</p><h2 id="å››ã€ç»“æŸè¯­"><a href="#å››ã€ç»“æŸè¯­" class="headerlink" title="å››ã€ç»“æŸè¯­"></a>å››ã€ç»“æŸè¯­</h2><p>å¸Œæœ›é€šè¿‡æœ¬æ–‡èƒ½è®©å¤§å®¶å­¦ä¹ åˆ°ä¸€äº›å…³äºRuntimeçš„çŸ¥è¯†ï¼Œå¦‚æœæœ‰ä»€ä¹ˆç–‘é—®ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·è®¨è®ºã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;ä¹‹å‰åœ¨çœ‹ä¸€äº›ç¬¬ä¸‰æ–¹æºç çš„æ—¶å€™ï¼Œæ—¶ä¸æ—¶çš„èƒ½ç¢°åˆ°ä¸€äº›å…³äºè¿è¡Œæ—¶ç›¸å…³çš„ä»£ç ã€‚äºæ˜¯ä¹ï¼Œå°±é˜…è¯»äº†ä¸€äº›å…³äºè¿è¡Œæ—¶çš„æ–‡ç« ï¼Œæ„Ÿè§‰å†™çš„éƒ½ä¸é”™ï¼Œå†™æ­¤ç¯‡æ–‡ç« ä¸ºäº†è®°å½•ä¸€ä¸‹ï¼ŒåŒæ—¶ä¹Ÿé‡æ–°å­¦ä¹ ä¸€éã€‚&lt;/p&gt;
&lt;h2 id=&quot;äºŒã€Runtimeç®€ä»‹&quot;&gt;&lt;a href=&quot;#äºŒã€Runtimeç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;äºŒã€Runtimeç®€ä»‹&quot;&gt;&lt;/a&gt;äºŒã€Runtimeç®€ä»‹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Runtimeç®€ç§°è¿è¡Œæ—¶ï¼ŒOCå°±æ˜¯è¿è¡Œæ—¶æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;Cè¯­è¨€ä¸­å‡½æ•°çš„è°ƒç”¨åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šå†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹äºOCæ¥è¯´ï¼Œå±äºåŠ¨æ€è°ƒç”¨è¿‡ç¨‹ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å¹¶ä¸èƒ½å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œåªæœ‰çœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰ä¼šæ ¹æ®å‡½æ•°çš„åç§°æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;äº‹å®è¯æ˜ï¼š&lt;ol&gt;
&lt;li&gt;åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOCå¯ä»¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°å¹¶æœªå®ç°ï¼Œåªè¦ç”³æ˜å°±ä¸ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒCè¯­è¨€è°ƒç”¨æœªå®ç°çš„å‡½æ•°å°±ä¼šæŠ¥é”™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://example.com/tags/iOS/"/>
    
    <category term="Runtime" scheme="http://example.com/tags/Runtime/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªå®šä¹‰è½¬åœºè¯¦è§£(ä¸€)</title>
    <link href="http://example.com/post/a0e5cd1a.html"/>
    <id>http://example.com/post/a0e5cd1a.html</id>
    <published>2016-06-11T12:08:15.000Z</published>
    <updated>2023-12-02T10:27:22.241Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>æœ¬æ–‡æ˜¯æˆ‘å­¦ä¹ äº†onevcatçš„<a href="https://onevcat.com/2013/10/vc-transition-in-ios7/">è¿™ç¯‡</a>è½¬åœºå…¥é—¨åšçš„ä¸€ç‚¹ç¬”è®°ã€‚</p></blockquote><span id="more"></span><p>ä»Šå¤©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰è½¬åœºï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« å°†è¦å®ç°çš„ä¸€ä¸ªæ•ˆæœå›¾å§ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BD%AC%E5%9C%BA011.gif" alt="å›¾1"></p><h2 id="è¿‡ç¨‹è¯¦è§£"><a href="#è¿‡ç¨‹è¯¦è§£" class="headerlink" title="è¿‡ç¨‹è¯¦è§£"></a>è¿‡ç¨‹è¯¦è§£</h2><h4 id="çƒ­èº«å‡†å¤‡"><a href="#çƒ­èº«å‡†å¤‡" class="headerlink" title="çƒ­èº«å‡†å¤‡"></a>çƒ­èº«å‡†å¤‡</h4><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œé¦–å…ˆç”¨storyboardå¿«é€Ÿçš„åˆ›å»ºä¸¤ä¸ªæ§åˆ¶å™¨ï¼Œä¸€ä¸ªä½œä¸ºä¸»æ§åˆ¶å™¨ï¼Œå«<code>ViewController</code>ï¼Œå¦å¤–ä¸€ä¸ªä½œä¸ºpresentå‡ºæ¥çš„æ§åˆ¶å™¨ï¼Œå«<code>PresentViewController</code>ï¼Œå¹¶ä¸”ç”¨autoLayoutå¿«é€Ÿæ­å»ºå¥½ç•Œé¢ã€‚å°±åƒè¿™æ ·ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BD%AC%E5%9C%BA012.png" alt="å›¾2"></p><p>æˆ‘ä»¬å…ˆåšå¥½ç‚¹å‡»<code>ViewController</code>ä¸Šé¢çš„æŒ‰é’®ï¼Œpresentå‡º<code>PresentViewController</code>ï¼Œç‚¹å‡»<code>PresentViewController</code>ä¸Šé¢çš„æŒ‰é’®ï¼Œdismissæ‰<code>PresentViewController</code>çš„é€»è¾‘ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š</p><ol><li><p>å› ä¸ºæ­¤å¤„æˆ‘ä½¿ç”¨äº†<code>segue</code>ï¼Œæ‰€ä»¥åœ¨<code>ViewController</code>æŒ‰é’®ç‚¹å‡»çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™æ ·è°ƒç”¨å°±è¡Œã€‚</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - ç‚¹æˆ‘å¼¹å‡º</span></span><br><span class="line">-(<span class="keyword">IBAction</span>)presentBtnClick:(<span class="built_in">UIButton</span> *)sender &#123;</span><br><span class="line">    [<span class="keyword">self</span> performSegueWithIdentifier:<span class="string">@&quot;PresentSegue&quot;</span> sender:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬å¹³æ—¶å†™dismissçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šæ˜¯åœ¨ç¬¬äºŒä¸ªæ§åˆ¶å™¨ä¸­ç›´æ¥ç»™selfå‘é€<code>dismissViewController</code>çš„ç›¸å…³æ–¹æ³•ã€‚åœ¨ç°åœ¨çš„SDKä¸­ï¼Œå¦‚æœå½“å‰çš„VCæ˜¯è¢«æ˜¾ç¤ºçš„è¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¼šè¢«ç›´æ¥è½¬å‘åˆ°æ˜¾ç¤ºå®ƒçš„VCå»ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®ç°ï¼Œè¿åäº†ç¨‹åºè®¾è®¡çš„å“²å­¦ï¼Œä¹Ÿå¾ˆå®¹æ˜“æ‰åˆ°å‘é‡Œã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨æ ‡å‡†çš„<code>delegate</code> æ–¹å¼å®ç° <code>dismiss</code> ã€‚</p></li></ol><p>é¦–å…ˆæˆ‘ä»¬åœ¨<code>PresentViewController</code>æ§åˆ¶å™¨ä¸­ç”³æ˜ä¸€ä¸ªä»£ç†æ–¹æ³•ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@class</span> <span class="title">PresentViewController</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">PresentViewControllerDelegate</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line">- (<span class="type">void</span>)dismissViewController:(PresentViewController *)viewController;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PresentViewController</span> : <span class="title">UIViewController</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="type">id</span>&lt;PresentViewControllerDelegate&gt; delegate;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>åœ¨buttonçš„ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œè®©ä»£ç†å»å®Œæˆå…³é—­å½“å‰æ§åˆ¶å™¨çš„å·¥ä½œã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - ç‚¹å‡»å…³é—­</span></span><br><span class="line">- (<span class="keyword">IBAction</span>)closeBtnClick:(<span class="built_in">UIButton</span> *)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(dismissViewController:)]) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.delegate dismissViewController:<span class="keyword">self</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸æ­¤åŒæ—¶ï¼Œåœ¨<code>ViewController</code>ä¸­éœ€è¦è®¾ç½®<code>PresentViewController</code>çš„ä»£ç†,å¹¶ä¸”å®ç°ä»£ç†æ–¹æ³•ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)prepareForSegue:(<span class="built_in">UIStoryboardSegue</span> *)segue sender:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> ([segue.identifier isEqualToString:<span class="string">@&quot;PresentSegue&quot;</span>]) &#123;</span><br><span class="line">        PresentViewController *presetVC = segue.destinationViewController;</span><br><span class="line">        presetVC.delegate = <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - PresentViewControllerDelegate</span></span><br><span class="line">- (<span class="type">void</span>)dismissViewController:(PresentViewController *)viewController &#123;</span><br><span class="line">    [<span class="keyword">self</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€ä¸ªåŸºæœ¬çš„è½¬åœºå°±å®Œæˆäº†(è¿™ä¹Ÿæ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ä¸€ä¸ªæ•ˆæœ)ã€‚like this:<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BD%AC%E5%9C%BA013.gif" alt="å›¾3"></p><h4 id="ä¸»è¦å†…å®¹"><a href="#ä¸»è¦å†…å®¹" class="headerlink" title="ä¸»è¦å†…å®¹"></a>ä¸»è¦å†…å®¹</h4><p>æ¥ä¸‹æ¥ï¼Œè¦æ¥è§¦æˆ‘ä»¬ä»Šå¤©è¦è®²çš„ä¸»è¦å†…å®¹äº†ï¼Œæˆ‘ä»¬ç”¨iOS7ä¸­ä¸€ä¸ªæ–°çš„ç±»<code>UIViewControllerTransitioning</code>æ¥å®ç°è‡ªå®šä¹‰è½¬åœºã€‚</p><hr><h6 id="UIViewControllerAnimatedTransitioning"><a href="#UIViewControllerAnimatedTransitioning" class="headerlink" title="UIViewControllerAnimatedTransitioning"></a>UIViewControllerAnimatedTransitioning</h6><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®ç°äº†åè®®åä¸º<code>UIViewControllerAnimatedTransitioning</code>çš„å¯¹è±¡ã€‚åˆ›å»ºä¸€ä¸ªç±»å«åš<code>PresentAnimation</code>ç»§æ‰¿äº<code>NSObject</code>å¹¶ä¸”å®ç°äº†<code>UIViewControllerAnimatedTransitioning</code>åè®®ã€‚(<strong>æ³¨æ„ï¼šéœ€è¦å¯¼å…¥UIKitæ¡†æ¶</strong>)</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PresentAnimation</span> : <span class="title">NSObject</span>&lt;<span class="title">UIViewControllerAnimatedTransitioning</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåè®®è´Ÿè´£è½¬åœºçš„å…·ä½“å†…å®¹ã€‚å¼€å‘è€…åœ¨åšè‡ªå®šä¹‰åˆ‡æ¢æ•ˆæœæ—¶å¤§éƒ¨é—¨ä»£ç ä¼šæ˜¯ç”¨æ¥å®ç°è¿™ä¸ªåè®®çš„ï¼Œè¿™ä¸ªåè®®åªæœ‰ä¸¤ä¸ªæ–¹æ³•å¿…é¡»è¦å®ç°çš„ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›åŠ¨ç”»çš„æ—¶é—´</span></span><br><span class="line">- (<span class="built_in">NSTimeInterval</span>)transitionDuration:(<span class="keyword">nullable</span> <span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext;</span><br><span class="line"><span class="comment">// åœ¨è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™å°†è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å¯¹äºåˆ‡æ¢æ—¶çš„UIViewçš„è®¾ç½®å’ŒåŠ¨ç”»éƒ½åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®Œæˆã€‚</span></span><br><span class="line">- (<span class="type">void</span>)animateTransition:(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext;</span><br></pre></td></tr></table></figure><p>å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSTimeInterval</span>)transitionDuration:(<span class="keyword">nullable</span> <span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.8</span>f;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">void</span>)animateTransition:(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext &#123;</span><br><span class="line">    <span class="comment">// 1.æˆ‘ä»¬éœ€è¦å¾—åˆ°å‚ä¸åˆ‡æ¢çš„ä¸¤ä¸ªViewControllerçš„ä¿¡æ¯ï¼Œä½¿ç”¨contextçš„æ–¹æ³•æ‹¿åˆ°å®ƒä»¬çš„å‚ç…§ï¼›</span></span><br><span class="line">    <span class="built_in">UIViewController</span> *toVC = [transitionContext viewControllerForKey:<span class="built_in">UITransitionContextToViewControllerKey</span>];   </span><br><span class="line">    <span class="comment">// 2.å¯¹äºè¦å‘ˆç°çš„VCï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒä»å±å¹•ä¸‹æ–¹å‡ºç°ï¼Œå› æ­¤å°†åˆå§‹ä½ç½®è®¾ç½®åˆ°å±å¹•ä¸‹è¾¹ç¼˜ï¼›</span></span><br><span class="line">    <span class="built_in">CGRect</span> finaRect = [transitionContext finalFrameForViewController:toVC];</span><br><span class="line">    toVC.view.frame = <span class="built_in">CGRectOffset</span>(finaRect, <span class="number">0</span>, [<span class="built_in">UIScreen</span> mainScreen].bounds.size.height);</span><br><span class="line">    <span class="comment">// 3.å°†viewæ·»åŠ åˆ°containerViewä¸­ï¼›</span></span><br><span class="line">    [[transitionContext containerView] addSubview:toVC.view];</span><br><span class="line">    <span class="comment">// 4.å¼€å§‹åŠ¨ç”»ã€‚è¿™é‡Œçš„åŠ¨ç”»æ—¶é—´é•¿åº¦å’Œåˆ‡æ¢æ—¶é—´é•¿åº¦ä¸€è‡´ã€‚usingSpringWithDampingçš„UIViewåŠ¨ç”»APIæ˜¯iOS7æ–°åŠ å…¥çš„ï¼Œæè¿°äº†ä¸€ä¸ªæ¨¡æ‹Ÿå¼¹ç°§åŠ¨ä½œçš„åŠ¨ç”»æ›²çº¿ï¼›</span></span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:[<span class="keyword">self</span> transitionDuration:transitionContext] delay:<span class="number">0.0</span> usingSpringWithDamping:<span class="number">0.6</span> initialSpringVelocity:<span class="number">0.0</span> options:<span class="built_in">UIViewAnimationOptionCurveLinear</span> animations:^&#123;</span><br><span class="line">        toVC.view.frame = finaRect;</span><br><span class="line">    &#125; completion:^(<span class="type">BOOL</span> finished) &#123;</span><br><span class="line">        <span class="comment">// 5.åœ¨åŠ¨ç”»ç»“æŸåæˆ‘ä»¬å¿…é¡»å‘contextæŠ¥å‘ŠVCåˆ‡æ¢å®Œæˆï¼Œæ˜¯å¦æˆåŠŸã€‚ç³»ç»Ÿåœ¨æ¥æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯åï¼Œå°†å¯¹VCçŠ¶æ€è¿›è¡Œç»´æŠ¤ã€‚</span></span><br><span class="line">        [transitionContext completeTransition:<span class="literal">YES</span>];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ç‚¹</strong></p><blockquote><p><code>UITransitionContextToViewControllerKey</code>ä¸<code>UITransitionContextFromViewControllerKey</code><br>æ¯”å¦‚ä»A present å‡ºBï¼Œæ­¤æ—¶Aæ˜¯<code>FromViewController</code>,Bæ˜¯<code>ToViewController</code><br>å¦‚æœä»B dismiss åˆ°Aï¼Œæ­¤æ—¶Aæ˜¯<code>ToViewController</code>,Bæ˜¯<code>FromViewController</code></p></blockquote><h6 id="UIViewControllerTransitioningDelegate"><a href="#UIViewControllerTransitioningDelegate" class="headerlink" title="UIViewControllerTransitioningDelegate"></a>UIViewControllerTransitioningDelegate</h6><p>è¿™ä¸ªæ¥å£çš„ä½œç”¨æ¯”è¾ƒå•ä¸€ï¼Œåœ¨éœ€è¦VCåˆ‡æ¢çš„æ—¶å€™ç³»ç»Ÿä¼šå‘å®ç°äº†è¿™ä¸ªæ¥å£çš„å¯¹è±¡è¯¢é—®æ˜¯å¦éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰è½¬åœºæ•ˆæœã€‚<br>æ‰€ä»¥ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„åœ°æ–¹æ˜¯ç›´æ¥åœ¨ä¸»æ§åˆ¶å™¨<code>ViewController</code>ä¸­å®ç°è¿™ä¸ªåè®®ã€‚</p><p>åœ¨<code>ViewController</code>ä¸­å®Œæˆå¦‚ä¸‹ä»£ç :</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()&lt;<span class="title">PresentViewControllerDelegate</span>,<span class="title">UIViewControllerTransitioningDelegate</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) PresentAnimation *presentAnimation;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - æ‡’åŠ è½½</span></span><br><span class="line">- (PresentAnimation *)presentAnimation &#123;</span><br><span class="line">    <span class="keyword">if</span> (!_presentAnimation) &#123;</span><br><span class="line">        _presentAnimation = [[PresentAnimation alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _presentAnimation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - UIViewControllerTransitioningDelegate</span></span><br><span class="line">- (<span class="type">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForPresentedController:(<span class="built_in">UIViewController</span> *)presented presentingController:(<span class="built_in">UIViewController</span> *)presenting sourceController:(<span class="built_in">UIViewController</span> *)source &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.presentAnimation;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">void</span>)prepareForSegue:(<span class="built_in">UIStoryboardSegue</span> *)segue sender:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> ([segue.identifier isEqualToString:<span class="string">@&quot;PresentSegue&quot;</span>]) &#123;</span><br><span class="line">        PresentViewController *presetVC = segue.destinationViewController;</span><br><span class="line">        presetVC.delegate = <span class="keyword">self</span>;</span><br><span class="line">        presetVC.transitioningDelegate = <span class="keyword">self</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨çœ‹ä¸‹æˆ‘ä»¬çš„æ•ˆæœï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BD%AC%E5%9C%BA014.gif" alt="å›¾4"><br>ç›¸å¯¹äºä¸Šé¢ç³»ç»Ÿè‡ªå¸¦çš„æ•ˆæœæ¥è¯´ï¼Œæˆ‘ä»¬åœ¨presentå‡ºç¬¬äºŒä¸ªæ§åˆ¶å™¨çš„æ—¶å€™ï¼Œå¸¦æœ‰å¼¹ç°§æ•ˆæœã€‚</p><h4 id="æ‰‹åŠ¿é©±åŠ¨ç™¾åˆ†æ¯”åˆ‡æ¢"><a href="#æ‰‹åŠ¿é©±åŠ¨ç™¾åˆ†æ¯”åˆ‡æ¢" class="headerlink" title="æ‰‹åŠ¿é©±åŠ¨ç™¾åˆ†æ¯”åˆ‡æ¢"></a>æ‰‹åŠ¿é©±åŠ¨ç™¾åˆ†æ¯”åˆ‡æ¢</h4><p>ç°åœ¨æˆ‘ä»¬å¢åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯ç”¨æ‰‹åŠ¿æ»‘åŠ¨æ¥dismissï¼Œé€šä¿—çš„è¯´ï¼Œå°±æ˜¯è®©presentå‡ºæ¥çš„é‚£ä¸ªæ§åˆ¶å™¨ä½¿ç”¨æ‰‹åŠ¿dismissã€‚</p><ol><li><p>åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿è‡ª<code>UIPercentDrivenInteractiveTransition</code></p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PanInteractiveTransition</span> : <span class="title">UIPercentDrivenInteractiveTransition</span></span></span><br><span class="line">-(<span class="type">void</span>)panToDismiss:(<span class="built_in">UIViewController</span> *)viewController;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><ul><li>æˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•æä¾›ç»™å¤–éƒ¨ç±»è°ƒç”¨ã€‚è®©å¤–éƒ¨ç±»å¯ä»¥çœ‹åˆ°ä¼ å…¥æ‰‹åŠ¿dismissçš„VCçš„å…¥å£ã€‚</li></ul></li><li><p>æ—¢ç„¶ä¼ å…¥äº†è¿™ä¸ªéœ€è¦æ‰‹åŠ¿dismissçš„VC,æˆ‘ä»¬å°±éœ€è¦ä¿å­˜ä¸€ä¸‹ï¼Œæ–¹ä¾¿å½“å‰ç±»åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªå±æ€§æ¥ä¿å­˜è¿™ä¸ªä¼ å…¥çš„VCã€‚</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="string">&quot;PanInteractiveTransition.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PanInteractiveTransition</span> ()</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIViewController</span> *presentVC;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">PanInteractiveTransition</span></span></span><br><span class="line">-(<span class="type">void</span>)panToDismiss:(<span class="built_in">UIViewController</span> *)viewController &#123;</span><br><span class="line">    <span class="keyword">self</span>.presentVC = viewController;</span><br><span class="line">    <span class="built_in">UIPanGestureRecognizer</span> *panGestR = [[<span class="built_in">UIPanGestureRecognizer</span> alloc] initWithTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(panGestureAction:)];</span><br><span class="line">    [<span class="keyword">self</span>.presentVC.view addGestureRecognizer:panGestR];</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - panGestureAction</span></span><br><span class="line">-(<span class="type">void</span>)panGestureAction:(<span class="built_in">UIPanGestureRecognizer</span> *)pan &#123;</span><br><span class="line">    <span class="built_in">CGPoint</span> transition = [pan translationInView:<span class="keyword">self</span>.presentVC.view];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%.2f&quot;</span>,transition.y);</span><br><span class="line">    <span class="keyword">switch</span> (pan.state) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateBegan</span>:&#123;</span><br><span class="line">           [<span class="keyword">self</span>.presentVC dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">       &#125;</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateChanged</span>:&#123;  <span class="comment">//</span></span><br><span class="line">            <span class="built_in">CGFloat</span> percent = MIN(<span class="number">1.0</span>, transition.y/<span class="number">300</span>);</span><br><span class="line">            [<span class="keyword">self</span> updateInteractiveTransition:percent];</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateCancelled</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateEnded</span>:&#123;</span><br><span class="line">            <span class="keyword">if</span> (pan.state == <span class="built_in">UIGestureRecognizerStateCancelled</span>) &#123;   <span class="comment">// æ‰‹åŠ¿å–æ¶ˆ</span></span><br><span class="line">                [<span class="keyword">self</span> cancelInteractiveTransition];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                [<span class="keyword">self</span> finishInteractiveTransition];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å’Œåˆ›å»º<code>PresentAnimation</code>ä¸€æ ·ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸€ä¸ª<code>DismissAnimation</code>ç±»</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DismissAnimation</span> : <span class="title">NSObject</span>&lt;<span class="title">UIViewControllerAnimatedTransitioning</span>&gt;</span></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">DismissAnimation</span></span></span><br><span class="line">-(<span class="built_in">NSTimeInterval</span>)transitionDuration:(<span class="keyword">nullable</span> <span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.4</span>f;</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)animateTransition:(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext &#123;</span><br><span class="line">    <span class="built_in">UIViewController</span> *fromVC = [transitionContext viewControllerForKey:<span class="built_in">UITransitionContextFromViewControllerKey</span>];</span><br><span class="line">    <span class="built_in">UIViewController</span> *toVC = [transitionContext viewControllerForKey:<span class="built_in">UITransitionContextToViewControllerKey</span>];</span><br><span class="line">    <span class="built_in">CGRect</span> initRect = [transitionContext initialFrameForViewController:fromVC];</span><br><span class="line">    <span class="built_in">CGRect</span> finalRect = <span class="built_in">CGRectOffset</span>(initRect, <span class="number">0</span>, [<span class="built_in">UIScreen</span> mainScreen].bounds.size.height);</span><br><span class="line">    <span class="built_in">UIView</span> *contrainerView = [transitionContext containerView];</span><br><span class="line">    [contrainerView addSubview:toVC.view];</span><br><span class="line">    [contrainerView sendSubviewToBack:toVC.view];</span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:[<span class="keyword">self</span> transitionDuration:transitionContext] animations:^&#123;</span><br><span class="line">        fromVC.view.frame = finalRect;</span><br><span class="line">    &#125; completion:^(<span class="type">BOOL</span> finished) &#123;</span><br><span class="line">        [transitionContext completeTransition:<span class="literal">YES</span>];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li><li><p>æœ€åï¼Œæˆ‘ä»¬åœ¨ä¸»æ§åˆ¶å™¨ä¸­æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿é©±åŠ¨çš„å¯¹è±¡ï¼Œä¸€ä¸ªdismissè½¬åœºçš„å¯¹è±¡ï¼Œç„¶åæ‡’åŠ è½½ã€‚</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-(PanInteractiveTransition *)paninterTransition &#123;</span><br><span class="line">    <span class="keyword">if</span> (!_paninterTransition) &#123;</span><br><span class="line">        _paninterTransition = [[PanInteractiveTransition alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _paninterTransition;</span><br><span class="line">&#125;</span><br><span class="line">-(DismissAnimation *)dismissAnimation &#123;</span><br><span class="line">    <span class="keyword">if</span> (!_dismissAnimation) &#123;</span><br><span class="line">        _dismissAnimation = [[DismissAnimation alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _dismissAnimation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - UIViewControllerTransitioningDelegate</span></span><br><span class="line">-(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animationControllerForDismissedController:(<span class="built_in">UIViewController</span> *)dismissed &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.dismissAnimation;</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerInteractiveTransitioning</span>&gt;)interactionControllerForDismissal:(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerAnimatedTransitioning</span>&gt;)animator &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.paninterTransition;</span><br><span class="line">&#125;</span><br><span class="line">-(<span class="type">void</span>)prepareForSegue:(<span class="built_in">UIStoryboardSegue</span> *)segue sender:(<span class="type">id</span>)sender &#123;</span><br><span class="line">    <span class="keyword">if</span> ([segue.identifier isEqualToString:<span class="string">@&quot;PresentSegue&quot;</span>]) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        [<span class="keyword">self</span>.paninterTransition panToDismiss:presetVC];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="å®Œå–„"><a href="#å®Œå–„" class="headerlink" title="å®Œå–„"></a>å®Œå–„</h4><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œä¼šå‘ç°ä»¥ä¸Šä»£ç å°½ç®¡å¯ä»¥æ‰‹åŠ¿é©±åŠ¨äº†ï¼Œä½†æ˜¯ç‚¹å‡»æŒ‰é’®dismissçš„åŠŸèƒ½æ— æ³•ä½¿ç”¨äº†ã€‚è¿™æ˜¯å› ä¸º<strong>å¦‚æœåªæ˜¯è¿”å›self.paninterTransitionï¼Œé‚£ä¹ˆç‚¹å‡»æŒ‰é’®dismissçš„åŠ¨ç”»å°±ä¼šå¤±æ•ˆï¼›å¦‚æœåªæ˜¯è¿”å›nil,é‚£ä¹ˆæ‰‹åŠ¿æ»‘åŠ¨çš„æ•ˆæœå°†ä¼šå¤±æ•ˆ</strong>ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°±å¾—åˆ†æƒ…å†µè€ƒè™‘ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®Œå–„ä¸€ä¸‹ã€‚</p><ol><li><p>ç»™<code>PanInteractiveTransition</code>æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦å¤„äºåˆ‡æ¢è¿‡ç¨‹ä¸­(ç”¨äºåˆ¤æ–­ä½¿ç”¨çš„æ˜¯ç‚¹å‡»æŒ‰é’®dismissè¿˜æ˜¯æ‰‹åŠ¿é©±åŠ¨æ¥dismissçš„)</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜¯å¦å¤„äºåˆ‡æ¢è¿‡ç¨‹ä¸­</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>, <span class="keyword">getter</span>=isInteracting) <span class="type">BOOL</span> interacting;</span><br></pre></td></tr></table></figure></li><li><p>ç»™<code>PanInteractiveTransition</code>æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦éœ€è¦dismiss(ç”¨äºå½“æ‰‹åŠ¿æ»‘åŠ¨åˆ°è¶…è¿‡æŒ‡å®šé«˜åº¦ä¹‹åï¼Œå°±ä¼šdismissï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡ï¼Œå°±ä¼šè¿˜åŸ)</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>, <span class="keyword">getter</span>=isShouldComplete) <span class="type">BOOL</span> shouldComplete;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>PanInteractiveTransition</code>ä¸­çš„<code>panGestureAction:</code>æ–¹æ³•ï¼š</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="type">void</span>)panGestureAction:(<span class="built_in">UIPanGestureRecognizer</span> *)pan &#123;</span><br><span class="line">    <span class="built_in">CGPoint</span> transition = [pan translationInView:pan.view];</span><br><span class="line">    <span class="keyword">switch</span> (pan.state) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateBegan</span>:&#123;</span><br><span class="line">            <span class="keyword">self</span>.interacting = <span class="literal">YES</span>;</span><br><span class="line">            [<span class="keyword">self</span>.presentVC dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateChanged</span>:&#123;  <span class="comment">//</span></span><br><span class="line">            <span class="built_in">CGFloat</span> percent = fmin(fmax(transition.y/<span class="number">300.0</span>, <span class="number">0.0</span>), <span class="number">1.0</span>);</span><br><span class="line">            <span class="keyword">self</span>.shouldComplete = (percent &gt; <span class="number">0.5</span>);</span><br><span class="line">            [<span class="keyword">self</span> updateInteractiveTransition:percent];</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateCancelled</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">UIGestureRecognizerStateEnded</span>:&#123;</span><br><span class="line">            <span class="keyword">self</span>.interacting = <span class="literal">NO</span>;</span><br><span class="line">            <span class="comment">// å¦‚æœä¸‹ç§»çš„è·ç¦»å°äº300æˆ–è€…å–æ¶ˆéƒ½å½“åšå–æ¶ˆ</span></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">self</span>.isShouldComplete || pan.state == <span class="built_in">UIGestureRecognizerStateCancelled</span>) &#123;   <span class="comment">// æ‰‹åŠ¿å–æ¶ˆ</span></span><br><span class="line">                [<span class="keyword">self</span> cancelInteractiveTransition];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                [<span class="keyword">self</span> finishInteractiveTransition];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦å¤–è¿˜æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯éœ€è¦ä¿®æ”¹<code>DismissAnimation</code>ä¸­çš„ä¸€å¤„ä»£ç :</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="type">void</span>)animateTransition:(<span class="type">id</span> &lt;<span class="built_in">UIViewControllerContextTransitioning</span>&gt;)transitionContext &#123;</span><br><span class="line">    <span class="built_in">UIViewController</span> *fromVC = [transitionContext viewControllerForKey:<span class="built_in">UITransitionContextFromViewControllerKey</span>];</span><br><span class="line">    <span class="built_in">UIViewController</span> *toVC = [transitionContext viewControllerForKey:<span class="built_in">UITransitionContextToViewControllerKey</span>];  </span><br><span class="line">    <span class="built_in">CGRect</span> initRect = [transitionContext initialFrameForViewController:fromVC];</span><br><span class="line">    <span class="built_in">CGRect</span> finalRect = <span class="built_in">CGRectOffset</span>(initRect, <span class="number">0</span>, [<span class="built_in">UIScreen</span> mainScreen].bounds.size.height);</span><br><span class="line">    <span class="built_in">UIView</span> *contrainerView = [transitionContext containerView];</span><br><span class="line">    [contrainerView addSubview:toVC.view];</span><br><span class="line">    [contrainerView sendSubviewToBack:toVC.view];</span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:[<span class="keyword">self</span> transitionDuration:transitionContext] animations:^&#123;</span><br><span class="line">        fromVC.view.frame = finalRect;</span><br><span class="line">    &#125; completion:^(<span class="type">BOOL</span> finished) &#123;</span><br><span class="line">    <span class="comment">// æ­¤å¤„åšäº†ä¿®æ”¹ï¼Œç”±ä¹‹å‰çš„[transitionContext completeTransition:YES];</span></span><br><span class="line">      [transitionContext completeTransition:![transitionContext transitionWasCancelled]];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>ok,åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªè‡ªå®šä¹‰è½¬åœºåŠ¨ç”»å°±ç®—äº†å®Œæˆäº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯æˆ‘å­¦ä¹ äº†onevcatçš„&lt;a href=&quot;https://onevcat.com/2013/10/vc-transition-in-ios7/&quot;&gt;è¿™ç¯‡&lt;/a&gt;è½¬åœºå…¥é—¨åšçš„ä¸€ç‚¹ç¬”è®°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="è½¬åœºåŠ¨ç”»" scheme="http://example.com/tags/%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>Xcodeå¸¸ç”¨å¿«æ·é”®</title>
    <link href="http://example.com/post/5a50c6f9.html"/>
    <id>http://example.com/post/5a50c6f9.html</id>
    <published>2016-06-08T13:02:31.000Z</published>
    <updated>2023-12-02T10:27:22.196Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>â€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€,æŒæ¡äº†Xcodeçš„å¿«æ·é”®æ“ä½œï¼Œèƒ½å¤Ÿå¤§å¤§çš„æå‡è‡ªå·±å¼€å‘çš„é€Ÿåº¦ï¼Œå› æ­¤åœ¨è¿™é‡Œåšä¸€ä¸‹æ•´ç†ã€‚å¯èƒ½ä¹Ÿæœ‰äº›å¿«æ·é”®æ˜¯æ²¡æœ‰å†™åˆ°çš„ã€‚</p><span id="more"></span><h2 id="äºŒã€è§†å›¾å¯¼èˆª"><a href="#äºŒã€è§†å›¾å¯¼èˆª" class="headerlink" title="äºŒã€è§†å›¾å¯¼èˆª"></a>äºŒã€è§†å›¾å¯¼èˆª</h2><ul><li>Command + 0 æ˜¾ç¤º&#x2F;éšè—xcodeå·¦è¾¹å¯¼èˆª</li><li>Command + Option + 0 æ˜¾ç¤º&#x2F;éšè—xcodeå³è¾¹å¯¼èˆª</li><li>Command + Shift + 0 æ‰“å¼€å®˜æ–¹æ–‡æ¡£</li><li>Command + 1&#x2F;2&#x2F;3&#x2F;4&#x2F;5&#x2F;6&#x2F;7&#x2F;8 è·³è½¬åˆ°å·¦æ ä¸åŒçš„æ ç›®</li><li>Command + Shift + y æ˜¾ç¤º&#x2F;éšè—æ§åˆ¶å°</li><li>Command + Option + enter å°†ä»£ç åŒºåˆ†æˆ2ä»½</li><li>Command + enter å°†ä»£ç åŒºåˆå¹¶æˆ1ä»½</li></ul><h2 id="ä¸‰ã€æ–‡æœ¬ç¼–è¾‘"><a href="#ä¸‰ã€æ–‡æœ¬ç¼–è¾‘" class="headerlink" title="ä¸‰ã€æ–‡æœ¬ç¼–è¾‘"></a>ä¸‰ã€æ–‡æœ¬ç¼–è¾‘</h2><ul><li>Command + Shift + N æ–°å»ºä¸€ä¸ªé¡¹ç›®</li><li>Command + N æ–°å»ºä¸€ä¸ªç±»</li><li>Command + &#x2F; æ³¨é‡Šé€‰ä¸­çš„ä»£ç </li><li>Ctrl + i å°†ä»£ç æ ¼å¼åŒ–</li><li>Command + [ å’Œ Command + ] å·¦å³ç¼©è¿›</li><li>Command + Option + [ å’Œ Command + Option + ] å½“å‰è¡Œä¸Šä¸‹ç§»åŠ¨</li><li>Command + Option + Left&#x2F;Right æŠ˜å ã€å±•å¼€å½“å‰ä»£ç æ®µ</li><li>Command + Option + Shift + Left&#x2F;Right æŠ˜å &#x2F;å±•å¼€è¯¥æ–‡ä»¶å†…æ‰€æœ‰ä»£ç å—</li><li>Command + z åé€€ä»£ç </li><li>Command + Shift + z å‰è¿›ä»£ç </li></ul><h2 id="å››ã€æ–‡ä»¶è·³è½¬"><a href="#å››ã€æ–‡ä»¶è·³è½¬" class="headerlink" title="å››ã€æ–‡ä»¶è·³è½¬"></a>å››ã€æ–‡ä»¶è·³è½¬</h2><ul><li>Command + Control + Up&#x2F;Down .hå’Œ.måˆ‡æ¢</li><li>Command + Control + Left&#x2F;Right æµè§ˆå†å²è®°å½•åˆ‡æ¢</li><li>Command + Control + j è·³è½¬åˆ°å®šä¹‰å¤„</li><li>Command + Shift + O æ–‡ä»¶æœç´¢</li><li>Command + Shift + j å®šä½åˆ°å½“å‰ç±»æ‰€åœ¨çš„ä½ç½®</li></ul><h2 id="äº”ã€æœç´¢"><a href="#äº”ã€æœç´¢" class="headerlink" title="äº”ã€æœç´¢"></a>äº”ã€æœç´¢</h2><ul><li>Command + Shift + f å…¨å±€æœç´¢</li><li>Command + e æœç´¢å½“å‰é€‰ä¸­çš„å•è¯</li><li>Command + f å½“å‰æ–‡ä»¶å†…æœç´¢</li><li>Command + Option + f å½“å‰æ–‡ä»¶å†…æ›¿æ¢</li><li>Command + g æœç´¢ä¸‹ä¸€ä¸ª</li></ul><h2 id="å…­ã€tab"><a href="#å…­ã€tab" class="headerlink" title="å…­ã€tab"></a>å…­ã€tab</h2><ul><li>Command + t æ–°å»ºä¸€ä¸ªtab</li><li>Command + w å…³é—­å½“å‰tab</li><li>Command + Shift + [ å’Œ Command + Shift + ] å·¦å³åˆ‡æ¢tab</li></ul><h2 id="ä¸ƒã€Scheme"><a href="#ä¸ƒã€Scheme" class="headerlink" title="ä¸ƒã€Scheme"></a>ä¸ƒã€Scheme</h2><ul><li>Command + Shift + , ç¼–è¾‘scheme,é€‰æ‹©debugæˆ–release</li></ul><h2 id="å…«ã€è°ƒè¯•"><a href="#å…«ã€è°ƒè¯•" class="headerlink" title="å…«ã€è°ƒè¯•"></a>å…«ã€è°ƒè¯•</h2><ul><li>fn + F6 è·³åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤</li><li>fn + F7 è·³è¿›ä¸‹ä¸€æ¡æŒ‡ä»¤(è·³è¿›å†…éƒ¨å‡½æ•°)</li><li>Command + Control + y ç»§ç»­è¿è¡Œ</li><li>Command + | æ‰“å¼€&#x2F;å…³é—­æ–­ç‚¹</li><li>Command + y å…¨å±€æ¿€æ´»æˆ–è€…ç¦ç”¨æ‰€æœ‰çš„æ–­ç‚¹</li></ul><h2 id="ä¹ã€å…¶ä»–"><a href="#ä¹ã€å…¶ä»–" class="headerlink" title="ä¹ã€å…¶ä»–"></a>ä¹ã€å…¶ä»–</h2><ul><li>Command + B ç¼–è¯‘é¡¹ç›®</li><li>Command + R è¿è¡Œé¡¹ç›®</li><li>Command + . ç»ˆæ­¢è¿è¡Œé¡¹ç›®</li><li>Command + k æ¸…ç©ºxcodeæ§åˆ¶å°ä¸­çš„å†…å®¹</li><li>Command + Shift + k æ¸…ç†é¡¹ç›®(é’ˆå¯¹Xcode)</li><li>Command + Shift + k éšè—&#x2F;æ˜¾ç¤ºé”®ç›˜(é’ˆå¯¹æ¨¡æ‹Ÿå™¨)</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;â€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€,æŒæ¡äº†Xcodeçš„å¿«æ·é”®æ“ä½œï¼Œèƒ½å¤Ÿå¤§å¤§çš„æå‡è‡ªå·±å¼€å‘çš„é€Ÿåº¦ï¼Œå› æ­¤åœ¨è¿™é‡Œåšä¸€ä¸‹æ•´ç†ã€‚å¯èƒ½ä¹Ÿæœ‰äº›å¿«æ·é”®æ˜¯æ²¡æœ‰å†™åˆ°çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Xcode" scheme="http://example.com/categories/Xcode/"/>
    
    
    <category term="Xcode" scheme="http://example.com/tags/Xcode/"/>
    
  </entry>
  
  <entry>
    <title>ReactiveCocoa(äºŒ)</title>
    <link href="http://example.com/post/8615c104.html"/>
    <id>http://example.com/post/8615c104.html</id>
    <published>2016-06-07T13:37:02.000Z</published>
    <updated>2023-12-02T10:27:22.192Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>é€šè¿‡<a href="http://lzascott.github.io/2016/06/06/ReactiveCocoa-%E4%B8%80/">ReactiveCocoa(ä¸€)</a>çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¤§å®¶å¯¹ReactiveCocoaæœ‰äº†ä¸€äº›åŸºæœ¬è®¤è¯†å§ã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å­¦ä¹ ReactiveCocoaçš„ä¸€äº›åŸºæœ¬ä½¿ç”¨å§ï¼</p><span id="more"></span><h2 id="äºŒã€ReactiveCocoaåŸºæœ¬ä½¿ç”¨"><a href="#äºŒã€ReactiveCocoaåŸºæœ¬ä½¿ç”¨" class="headerlink" title="äºŒã€ReactiveCocoaåŸºæœ¬ä½¿ç”¨"></a>äºŒã€ReactiveCocoaåŸºæœ¬ä½¿ç”¨</h2><h3 id="2-1-ä»£æ›¿ä»£ç†"><a href="#2-1-ä»£æ›¿ä»£ç†" class="headerlink" title="2.1 ä»£æ›¿ä»£ç†"></a>2.1 ä»£æ›¿ä»£ç†</h3><p>åœ¨ReactiveCocoa(ä¸€)ä¸­è®²åˆ°å¯ä»¥é€šè¿‡<code>RACSubject</code>ä»£æ›¿ä»£ç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>rac_signalForSelector</code>åŒæ ·ä»£æ›¿ä»£ç†ã€‚</p><h4 id="2-1-1-ä»£ç æ¼”ç»ƒ"><a href="#2-1-1-ä»£ç æ¼”ç»ƒ" class="headerlink" title="2.1.1 ä»£ç æ¼”ç»ƒ"></a>2.1.1 ä»£ç æ¼”ç»ƒ</h4><pre><code>// éœ€æ±‚ï¼šè‡ªå®šä¹‰redView,ç›‘å¬çº¢è‰²viewä¸­æŒ‰é’®ç‚¹å‡»// ä¹‹å‰éƒ½æ˜¯éœ€è¦é€šè¿‡ä»£ç†ç›‘å¬ï¼Œç»™çº¢è‰²Viewæ·»åŠ ä¸€ä¸ªä»£ç†å±æ€§ï¼Œç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œé€šçŸ¥ä»£ç†åšäº‹æƒ…// rac_signalForSelector:æŠŠè°ƒç”¨æŸä¸ªå¯¹è±¡çš„æ–¹æ³•çš„ä¿¡æ¯è½¬æ¢æˆä¿¡å·ï¼Œå°±è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±ä¼šå‘é€ä¿¡å·ã€‚// è¿™é‡Œè¡¨ç¤ºåªè¦redVè°ƒç”¨btnClick:,å°±ä¼šå‘å‡ºä¿¡å·ï¼Œè®¢é˜…å°±å¥½äº†ã€‚[[redV rac_signalForSelector:@selector(btnClick:)] subscribeNext:^(id x) &#123;    NSLog(@&quot;ç‚¹å‡»çº¢è‰²æŒ‰é’®&quot;);&#125;];</code></pre><h3 id="2-2-ä»£æ›¿KVO"><a href="#2-2-ä»£æ›¿KVO" class="headerlink" title="2.2 ä»£æ›¿KVO"></a>2.2 ä»£æ›¿KVO</h3><p><code>rac_valuesAndChangesForKeyPath:</code>ç”¨äºç›‘å¬æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§å‘ç”Ÿå˜åŒ–ã€‚</p><h4 id="2-2-1-ä»£ç æ¼”ç»ƒ"><a href="#2-2-1-ä»£ç æ¼”ç»ƒ" class="headerlink" title="2.2.1 ä»£ç æ¼”ç»ƒ"></a>2.2.1 ä»£ç æ¼”ç»ƒ</h4><pre><code>// éœ€æ±‚:æ¯ç‚¹å‡»ä¸€æ¬¡ï¼Œå¹´é¾„å¢åŠ ä¸€æ¬¡// å®šä¹‰ä¸€ä¸ªageå±æ€§- (void)obserVer &#123;    [[self rac_valuesForKeyPath:@&quot;age&quot; observer:nil] subscribeNext:^(id x) &#123;        NSLog(@&quot;%@&quot;,x);    &#125;];&#125;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;    self.age ++;&#125;</code></pre><h3 id="2-3-ç›‘å¬äº‹ä»¶"><a href="#2-3-ç›‘å¬äº‹ä»¶" class="headerlink" title="2.3 ç›‘å¬äº‹ä»¶"></a>2.3 ç›‘å¬äº‹ä»¶</h3><p><code>rac_signalForControlEvents:</code>ç”¨äºç›‘å¬æŸä¸ªäº‹ä»¶ã€‚</p><h4 id="2-3-1-ä»£ç æ¼”ç»ƒ"><a href="#2-3-1-ä»£ç æ¼”ç»ƒ" class="headerlink" title="2.3.1 ä»£ç æ¼”ç»ƒ"></a>2.3.1 ä»£ç æ¼”ç»ƒ</h4><pre><code>// æŠŠæŒ‰é’®ç‚¹å‡»äº‹ä»¶è½¬åŒ–æˆä¿¡å·ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œå°±ä¼šå‘é€ä¿¡å·[[self.btn rac_signalForControlEvents:UIControlEventTouchUpInside] subscribeNext:^(id x) &#123;        NSLog(@&quot;ç›‘å¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶&quot;); &#125;];</code></pre><h3 id="2-4-ä»£æ›¿é€šçŸ¥"><a href="#2-4-ä»£æ›¿é€šçŸ¥" class="headerlink" title="2.4 ä»£æ›¿é€šçŸ¥"></a>2.4 ä»£æ›¿é€šçŸ¥</h3><p><code>rac_addObserverForName:</code>ç”¨äºç›‘å¬æŸä¸ªé€šçŸ¥ã€‚</p><h4 id="2-4-1-ä»£ç æ¼”ç»ƒ"><a href="#2-4-1-ä»£ç æ¼”ç»ƒ" class="headerlink" title="2.4.1 ä»£ç æ¼”ç»ƒ"></a>2.4.1 ä»£ç æ¼”ç»ƒ</h4><pre><code>[[[NSNotificationCenter defaultCenter] rac_addObserverForName:UIKeyboardWillShowNotification object:nil] subscribeNext:^(id x) &#123;    NSLog(@&quot;å¼¹å‡ºé”®ç›˜&quot;);&#125;];</code></pre><h3 id="2-5-ç›‘å¬æ–‡æœ¬æ¡†æ–‡å­—æ”¹å˜"><a href="#2-5-ç›‘å¬æ–‡æœ¬æ¡†æ–‡å­—æ”¹å˜" class="headerlink" title="2.5 ç›‘å¬æ–‡æœ¬æ¡†æ–‡å­—æ”¹å˜"></a>2.5 ç›‘å¬æ–‡æœ¬æ¡†æ–‡å­—æ”¹å˜</h3><p><code>rac_textSignal:</code>ç”¨äºç›‘å¬æ–‡æœ¬æ¡†æ–‡å­—å‘ç”Ÿæ”¹å˜</p><h4 id="2-5-1-ä»£ç æ¼”ç»ƒ"><a href="#2-5-1-ä»£ç æ¼”ç»ƒ" class="headerlink" title="2.5.1 ä»£ç æ¼”ç»ƒ"></a>2.5.1 ä»£ç æ¼”ç»ƒ</h4><pre><code>[[self.textField rac_textSignal] subscribeNext:^(id x) &#123;    NSLog(@&quot;text:%@&quot;,x);&#125;];</code></pre><h3 id="2-6-å¤„ç†å½“ç•Œé¢æœ‰å¤šä¸ªè¯·æ±‚æ—¶ï¼Œéœ€è¦éƒ½è·å–åˆ°æ•°æ®ï¼Œæ‰èƒ½å±•ç¤ºç•Œé¢"><a href="#2-6-å¤„ç†å½“ç•Œé¢æœ‰å¤šä¸ªè¯·æ±‚æ—¶ï¼Œéœ€è¦éƒ½è·å–åˆ°æ•°æ®ï¼Œæ‰èƒ½å±•ç¤ºç•Œé¢" class="headerlink" title="2.6 å¤„ç†å½“ç•Œé¢æœ‰å¤šä¸ªè¯·æ±‚æ—¶ï¼Œéœ€è¦éƒ½è·å–åˆ°æ•°æ®ï¼Œæ‰èƒ½å±•ç¤ºç•Œé¢"></a>2.6 å¤„ç†å½“ç•Œé¢æœ‰å¤šä¸ªè¯·æ±‚æ—¶ï¼Œéœ€è¦éƒ½è·å–åˆ°æ•°æ®ï¼Œæ‰èƒ½å±•ç¤ºç•Œé¢</h3><p><code>rac_liftSelector:withSignalsFromArray:Signals:</code>å½“ä¼ å…¥çš„Signals(ä¿¡å·æ•°ç»„)ï¼Œæ¯ä¸€ä¸ªsignaléƒ½è‡³å°‘sendNextè¿‡ä¸€æ¬¡ï¼Œå°±ä¼šå»è§¦å‘selectorå‚æ•°çš„æ–¹æ³•ã€‚</p><p><strong>æ³¨æ„ï¼šå‡ ä¸ªä¿¡å·ï¼Œå‚æ•°ä¸€çš„æ–¹æ³•å°±å‡ ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°å¯¹åº”ä¿¡å·å‘å‡ºçš„æ•°æ®ï¼Œå¦åˆ™è¿è¡Œæ—¶ä¼šæŠ¥é”™ã€‚</strong></p><h4 id="2-6-1-ä»£ç æ¼”ç»ƒ"><a href="#2-6-1-ä»£ç æ¼”ç»ƒ" class="headerlink" title="2.6.1 ä»£ç æ¼”ç»ƒ"></a>2.6.1 ä»£ç æ¼”ç»ƒ</h4><pre><code>- (void)test&#123;    // åˆ›å»ºä¿¡å·A    RACSignal *signalA = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;            NSLog(@&quot;æ•°æ®è¯·æ±‚1&quot;);            [subscriber sendNext:@&quot;å‘é€è¯·æ±‚1å›æ¥çš„æ•°æ®&quot;];            return [RACDisposable disposableWithBlock:^&#123;                NSLog(@&quot;éšä¾¿å†™å†™&quot;);            &#125;];        &#125;];        // åˆ›å»ºä¿¡å·B    RACSignal *signalB = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;        NSLog(@&quot;æ•°æ®è¯·æ±‚2&quot;);        [subscriber sendNext:@&quot;å‘é€è¯·æ±‚2å›æ¥çš„æ•°æ®&quot;];        return nil;    &#125;];        // RAC:å°±å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªä¿¡å·æœ‰æ²¡æœ‰éƒ½å‘å‡ºå†…å®¹    // SignalsFromArray:ç›‘å¬å“ªäº›ä¿¡å·çš„å‘å‡º    // å½“signalsæ•°ç»„ä¸­çš„æ‰€æœ‰ä¿¡å·éƒ½å‘é€sendNextå°±ä¼šè§¦å‘æ–¹æ³•è°ƒç”¨è€…(self)çš„selector    // æ³¨æ„:selectoræ–¹æ³•çš„å‚æ•°ä¸èƒ½ä¹±å†™,æœ‰å‡ ä¸ªä¿¡å·å°±å¯¹åº”å‡ ä¸ªå‚æ•°    // ä¸éœ€è¦ä¸»åŠ¨è®¢é˜…signalA,signalB,æ–¹æ³•å†…éƒ¨ä¼šè‡ªåŠ¨è®¢é˜…    [self rac_liftSelector:@selector(doneNextWithA:andB:) withSignalsFromArray:@[signalA,signalB]];&#125;- (void)doneNextWithA:(NSString *)a andB:(NSString *)b &#123;        NSLog(@&quot;è¯·æ±‚å®Œæˆï¼Œæ›´æ–°UI--a:%@,b:%@&quot;,a,b);&#125;</code></pre><h2 id="ä¸‰ã€ReactiveCocoaå¸¸è§å®"><a href="#ä¸‰ã€ReactiveCocoaå¸¸è§å®" class="headerlink" title="ä¸‰ã€ReactiveCocoaå¸¸è§å®"></a>ä¸‰ã€ReactiveCocoaå¸¸è§å®</h2><h3 id="3-1-RAC-TARGET-â€¦"><a href="#3-1-RAC-TARGET-â€¦" class="headerlink" title="3.1 RAC(TARGET, â€¦)"></a>3.1 RAC(TARGET, â€¦)</h3><ul><li>ç”¨äºç»™æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ç»‘å®šã€‚  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åªè¦æ–‡æœ¬æ¡†æ–‡å­—æ”¹å˜ï¼Œå°±ä¼šä¿®æ”¹labelçš„æ–‡å­—</span><br><span class="line">   RAC(self.labelView,text) = _textField.rac_textSignal;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-2-RACObserve-TARGET-KEYPATH"><a href="#3-2-RACObserve-TARGET-KEYPATH" class="headerlink" title="3.2 RACObserve(TARGET,KEYPATH)"></a>3.2 RACObserve(TARGET,KEYPATH)</h3><ul><li>ç›‘å¬æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§ï¼Œè¿”å›çš„æ˜¯ä¿¡å·  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[RACObserve(self, age) subscribeNext:^(id x) &#123;</span><br><span class="line">  NSLog(@&quot;%@&quot;,x);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-3-weakify-Obj-å’Œ-strongify-Obj"><a href="#3-3-weakify-Obj-å’Œ-strongify-Obj" class="headerlink" title="3.3 @weakify(Obj)å’Œ@strongify(Obj)"></a>3.3 @weakify(Obj)å’Œ@strongify(Obj)</h3><ul><li>ä¸€èˆ¬éƒ½æ˜¯æˆå¯¹å‡ºç°ï¼Œä¸ºäº†é¿å…å¼•èµ·å¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼çš„ï¼Œå’Œblockçš„ä½¿ç”¨ç±»ä¼¼ã€‚  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@weakify(self);</span><br><span class="line">   [[_redView rac_signalForSelector:@selector(btnClick:)] subscribeNext:^(id x) &#123;</span><br><span class="line">       @strongify(self);</span><br><span class="line">       NavViewController *navVC = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:nil] instantiateViewControllerWithIdentifier:NSStringFromClass([NavViewController class])];</span><br><span class="line">       [self.navigationController pushViewController:navVC animated:YES];</span><br><span class="line">  &#125;];</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-4-RACTuplePack"><a href="#3-4-RACTuplePack" class="headerlink" title="3.4 RACTuplePack"></a>3.4 RACTuplePack</h3><ul><li>æŠŠæ•°æ®åŒ…è£…æˆRACTupleï¼ˆå…ƒç»„ç±»ï¼‰  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æŠŠå‚æ•°ä¸­çš„æ•°æ®åŒ…è£…æˆå…ƒç»„</span><br><span class="line">  RACTuple *tuple = RACTuplePack(@&quot;Scott_Mr&quot;,@20);</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-5-RACTupleUnpack"><a href="#3-5-RACTupleUnpack" class="headerlink" title="3.5 RACTupleUnpack"></a>3.5 RACTupleUnpack</h3><ul><li>æŠŠRACTupleï¼ˆå…ƒç»„ç±»ï¼‰è§£åŒ…æˆå¯¹åº”çš„æ•°æ®ã€‚  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// è§£åŒ…å…ƒç»„ï¼Œä¼šæŠŠå…ƒç»„çš„å€¼ï¼ŒæŒ‰é¡ºåºç»™å‚æ•°é‡Œé¢çš„å˜é‡èµ‹å€¼</span><br><span class="line">   // name = @&quot;Scott_Mr&quot; age = @20</span><br><span class="line">   RACTupleUnpack(NSString *name,NSNumber *age) = tuple;</span><br><span class="line">   NSLog(@&quot;%@,%@&quot;,name,age);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;é€šè¿‡&lt;a href=&quot;http://lzascott.github.io/2016/06/06/ReactiveCocoa-%E4%B8%80/&quot;&gt;ReactiveCocoa(ä¸€)&lt;/a&gt;çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¤§å®¶å¯¹ReactiveCocoaæœ‰äº†ä¸€äº›åŸºæœ¬è®¤è¯†å§ã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥å­¦ä¹ ReactiveCocoaçš„ä¸€äº›åŸºæœ¬ä½¿ç”¨å§ï¼&lt;/p&gt;</summary>
    
    
    
    <category term="ReactiveCocoa" scheme="http://example.com/categories/ReactiveCocoa/"/>
    
    
    <category term="ReactiveCocoa" scheme="http://example.com/tags/ReactiveCocoa/"/>
    
  </entry>
  
  <entry>
    <title>ReactiveCocoa(ä¸€)</title>
    <link href="http://example.com/post/29245a66.html"/>
    <id>http://example.com/post/29245a66.html</id>
    <published>2016-06-06T15:32:32.000Z</published>
    <updated>2023-12-02T10:27:22.191Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>ä¹‹å‰æ€»å¬åˆ«äººè¯´ä»€ä¹ˆReactive Cocoa + MVVMï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°è®²è§£Reactive Cocoaç›¸å…³çš„èµ„æ–™ã€‚ç»“æœè¿›å…¥æ–°å…¬å¸ï¼Œé¡¹ç›®é‡Œé¢æœ‰éƒ¨åˆ†ä»£ç ä½¿ç”¨åˆ°äº†Reactive Cocoa,æ‰€ä»¥ç¬”è€…åœ¨è¿™è®°å½•è‡ªå·±å­¦ä¹ Reactive Cocoaçš„ç¬”è®°ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å¤§å®¶é€šè¿‡é˜…è¯»è¿™ç¯‡æ–‡ç« èƒ½å­¦åˆ°ç‚¹ä»€ä¹ˆã€‚</p><span id="more"></span><h2 id="äºŒã€Reactive-Cocoaç®€ä»‹"><a href="#äºŒã€Reactive-Cocoaç®€ä»‹" class="headerlink" title="äºŒã€Reactive Cocoaç®€ä»‹"></a>äºŒã€Reactive Cocoaç®€ä»‹</h2><p>Reactive Cocoa(ç®€ç§°RACï¼ŒPS:<strong>ä¸æ˜¯ARC(è‡ªåŠ¨å¼•ç”¨è®¡æ•°)</strong>),æ˜¯ç”±Githubå¼€æºçš„ä¸€ä¸ªåº”ç”¨äºiOSå’ŒOSå¼€å‘çš„æ–°æ¡†æ¶ï¼Œcocoaæ˜¯è‹¹æœæ•´å¥—æ¡†æ¶çš„ç®€ç§°ï¼Œå› æ­¤å¾ˆå¤šè‹¹æœæ¡†æ¶éƒ½å–œæ¬¢ä»¥cocoaç»“å°¾ã€‚</p><h2 id="ä¸‰ã€Reactive-Cocoaä½œç”¨"><a href="#ä¸‰ã€Reactive-Cocoaä½œç”¨" class="headerlink" title="ä¸‰ã€Reactive Cocoaä½œç”¨"></a>ä¸‰ã€Reactive Cocoaä½œç”¨</h2><ul><li>åœ¨æˆ‘ä»¬iOSå¼€å‘ä¸­ï¼Œå½“æŸäº›äº‹ä»¶å“åº”çš„æ—¶å€™ï¼Œéœ€è¦å¤„ç†æŸäº›ä¸šåŠ¡é€»è¾‘ï¼Œè¿™äº›äº‹æƒ…éƒ½ä»¥ä¸åŒçš„æ–¹å¼æ¥å¤„ç†ã€‚</li><li>æˆ‘ä»¬ä¹‹å‰ç†Ÿæ‚‰çš„äº‹ä»¶å¤„ç†æ–¹å¼æœ‰ï¼šactionã€delegateã€kvoã€blockä»¥åŠnotificationã€‚å…¶å®è¿™äº›äº‹ä»¶éƒ½å¯ä»¥ä½¿ç”¨RACå¤„ç†ã€‚</li><li>RACä¸ºäº‹ä»¶æä¾›äº†å¾ˆå¤šå¤„ç†æ–¹æ³•ï¼Œè€Œä¸”åˆ©ç”¨RACå¤„ç†äº‹ä»¶å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥æŠŠéœ€è¦å¤„ç†çš„äº‹ä»¶å’Œç›‘å¬äº‹ä»¶çš„ä»£ç æ”¾åˆ°ä¸€å—ï¼Œè¿™æ ·ä¾¿äºæˆ‘ä»¬ç®¡ç†ï¼Œå°±ä¸éœ€è¦è·³è½¬åˆ°å¯¹åº”çš„æ–¹æ³•é‡Œé¢ã€‚éå¸¸ç¬¦åˆæˆ‘ä»¬å¼€å‘ä¸­<strong>é«˜èšåˆï¼Œä½è€¦åˆ</strong>çš„æ€æƒ³ã€‚</li></ul><h2 id="å››ã€ç¼–ç¨‹æ€æƒ³"><a href="#å››ã€ç¼–ç¨‹æ€æƒ³" class="headerlink" title="å››ã€ç¼–ç¨‹æ€æƒ³"></a>å››ã€ç¼–ç¨‹æ€æƒ³</h2><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸ªæ¡†æ¶ï¼Œè¿˜æ˜¯æœ‰å¿…è¦å…ˆäº†è§£å®ƒçš„<strong>ç¼–ç¨‹æ€æƒ³</strong>ã€‚</p><p>å…ˆäº†è§£ä¸€ä¸‹æˆ‘ä»¬å·²çŸ¥çš„ç¼–ç¨‹æ€æƒ³ï¼š</p><p><strong>1ã€é¢å‘è¿‡ç¨‹</strong>: å¤„ç†äº‹æƒ…ä»¥è¿‡ç¨‹ä¸ºä¸­å¿ƒï¼Œä¸€æ­¥ä¸€æ­¥çš„å®ç°ã€‚</p><p><strong>2ã€é¢å‘å¯¹è±¡</strong>: ä¸‡ç‰©çš†å¯¹è±¡ã€‚</p><p><strong>3ã€é“¾å¼ç¼–ç¨‹</strong>: æ˜¯å°†å¤šä¸ªæ“ä½œé€šè¿‡ç‚¹å·(.)è¿æ¥èµ·æ¥æˆä¸ºä¸€å¥ä»£ç ï¼Œä½¿ä»£ç å¯è¯»æ€§å¥½ã€‚å¦‚ï¼š</p><pre><code>add(1).add(2).add(3) </code></pre><p>é“¾å¼ç¼–ç¨‹ç‰¹ç‚¹: æ–¹æ³•çš„è¿”å›å€¼æ˜¯blockï¼Œblockå¿…é¡»æœ‰è¿”å›å€¼(å¯¹è±¡æœ¬èº«),blockå‚æ•°å°±æ˜¯æˆ‘ä»¬è¦æ“ä½œçš„å€¼</p><ul><li>ä»£è¡¨ä½œ: masonryæ¡†æ¶</li></ul><p>æ¨¡ä»¿masonryæ¡†æ¶ï¼Œä»¿å†™ä¸€ä¸ªåŠ æ³•è®¡ç®—å™¨ï¼Œç»ƒä¹ é“¾å¼ç¼–ç¨‹æ€æƒ³</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºä¸€ä¸ªNSObjectçš„åˆ†ç±»,  .hä»£ç ï¼š</span><br><span class="line">@class CaculatorMaker;</span><br><span class="line">@interface NSObject (Caculator)</span><br><span class="line"></span><br><span class="line">+ (int)makeCaculator:(void(^)(CaculatorMaker *make))caculator;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">// .mä»£ç </span><br><span class="line">@implementation NSObject (Caculator)</span><br><span class="line"></span><br><span class="line">+ (int)makeCaculator:(void(^)(CaculatorMaker *make))caculator &#123;</span><br><span class="line">CaculatorMaker *maker = [[CaculatorMaker alloc] init];</span><br><span class="line"></span><br><span class="line">caculator(maker);</span><br><span class="line"></span><br><span class="line">return maker.result;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**********************************************************/</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºä¸€ä¸ªCaculatorMakerç±»ï¼Œ .hä»£ç ï¼š</span><br><span class="line">@interface CaculatorMaker : NSObject</span><br><span class="line"></span><br><span class="line">@property (nonatomic, assign) int result;</span><br><span class="line"></span><br><span class="line">- (CaculatorMaker *(^)(int result))add;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">//.mä»£ç </span><br><span class="line">- (CaculatorMaker *(^)(int result))add &#123;</span><br><span class="line">     return ^(int result)&#123;</span><br><span class="line">        _result += result;</span><br><span class="line">        return self;</span><br><span class="line">     &#125;;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">//è°ƒç”¨ï¼š</span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">[super viewDidLoad];</span><br><span class="line">int result = [NSObject makeCaculator:^(CaculatorMaker *make) &#123;</span><br><span class="line">make.add(1).add(3);</span><br><span class="line">&#125;];</span><br><span class="line">NSLog(@&quot;%d&quot;,result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4ã€å“åº”å¼ç¼–ç¨‹</strong>:ä¸éœ€è¦è€ƒè™‘è°ƒç”¨é¡ºåºï¼Œåªéœ€è¦è€ƒè™‘è°ƒç”¨ç»“æœï¼Œç±»ä¼¼äºè´è¶æ•ˆåº”ï¼Œäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œä¼šå½±å“å¾ˆå¤šä¸œè¥¿ï¼Œè¿™äº›äº‹ä»¶å°±åƒæµä¸€æ ·å‘é€å‡ºå»ï¼Œæœ€åå½±å“ç»“æœã€‚</p><ul><li>ä»£è¡¨ä½œ: KVOçš„è¿ç”¨</li></ul><p><strong>5ã€å‡½æ•°å¼ç¼–ç¨‹</strong>:æ˜¯æŠŠæ“ä½œå°½é‡ä½¿ç”¨ä¸€ç³»åˆ—çš„å‡½æ•°æˆ–è€…æ–¹æ³•è°ƒç”¨</p><ul><li>å‡½æ•°å¼ç¼–ç¨‹ç‰¹ç‚¹: æ¯ä¸ªæ–¹æ³•å¿…é¡»æœ‰è¿”å›å€¼(å¯¹è±¡æœ¬èº«)ï¼ŒæŠŠblockå½“åšå‚æ•°ï¼Œblockå‚æ•°å°±æ˜¯éœ€è¦æ“ä½œçš„å€¼ï¼Œblockè¿”å›å€¼å°±æ˜¯æ“ä½œç»“æœ</li></ul><p>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å®ç°ä¸€ä¸ªåŠ æ³•è®¡ç®—å™¨å¹¶è‡ªå¸¦åˆ¤æ–­æ˜¯å¦ç­‰äºæŸä¸ªå€¼çš„åŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//åˆ›å»ºä¸€ä¸ªCaculatorMakerç±»ï¼Œ.hä»£ç ï¼š</span><br><span class="line">@interface CaculatorMaker : NSObject</span><br><span class="line"></span><br><span class="line">@property (nonatomic, assign) int result;</span><br><span class="line">@property (nonatomic, assign, getter=isEqual) BOOL equal;</span><br><span class="line"></span><br><span class="line">- (CaculatorMaker *)add:(int(^)(int result))caculator;</span><br><span class="line">- (CaculatorMaker *)equal:(BOOL(^)(int result))caculator;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//.mä»£ç ï¼š</span><br><span class="line">@implementation CaculatorMaker</span><br><span class="line"></span><br><span class="line">- (CaculatorMaker *)add:(int(^)(int result))caculator &#123;</span><br><span class="line">_result = caculator(_result);</span><br><span class="line">return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (CaculatorMaker *)equal:(BOOL(^)(int result))caculator &#123;</span><br><span class="line">_equal = caculator(_result);</span><br><span class="line">return self;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//è°ƒç”¨:</span><br><span class="line">CaculatorMaker *maker = [[CaculatorMaker alloc] init];</span><br><span class="line">BOOL isEqual = [[[maker add:^int(int result) &#123;</span><br><span class="line">result += 5;</span><br><span class="line">return result;</span><br><span class="line">&#125;] equal:^BOOL(int result) &#123;</span><br><span class="line">return result == 5;</span><br><span class="line">&#125;] isEqual];</span><br><span class="line">    </span><br><span class="line">NSLog(@&quot;%d&quot;,isEqual);</span><br></pre></td></tr></table></figure><p><strong>Reactive Cocoaç¼–ç¨‹æ€æƒ³</strong></p><p>Reactive Cocoaç»“åˆäº†å‡ ç§ç¼–ç¨‹æ€æƒ³:</p><ul><li><strong>å“åº”å¼ç¼–ç¨‹æ€æƒ³</strong></li><li><strong>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</strong></li></ul><p>æ‰€ä»¥ï¼Œä½ æœ‰å¯èƒ½å¬è¯´Reactive Cocoaè¢«æè¿°ä¸º<strong>å‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)<strong>ã€‚<br>    ä»¥åä½¿ç”¨Reactive Cocoaè§£å†³é—®é¢˜æ—¶ï¼Œå°±ä¸éœ€è¦è€ƒè™‘è°ƒç”¨é¡ºåºï¼Œç›´æ¥è€ƒè™‘ç»“æœï¼ŒæŠŠæ¯æ¬¡æ“ä½œéƒ½å†™æˆä¸€ç³»åˆ—åµŒå¥—æ–¹æ³•æˆ–è€…å‡½æ•°ï¼Œä½¿ä»£ç </strong>é«˜èšåˆ</strong>ï¼Œæ˜“äºç®¡ç†ã€‚</p><h2 id="äº”ã€Reactive-CocoaåŸºç¡€ç±»"><a href="#äº”ã€Reactive-CocoaåŸºç¡€ç±»" class="headerlink" title="äº”ã€Reactive CocoaåŸºç¡€ç±»"></a>äº”ã€Reactive CocoaåŸºç¡€ç±»</h2><p>ä¸ªäººè®¤ä¸ºåœ¨Reactive Cocoaä¸­æœ€æ ¸å¿ƒçš„ç±»å°±æ˜¯<code>RACSignal</code>,æå®šè¿™ä¸ªç±»åŸºæœ¬å°±å¯ä»¥ä½¿ç”¨Reactive Cocoaå¼€å‘äº†ã€‚</p><h3 id="5-1-RACSignal"><a href="#5-1-RACSignal" class="headerlink" title="5.1 RACSignal"></a>5.1 RACSignal</h3><p><code>RACSignal:</code>ä¿¡å·ç±»ï¼Œä¸€èˆ¬è¡¨ç¤ºå°†æ¥æœ‰æ•°æ®ä¼ é€’ï¼Œåªè¦æ•°æ®æ”¹å˜ï¼Œä¿¡å·å†…éƒ¨æ¥æ”¶åˆ°æ•°æ®ï¼Œå°±ä¼šé©¬ä¸Šå‘å‡ºæ•°æ®ã€‚</p><h4 id="5-1-1-RACSignalç®€å•ä½¿ç”¨ï¼š"><a href="#5-1-1-RACSignalç®€å•ä½¿ç”¨ï¼š" class="headerlink" title="5.1.1 RACSignalç®€å•ä½¿ç”¨ï¼š"></a>5.1.1 RACSignalç®€å•ä½¿ç”¨ï¼š</h4><pre><code>// RACSignalä½¿ç”¨æ­¥éª¤ï¼š// 1.åˆ›å»ºä¿¡å· + (RACSignal *)createSignal:(RACDisposable * (^)(id&lt;RACSubscriber&gt; subscriber))didSubscribe// 2.è®¢é˜…ä¿¡å·,æ‰ä¼šæ¿€æ´»ä¿¡å·. - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock// 3.å‘é€ä¿¡å· - (void)sendNext:(id)value// RACSignalåº•å±‚å®ç°ï¼š// 1.åˆ›å»ºä¿¡å·ï¼Œé¦–å…ˆæŠŠdidSubscribeä¿å­˜åˆ°ä¿¡å·ä¸­ï¼Œè¿˜ä¸ä¼šè§¦å‘ã€‚// 2.å½“ä¿¡å·è¢«è®¢é˜…ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨signalçš„subscribeNext:nextBlock// 2.2 subscribeNextå†…éƒ¨ä¼šåˆ›å»ºè®¢é˜…è€…subscriberï¼Œå¹¶ä¸”æŠŠnextBlockä¿å­˜åˆ°subscriberä¸­ã€‚// 2.1 subscribeNextå†…éƒ¨ä¼šè°ƒç”¨siganlçš„didSubscribe// 3.siganlçš„didSubscribeä¸­è°ƒç”¨[subscriber sendNext:@1];// 3.1 sendNextåº•å±‚å…¶å®å°±æ˜¯æ‰§è¡Œsubscriberçš„nextBlock// 1.åˆ›å»ºä¿¡å·RACSignal *siganl = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;    // blockè°ƒç”¨æ—¶åˆ»ï¼šæ¯å½“æœ‰è®¢é˜…è€…è®¢é˜…ä¿¡å·ï¼Œå°±ä¼šè°ƒç”¨blockã€‚    // 3.å‘é€ä¿¡å·    [subscriber sendNext:@1];    // å¦‚æœä¸åœ¨å‘é€æ•°æ®ï¼Œæœ€å¥½å‘é€ä¿¡å·å®Œæˆï¼Œå†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨[RACDisposable disposable]å–æ¶ˆè®¢é˜…ä¿¡å·ã€‚    [subscriber sendCompleted];    return [RACDisposable disposableWithBlock:^&#123;        // blockè°ƒç”¨æ—¶åˆ»ï¼šå½“ä¿¡å·å‘é€å®Œæˆæˆ–è€…å‘é€é”™è¯¯ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªblock,å–æ¶ˆè®¢é˜…ä¿¡å·ã€‚        // æ‰§è¡Œå®ŒBlockåï¼Œå½“å‰ä¿¡å·å°±ä¸åœ¨è¢«è®¢é˜…äº†ã€‚        NSLog(@&quot;ä¿¡å·è¢«é”€æ¯&quot;);    &#125;];&#125;];// 2.è®¢é˜…ä¿¡å·,æ‰ä¼šæ¿€æ´»ä¿¡å·.[siganl subscribeNext:^(id x) &#123;    // blockè°ƒç”¨æ—¶åˆ»ï¼šæ¯å½“æœ‰ä¿¡å·å‘å‡ºæ•°æ®ï¼Œå°±ä¼šè°ƒç”¨block.    NSLog(@&quot;æ¥æ”¶åˆ°æ•°æ®:%@&quot;,x);&#125;];</code></pre><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ä¿¡å·ç±»(RACSignal),åªæ˜¯è¡¨ç¤ºå½“æ•°æ®æ”¹å˜æ—¶ï¼Œä¿¡å·å†…éƒ¨ä¼šå‘å‡ºæ•°æ®ï¼Œå®ƒæœ¬èº«ä¸å…·å¤‡å‘é€ä¿¡å·çš„èƒ½åŠ›ï¼Œè€Œæ˜¯äº¤ç»™å†…éƒ¨ä¸€ä¸ªè®¢é˜…è€…å‘é€å‡ºå»ã€‚</li><li>é»˜è®¤ä¸€ä¸ªä¿¡å·éƒ½æ˜¯å†·ä¿¡å·ï¼Œä¹Ÿå°±æ˜¯å€¼æ”¹å˜äº†ï¼Œä¹Ÿä¸ä¼šè§¦å‘ï¼Œåªæœ‰è®¢é˜…äº†è¿™ä¸ªä¿¡å·ï¼Œè¿™ä¸ªä¿¡å·æ‰ä¼šå˜ä¸ºçƒ­ä¿¡å·ï¼Œå€¼æ”¹å˜äº†æ‰ä¼šè§¦å‘ã€‚</li><li>å¦‚ä½•è®¢é˜…ä¿¡å·ï¼šè°ƒç”¨ä¿¡å·ç±»<code>RACSignal</code>çš„<code>subscribeNext</code>å°±èƒ½è®¢é˜…ã€‚</li></ul><h3 id="5-2-RACSubscriber"><a href="#5-2-RACSubscriber" class="headerlink" title="5.2 RACSubscriber"></a>5.2 RACSubscriber</h3><p><code>RACSubscriber:</code>è¡¨ç¤ºè®¢é˜…è€…çš„æ„æ€,ç”¨äºå‘é€ä¿¡å·ï¼Œè¿™æ˜¯ä¸€ä¸ªåè®®ï¼Œä¸æ˜¯ä¸€ä¸ªç±»ï¼Œåªè¦éµå®ˆè¿™ä¸ªåè®®ï¼Œå¹¶ä¸”å®ç°æ–¹æ³•æ‰èƒ½æˆä¸ºè®¢é˜…è€…ã€‚é€šè¿‡createåˆ›å»ºçš„ä¿¡å·ï¼Œéƒ½æœ‰ä¸€ä¸ªè®¢é˜…è€…ï¼Œå¸®åŠ©ä»–å‘é€æ•°æ®ã€‚</p><h3 id="5-3-RACDisposable"><a href="#5-3-RACDisposable" class="headerlink" title="5.3 RACDisposable"></a>5.3 RACDisposable</h3><p><code>RACDisposable:</code>ç”¨äºå–æ¶ˆè®¢é˜…æˆ–è€…æ¸…ç†èµ„æºï¼Œå½“ä¿¡å·å‘é€å®Œæˆæˆ–è€…å‘é€é”™è¯¯çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å®ƒã€‚</p><ul><li>ä½¿ç”¨åœºæ™¯ï¼šå½“ä¸æƒ³ç›‘å¬æŸä¸ªä¿¡å·æ—¶ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥ä¸»åŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·</li></ul><h3 id="5-4-RACSubject"><a href="#5-4-RACSubject" class="headerlink" title="5.4 RACSubject"></a>5.4 RACSubject</h3><p><code>RACSubject:</code>ä¿¡å·æä¾›è€…ï¼Œè‡ªå·±å¯ä»¥å……å½“ä¿¡å·ï¼Œåˆå¯ä»¥å‘é€ä¿¡å·ã€‚</p><ul><li>ä½¿ç”¨åœºæ™¯ï¼šé€šå¸¸ç”¨æ¥ä»£æ›¿ä»£ç†ï¼Œæœ‰äº†å®ƒï¼Œå°±ä¸éœ€è¦å®šä¹‰ä»£ç†äº†</li></ul><h4 id="5-4-1-RACSubjectç®€å•ä½¿ç”¨"><a href="#5-4-1-RACSubjectç®€å•ä½¿ç”¨" class="headerlink" title="5.4.1 RACSubjectç®€å•ä½¿ç”¨"></a>5.4.1 RACSubjectç®€å•ä½¿ç”¨</h4><pre><code>// RACSubjectä½¿ç”¨æ­¥éª¤// 1.åˆ›å»ºä¿¡å· [RACSubject subject]ï¼Œè·ŸRACSiganlä¸ä¸€æ ·ï¼Œåˆ›å»ºä¿¡å·æ—¶æ²¡æœ‰blockã€‚// 2.è®¢é˜…ä¿¡å· - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock// 3.å‘é€ä¿¡å· sendNext:(id)value// RACSubject:åº•å±‚å®ç°å’ŒRACSignalä¸ä¸€æ ·ã€‚// 1.è°ƒç”¨subscribeNextè®¢é˜…ä¿¡å·ï¼Œåªæ˜¯æŠŠè®¢é˜…è€…ä¿å­˜èµ·æ¥ï¼Œå¹¶ä¸”è®¢é˜…è€…çš„nextBlockå·²ç»èµ‹å€¼äº†ã€‚// 2.è°ƒç”¨sendNextå‘é€ä¿¡å·ï¼Œéå†åˆšåˆšä¿å­˜çš„æ‰€æœ‰è®¢é˜…è€…ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒç”¨è®¢é˜…è€…çš„nextBlockã€‚// 1.åˆ›å»ºä¿¡å·RACSubject *subject = [RACSubject subject];// 2.è®¢é˜…ä¿¡å·[subject subscribeNext:^(id x) &#123;    // blockè°ƒç”¨æ—¶åˆ»ï¼šå½“ä¿¡å·å‘å‡ºæ–°å€¼ï¼Œå°±ä¼šè°ƒç”¨.    NSLog(@&quot;ç¬¬ä¸€ä¸ªè®¢é˜…è€…%@&quot;,x);&#125;];[subject subscribeNext:^(id x) &#123;    // blockè°ƒç”¨æ—¶åˆ»ï¼šå½“ä¿¡å·å‘å‡ºæ–°å€¼ï¼Œå°±ä¼šè°ƒç”¨.    NSLog(@&quot;ç¬¬äºŒä¸ªè®¢é˜…è€…%@&quot;,x);&#125;];// 3.å‘é€ä¿¡å·[subject sendNext:@&quot;1&quot;];</code></pre><h4 id="5-4-2-RACSubjectä»£æ›¿ä»£ç†"><a href="#5-4-2-RACSubjectä»£æ›¿ä»£ç†" class="headerlink" title="5.4.2 RACSubjectä»£æ›¿ä»£ç†"></a>5.4.2 RACSubjectä»£æ›¿ä»£ç†</h4><pre><code> // éœ€æ±‚:// 1.ç»™å½“å‰æ§åˆ¶å™¨æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œmodalåˆ°å¦ä¸€ä¸ªæ§åˆ¶å™¨ç•Œé¢// 2.å¦ä¸€ä¸ªæ§åˆ¶å™¨viewä¸­æœ‰ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œé€šçŸ¥å½“å‰æ§åˆ¶å™¨æ­¥éª¤ä¸€ï¼šåœ¨ç¬¬äºŒä¸ªæ§åˆ¶å™¨.hï¼Œæ·»åŠ ä¸€ä¸ªRACSubjectä»£æ›¿ä»£ç†ã€‚@interface TwoViewController : UIViewController@property (nonatomic, strong) RACSubject *delegateSignal;@endæ­¥éª¤äºŒï¼šç›‘å¬ç¬¬äºŒä¸ªæ§åˆ¶å™¨æŒ‰é’®ç‚¹å‡»@implementation TwoViewController- (IBAction)notice:(id)sender &#123;// é€šçŸ¥ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå‘Šè¯‰å®ƒï¼ŒæŒ‰é’®è¢«ç‚¹äº† // é€šçŸ¥ä»£ç† // åˆ¤æ–­ä»£ç†ä¿¡å·æ˜¯å¦æœ‰å€¼if (self.delegateSignal) &#123;    // æœ‰å€¼ï¼Œæ‰éœ€è¦é€šçŸ¥    [self.delegateSignal sendNext:nil];&#125;&#125;@endæ­¥éª¤ä¸‰ï¼šåœ¨ç¬¬ä¸€ä¸ªæ§åˆ¶å™¨ä¸­ï¼Œç›‘å¬è·³è½¬æŒ‰é’®ï¼Œç»™ç¬¬äºŒä¸ªæ§åˆ¶å™¨çš„ä»£ç†ä¿¡å·èµ‹å€¼ï¼Œå¹¶ä¸”ç›‘å¬.@implementation OneViewController - (IBAction)btnClick:(id)sender &#123;// åˆ›å»ºç¬¬äºŒä¸ªæ§åˆ¶å™¨TwoViewController *twoVc = [[TwoViewController alloc] init];// è®¾ç½®ä»£ç†ä¿¡å·twoVc.delegateSignal = [RACSubject subject];// è®¢é˜…ä»£ç†ä¿¡å·[twoVc.delegateSignal subscribeNext:^(id x) &#123;    NSLog(@&quot;ç‚¹å‡»äº†é€šçŸ¥æŒ‰é’®&quot;);&#125;];// è·³è½¬åˆ°ç¬¬äºŒä¸ªæ§åˆ¶å™¨[self presentViewController:twoVc animated:YES completion:nil];&#125;@end</code></pre><h3 id="5-5-RACReplaySubject"><a href="#5-5-RACReplaySubject" class="headerlink" title="5.5 RACReplaySubject"></a>5.5 RACReplaySubject</h3><p><code>RACReplaySubject:</code>é‡å¤æä¾›ä¿¡å·ç±»ï¼Œ<code>RACSubject</code>çš„å­ç±»ã€‚</p><ul><li><code>RACReplaySubject</code>ä¸<code>RACSubject</code>åŒºåˆ«ï¼š<code>RACReplaySubject</code>å¯ä»¥å…ˆå‘é€ä¿¡å·ï¼Œåœ¨è®¢é˜…ä¿¡å·ï¼Œ<code>RACSubject</code>å°±ä¸å¯ä»¥ã€‚</li><li>ä½¿ç”¨åœºæ™¯ä¸€ï¼šå¦‚æœä¸€ä¸ªä¿¡å·æ¯è¢«è®¢é˜…ä¸€æ¬¡ï¼Œå°±éœ€è¦æŠŠä¹‹å‰çš„å€¼é‡å¤å‘é€ä¸€éï¼Œä½¿ç”¨é‡å¤æä¾›ä¿¡å·ç±»ã€‚</li><li>ä½¿ç”¨åœºæ™¯äºŒï¼šå¯ä»¥è®¾ç½®capacityæ•°é‡æ¥é™åˆ¶ç¼“å­˜çš„valueçš„æ•°é‡,å³åªç¼“å……æœ€æ–°çš„å‡ ä¸ªå€¼ã€‚</li></ul><h5 id="5-5-1-RACReplaySubjectç®€å•ä½¿ç”¨"><a href="#5-5-1-RACReplaySubjectç®€å•ä½¿ç”¨" class="headerlink" title="5.5.1 RACReplaySubjectç®€å•ä½¿ç”¨"></a>5.5.1 RACReplaySubjectç®€å•ä½¿ç”¨</h5><pre><code>// RACReplaySubjectä½¿ç”¨æ­¥éª¤:// 1.åˆ›å»ºä¿¡å· [RACSubject subject]ï¼Œè·ŸRACSiganlä¸ä¸€æ ·ï¼Œåˆ›å»ºä¿¡å·æ—¶æ²¡æœ‰blockã€‚// 2.å¯ä»¥å…ˆè®¢é˜…ä¿¡å·ï¼Œä¹Ÿå¯ä»¥å…ˆå‘é€ä¿¡å·ã€‚// 2.1 è®¢é˜…ä¿¡å· - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock// 2.2 å‘é€ä¿¡å· sendNext:(id)value// RACReplaySubject:åº•å±‚å®ç°å’ŒRACSubjectä¸ä¸€æ ·ã€‚// 1.è°ƒç”¨sendNextå‘é€ä¿¡å·ï¼ŒæŠŠå€¼ä¿å­˜èµ·æ¥ï¼Œç„¶åéå†åˆšåˆšä¿å­˜çš„æ‰€æœ‰è®¢é˜…è€…ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒç”¨è®¢é˜…è€…çš„nextBlockã€‚// 2.è°ƒç”¨subscribeNextè®¢é˜…ä¿¡å·ï¼Œéå†ä¿å­˜çš„æ‰€æœ‰å€¼ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒç”¨è®¢é˜…è€…çš„nextBlock// å¦‚æœæƒ³å½“ä¸€ä¸ªä¿¡å·è¢«è®¢é˜…ï¼Œå°±é‡å¤æ’­æ”¾ä¹‹å‰æ‰€æœ‰å€¼ï¼Œéœ€è¦å…ˆå‘é€ä¿¡å·ï¼Œåœ¨è®¢é˜…ä¿¡å·ã€‚// ä¹Ÿå°±æ˜¯å…ˆä¿å­˜å€¼ï¼Œåœ¨è®¢é˜…å€¼ã€‚// 1.åˆ›å»ºä¿¡å·RACReplaySubject *replaySubject = [RACReplaySubject subject];// 2.å‘é€ä¿¡å·[replaySubject sendNext:@1];[replaySubject sendNext:@2];// 3.è®¢é˜…ä¿¡å·[replaySubject subscribeNext:^(id x) &#123;    NSLog(@&quot;ç¬¬ä¸€ä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®%@&quot;,x);&#125;];// è®¢é˜…ä¿¡å·[replaySubject subscribeNext:^(id x) &#123;    NSLog(@&quot;ç¬¬äºŒä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®%@&quot;,x);&#125;];</code></pre><h3 id="5-6-RACTuple"><a href="#5-6-RACTuple" class="headerlink" title="5.6 RACTuple"></a>5.6 RACTuple</h3><p><code>RACTuple:</code>å…ƒç»„ç±»,ç±»ä¼¼NSArray,ç”¨æ¥åŒ…è£…å€¼.</p><h3 id="5-7-RACSequence"><a href="#5-7-RACSequence" class="headerlink" title="5.7 RACSequence"></a>5.7 RACSequence</h3><p><code>RACSequence:</code>RACä¸­çš„é›†åˆç±»ï¼Œç”¨äºä»£æ›¿NSArray,NSDictionary,å¯ä»¥ä½¿ç”¨å®ƒæ¥å¿«é€Ÿéå†æ•°ç»„å’Œå­—å…¸ã€‚</p><ul><li>ä½¿ç”¨åœºæ™¯ï¼šå­—å…¸è½¬æ¨¡å‹</li></ul><h4 id="5-7-1-RACSequenceå’ŒRACTupleç®€å•ä½¿ç”¨ï¼š"><a href="#5-7-1-RACSequenceå’ŒRACTupleç®€å•ä½¿ç”¨ï¼š" class="headerlink" title="5.7.1 RACSequenceå’ŒRACTupleç®€å•ä½¿ç”¨ï¼š"></a>5.7.1 <code>RACSequence</code>å’Œ<code>RACTuple</code>ç®€å•ä½¿ç”¨ï¼š</h4><pre><code>// 1.éå†æ•°ç»„NSArray *numbers = @[@1,@2,@3,@4];// è¿™é‡Œå…¶å®æ˜¯ä¸‰æ­¥// ç¬¬ä¸€æ­¥: æŠŠæ•°ç»„è½¬æ¢æˆé›†åˆRACSequence numbers.rac_sequence// ç¬¬äºŒæ­¥: æŠŠé›†åˆRACSequenceè½¬æ¢RACSignalä¿¡å·ç±»,numbers.rac_sequence.signal// ç¬¬ä¸‰æ­¥: è®¢é˜…ä¿¡å·ï¼Œæ¿€æ´»ä¿¡å·ï¼Œä¼šè‡ªåŠ¨æŠŠé›†åˆä¸­çš„æ‰€æœ‰å€¼ï¼Œéå†å‡ºæ¥ã€‚[numbers.rac_sequence.signal subscribeNext:^(id x) &#123;    NSLog(@&quot;%@&quot;,x);&#125;];// 2.éå†å­—å…¸,éå†å‡ºæ¥çš„é”®å€¼å¯¹ä¼šåŒ…è£…æˆRACTuple(å…ƒç»„å¯¹è±¡)NSDictionary *dict = @&#123;@&quot;name&quot;:@&quot;xmg&quot;,@&quot;age&quot;:@18&#125;;[dict.rac_sequence.signal subscribeNext:^(RACTuple *x) &#123;    // è§£åŒ…å…ƒç»„ï¼Œä¼šæŠŠå…ƒç»„çš„å€¼ï¼ŒæŒ‰é¡ºåºç»™å‚æ•°é‡Œé¢çš„å˜é‡èµ‹å€¼    RACTupleUnpack(NSString *key,NSString *value) = x;    // ç›¸å½“äºä»¥ä¸‹å†™æ³•//        NSString *key = x[0];//        NSString *value = x[1];    NSLog(@&quot;%@ %@&quot;,key,value);&#125;];// 3.å­—å…¸è½¬æ¨¡å‹// 3.1 OCå†™æ³•NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;flags.plist&quot; ofType:nil];NSArray *dictArr = [NSArray arrayWithContentsOfFile:filePath];NSMutableArray *items = [NSMutableArray array];for (NSDictionary *dict in dictArr) &#123;    FlagItem *item = [FlagItem flagWithDict:dict];    [items addObject:item];&#125;// 3.2 RACå†™æ³•NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;flags.plist&quot; ofType:nil];NSArray *dictArr = [NSArray arrayWithContentsOfFile:filePath];NSMutableArray *flags = [NSMutableArray array];_flags = flags;// rac_sequenceæ³¨æ„ç‚¹ï¼šè°ƒç”¨subscribeNextï¼Œå¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡ŒnextBlockï¼Œè€Œæ˜¯ä¼šç­‰ä¸€ä¼šã€‚[dictArr.rac_sequence.signal subscribeNext:^(id x) &#123;    // è¿ç”¨RACéå†å­—å…¸ï¼Œxï¼šå­—å…¸    FlagItem *item = [FlagItem flagWithDict:x];    [flags addObject:item];&#125;];NSLog(@&quot;%@&quot;,  NSStringFromCGRect([UIScreen mainScreen].bounds));// 3.3 RACé«˜çº§å†™æ³•:NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;flags.plist&quot; ofType:nil];NSArray *dictArr = [NSArray arrayWithContentsOfFile:filePath];// map:æ˜ å°„çš„æ„æ€ï¼Œç›®çš„ï¼šæŠŠåŸå§‹å€¼valueæ˜ å°„æˆä¸€ä¸ªæ–°å€¼// array: æŠŠé›†åˆè½¬æ¢æˆæ•°ç»„// åº•å±‚å®ç°ï¼šå½“ä¿¡å·è¢«è®¢é˜…ï¼Œä¼šéå†é›†åˆä¸­çš„åŸå§‹å€¼ï¼Œæ˜ å°„æˆæ–°å€¼ï¼Œå¹¶ä¸”ä¿å­˜åˆ°æ–°çš„æ•°ç»„é‡Œã€‚NSArray *flags = [[dictArr.rac_sequence map:^id(id value) &#123;    return [FlagItem flagWithDict:value];&#125;] array];</code></pre><h3 id="5-8-RACCommand"><a href="#5-8-RACCommand" class="headerlink" title="5.8 RACCommand"></a>5.8 RACCommand</h3><p><code>RACCommand:</code>RACä¸­ç”¨äºå¤„ç†äº‹ä»¶çš„ç±»ï¼Œå¯ä»¥æŠŠäº‹ä»¶å¦‚ä½•å¤„ç†,äº‹ä»¶ä¸­çš„æ•°æ®å¦‚ä½•ä¼ é€’ï¼ŒåŒ…è£…åˆ°è¿™ä¸ªç±»ä¸­ï¼Œä»–å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›‘æ§äº‹ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><ul><li>ä½¿ç”¨åœºæ™¯ï¼šç›‘å¬æŒ‰é’®ç‚¹å‡»ï¼Œç½‘ç»œè¯·æ±‚</li></ul><h4 id="5-8-1-RACCommandç®€å•ä½¿ç”¨"><a href="#5-8-1-RACCommandç®€å•ä½¿ç”¨" class="headerlink" title="5.8.1 RACCommandç®€å•ä½¿ç”¨"></a>5.8.1 RACCommandç®€å•ä½¿ç”¨</h4><pre><code> // ä¸€ã€RACCommandä½¿ç”¨æ­¥éª¤:// 1.åˆ›å»ºå‘½ä»¤ initWithSignalBlock:(RACSignal * (^)(id input))signalBlock// 2.åœ¨signalBlockä¸­ï¼Œåˆ›å»ºRACSignalï¼Œå¹¶ä¸”ä½œä¸ºsignalBlockçš„è¿”å›å€¼// 3.æ‰§è¡Œå‘½ä»¤ - (RACSignal *)execute:(id)input// äºŒã€RACCommandä½¿ç”¨æ³¨æ„:// 1.signalBlockå¿…é¡»è¦è¿”å›ä¸€ä¸ªä¿¡å·ï¼Œä¸èƒ½ä¼ nil.// 2.å¦‚æœä¸æƒ³è¦ä¼ é€’ä¿¡å·ï¼Œç›´æ¥åˆ›å»ºç©ºçš„ä¿¡å·[RACSignal empty];// 3.RACCommandä¸­ä¿¡å·å¦‚æœæ•°æ®ä¼ é€’å®Œï¼Œå¿…é¡»è°ƒç”¨[subscriber sendCompleted]ï¼Œè¿™æ—¶å‘½ä»¤æ‰ä¼šæ‰§è¡Œå®Œæ¯•ï¼Œå¦åˆ™æ°¸è¿œå¤„äºæ‰§è¡Œä¸­ã€‚// 4.RACCommandéœ€è¦è¢«å¼ºå¼•ç”¨ï¼Œå¦åˆ™æ¥æ”¶ä¸åˆ°RACCommandä¸­çš„ä¿¡å·ï¼Œå› æ­¤RACCommandä¸­çš„ä¿¡å·æ˜¯å»¶è¿Ÿå‘é€çš„ã€‚// ä¸‰ã€RACCommandè®¾è®¡æ€æƒ³ï¼šå†…éƒ¨signalBlockä¸ºä»€ä¹ˆè¦è¿”å›ä¸€ä¸ªä¿¡å·ï¼Œè¿™ä¸ªä¿¡å·æœ‰ä»€ä¹ˆç”¨ã€‚// 1.åœ¨RACå¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šæŠŠç½‘ç»œè¯·æ±‚å°è£…åˆ°RACCommandï¼Œç›´æ¥æ‰§è¡ŒæŸä¸ªRACCommandå°±èƒ½å‘é€è¯·æ±‚ã€‚// 2.å½“RACCommandå†…éƒ¨è¯·æ±‚åˆ°æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¯·æ±‚çš„æ•°æ®ä¼ é€’ç»™å¤–ç•Œï¼Œè¿™æ—¶å€™å°±éœ€è¦é€šè¿‡signalBlockè¿”å›çš„ä¿¡å·ä¼ é€’äº†ã€‚// å››ã€å¦‚ä½•æ‹¿åˆ°RACCommandä¸­è¿”å›ä¿¡å·å‘å‡ºçš„æ•°æ®ã€‚// 1.RACCommandæœ‰ä¸ªæ‰§è¡Œä¿¡å·æºexecutionSignalsï¼Œè¿™ä¸ªæ˜¯signal of signals(ä¿¡å·çš„ä¿¡å·),æ„æ€æ˜¯ä¿¡å·å‘å‡ºçš„æ•°æ®æ˜¯ä¿¡å·ï¼Œä¸æ˜¯æ™®é€šçš„ç±»å‹ã€‚// 2.è®¢é˜…executionSignalså°±èƒ½æ‹¿åˆ°RACCommandä¸­è¿”å›çš„ä¿¡å·ï¼Œç„¶åè®¢é˜…signalBlockè¿”å›çš„ä¿¡å·ï¼Œå°±èƒ½è·å–å‘å‡ºçš„å€¼ã€‚// äº”ã€ç›‘å¬å½“å‰å‘½ä»¤æ˜¯å¦æ­£åœ¨æ‰§è¡Œexecuting// å…­ã€ä½¿ç”¨åœºæ™¯,ç›‘å¬æŒ‰é’®ç‚¹å‡»ï¼Œç½‘ç»œè¯·æ±‚// 1.åˆ›å»ºå‘½ä»¤RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123;    NSLog(@&quot;æ‰§è¡Œå‘½ä»¤&quot;);    // åˆ›å»ºç©ºä¿¡å·,å¿…é¡»è¿”å›ä¿¡å·    //        return [RACSignal empty];    // 2.åˆ›å»ºä¿¡å·,ç”¨æ¥ä¼ é€’æ•°æ®    return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;        [subscriber sendNext:@&quot;è¯·æ±‚æ•°æ®&quot;];        // æ³¨æ„ï¼šæ•°æ®ä¼ é€’å®Œï¼Œæœ€å¥½è°ƒç”¨sendCompletedï¼Œè¿™æ—¶å‘½ä»¤æ‰æ‰§è¡Œå®Œæ¯•ã€‚        [subscriber sendCompleted];        return nil;    &#125;];&#125;];// å¼ºå¼•ç”¨å‘½ä»¤ï¼Œä¸è¦è¢«é”€æ¯ï¼Œå¦åˆ™æ¥æ”¶ä¸åˆ°æ•°æ®_conmmand = command;// 3.è®¢é˜…RACCommandä¸­çš„ä¿¡å·[command.executionSignals subscribeNext:^(id x) &#123;    [x subscribeNext:^(id x) &#123;        NSLog(@&quot;%@&quot;,x);    &#125;];&#125;];// RACé«˜çº§ç”¨æ³•// switchToLatest:ç”¨äºsignal of signalsï¼Œè·å–signal of signalså‘å‡ºçš„æœ€æ–°ä¿¡å·,ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥æ‹¿åˆ°RACCommandä¸­çš„ä¿¡å·[command.executionSignals.switchToLatest subscribeNext:^(id x) &#123;    NSLog(@&quot;%@&quot;,x);&#125;];// 4.ç›‘å¬å‘½ä»¤æ˜¯å¦æ‰§è¡Œå®Œæ¯•,é»˜è®¤ä¼šæ¥ä¸€æ¬¡ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ï¼Œskipè¡¨ç¤ºè·³è¿‡ç¬¬ä¸€æ¬¡ä¿¡å·ã€‚[[command.executing skip:1] subscribeNext:^(id x) &#123;    if ([x boolValue] == YES) &#123;        // æ­£åœ¨æ‰§è¡Œ        NSLog(@&quot;æ­£åœ¨æ‰§è¡Œ&quot;);    &#125;else&#123;        // æ‰§è¡Œå®Œæˆ        NSLog(@&quot;æ‰§è¡Œå®Œæˆ&quot;);    &#125;&#125;];   // 5.æ‰§è¡Œå‘½ä»¤[self.conmmand execute:@1];</code></pre><h3 id="5-9-RACMulticastConnection"><a href="#5-9-RACMulticastConnection" class="headerlink" title="5.9 RACMulticastConnection"></a>5.9 RACMulticastConnection</h3><p><code>RACMulticastConnection:</code>ç”¨äºå½“ä¸€ä¸ªä¿¡å·è¢«å¤šæ¬¡è®¢é˜…æ—¶ï¼Œä¸ºäº†ä¿è¯åˆ›å»ºä¿¡å·æ—¶ï¼Œé¿å…å¤šæ¬¡è°ƒç”¨åˆ›å»ºä¿¡å·ä¸­çš„blockï¼Œé€ æˆå‰¯ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å¤„ç†ã€‚</p><p><strong>ä½¿ç”¨æ³¨æ„ï¼š</strong>RACMulticastConnectioné€šè¿‡RACSignalçš„-publishæˆ–è€…-muticast:æ–¹æ³•åˆ›å»ºã€‚</p><h4 id="5-9-1-RACMulticastConnectionç®€å•ä½¿ç”¨"><a href="#5-9-1-RACMulticastConnectionç®€å•ä½¿ç”¨" class="headerlink" title="5.9.1 RACMulticastConnectionç®€å•ä½¿ç”¨"></a>5.9.1 RACMulticastConnectionç®€å•ä½¿ç”¨</h4><pre><code>// RACMulticastConnectionä½¿ç”¨æ­¥éª¤:// 1.åˆ›å»ºä¿¡å· + (RACSignal *)createSignal:(RACDisposable * (^)(id&lt;RACSubscriber&gt; subscriber))didSubscribe// 2.åˆ›å»ºè¿æ¥ RACMulticastConnection *connect = [signal publish];// 3.è®¢é˜…ä¿¡å·,æ³¨æ„ï¼šè®¢é˜…çš„ä¸åœ¨æ˜¯ä¹‹å‰çš„ä¿¡å·ï¼Œè€Œæ˜¯è¿æ¥çš„ä¿¡å·ã€‚ [connect.signal subscribeNext:nextBlock]// 4.è¿æ¥ [connect connect]// RACMulticastConnectionåº•å±‚åŸç†:// 1.åˆ›å»ºconnectï¼Œconnect.sourceSignal -&gt; RACSignal(åŸå§‹ä¿¡å·)  connect.signal -&gt; RACSubject// 2.è®¢é˜…connect.signalï¼Œä¼šè°ƒç”¨RACSubjectçš„subscribeNextï¼Œåˆ›å»ºè®¢é˜…è€…ï¼Œè€Œä¸”æŠŠè®¢é˜…è€…ä¿å­˜èµ·æ¥ï¼Œä¸ä¼šæ‰§è¡Œblockã€‚// 3.[connect connect]å†…éƒ¨ä¼šè®¢é˜…RACSignal(åŸå§‹ä¿¡å·)ï¼Œå¹¶ä¸”è®¢é˜…è€…æ˜¯RACSubject// 3.1.è®¢é˜…åŸå§‹ä¿¡å·ï¼Œå°±ä¼šè°ƒç”¨åŸå§‹ä¿¡å·ä¸­çš„didSubscribe// 3.2 didSubscribeï¼Œæ‹¿åˆ°è®¢é˜…è€…è°ƒç”¨sendNextï¼Œå…¶å®æ˜¯è°ƒç”¨RACSubjectçš„sendNext// 4.RACSubjectçš„sendNext,ä¼šéå†RACSubjectæ‰€æœ‰è®¢é˜…è€…å‘é€ä¿¡å·ã€‚// 4.1 å› ä¸ºåˆšåˆšç¬¬äºŒæ­¥ï¼Œéƒ½æ˜¯åœ¨è®¢é˜…RACSubjectï¼Œå› æ­¤ä¼šæ‹¿åˆ°ç¬¬äºŒæ­¥æ‰€æœ‰çš„è®¢é˜…è€…ï¼Œè°ƒç”¨ä»–ä»¬çš„nextBlock// éœ€æ±‚ï¼šå‡è®¾åœ¨ä¸€ä¸ªä¿¡å·ä¸­å‘é€è¯·æ±‚ï¼Œæ¯æ¬¡è®¢é˜…ä¸€æ¬¡éƒ½ä¼šå‘é€è¯·æ±‚ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´å¤šæ¬¡è¯·æ±‚ã€‚// è§£å†³ï¼šä½¿ç”¨RACMulticastConnectionå°±èƒ½è§£å†³.// 1.åˆ›å»ºè¯·æ±‚ä¿¡å·   RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;    NSLog(@&quot;å‘é€è¯·æ±‚&quot;);    return nil;&#125;];// 2.è®¢é˜…ä¿¡å·[signal subscribeNext:^(id x) &#123;    NSLog(@&quot;æ¥æ”¶æ•°æ®&quot;);&#125;];// 2.è®¢é˜…ä¿¡å·[signal subscribeNext:^(id x) &#123;    NSLog(@&quot;æ¥æ”¶æ•°æ®&quot;);&#125;];// 3.è¿è¡Œç»“æœï¼Œä¼šæ‰§è¡Œä¸¤éå‘é€è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è®¢é˜…éƒ½ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚// RACMulticastConnection:è§£å†³é‡å¤è¯·æ±‚é—®é¢˜// 1.åˆ›å»ºä¿¡å·RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;    NSLog(@&quot;å‘é€è¯·æ±‚&quot;);    [subscriber sendNext:@1];    return nil;&#125;];// 2.åˆ›å»ºè¿æ¥RACMulticastConnection *connect = [signal publish];// 3.è®¢é˜…ä¿¡å·ï¼Œ// æ³¨æ„ï¼šè®¢é˜…ä¿¡å·ï¼Œä¹Ÿä¸èƒ½æ¿€æ´»ä¿¡å·ï¼Œåªæ˜¯ä¿å­˜è®¢é˜…è€…åˆ°æ•°ç»„ï¼Œå¿…é¡»é€šè¿‡è¿æ¥,å½“è°ƒç”¨è¿æ¥ï¼Œå°±ä¼šä¸€æ¬¡æ€§è°ƒç”¨æ‰€æœ‰è®¢é˜…è€…çš„sendNext:[connect.signal subscribeNext:^(id x) &#123;    NSLog(@&quot;è®¢é˜…è€…ä¸€ä¿¡å·&quot;);&#125;];[connect.signal subscribeNext:^(id x) &#123;    NSLog(@&quot;è®¢é˜…è€…äºŒä¿¡å·&quot;);&#125;];// 4.è¿æ¥,æ¿€æ´»ä¿¡å·[connect connect];</code></pre><h3 id="5-10-RACScheduler"><a href="#5-10-RACScheduler" class="headerlink" title="5.10 RACScheduler"></a>5.10 RACScheduler</h3><p><code>RACScheduler:</code>RACä¸­çš„é˜Ÿåˆ—ï¼Œç”¨GCDå°è£…çš„ã€‚</p><h3 id="5-11-RACUnit"><a href="#5-11-RACUnit" class="headerlink" title="5.11 RACUnit"></a>5.11 RACUnit</h3><p><code>RACUnit:</code>è¡¨â½°streamä¸åŒ…å«æœ‰æ„ä¹‰çš„å€¼,ä¹Ÿå°±æ˜¯çœ‹åˆ°è¿™ä¸ªï¼Œå¯ä»¥ç›´æ¥ç†è§£ä¸ºnilã€‚</p><h3 id="5-12-RACEvent"><a href="#5-12-RACEvent" class="headerlink" title="5.12 RACEvent"></a>5.12 RACEvent</h3><p><code>RACEvent:</code>æŠŠæ•°æ®åŒ…è£…æˆä¿¡å·äº‹ä»¶(signal event)ã€‚å®ƒä¸»è¦é€šè¿‡RACSignalçš„-materializeæ¥ä½¿ç”¨ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰è¨€&quot;&gt;&lt;/a&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;&lt;p&gt;ä¹‹å‰æ€»å¬åˆ«äººè¯´ä»€ä¹ˆReactive Cocoa + MVVMï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°è®²è§£Reactive Cocoaç›¸å…³çš„èµ„æ–™ã€‚ç»“æœè¿›å…¥æ–°å…¬å¸ï¼Œé¡¹ç›®é‡Œé¢æœ‰éƒ¨åˆ†ä»£ç ä½¿ç”¨åˆ°äº†Reactive Cocoa,æ‰€ä»¥ç¬”è€…åœ¨è¿™è®°å½•è‡ªå·±å­¦ä¹ Reactive Cocoaçš„ç¬”è®°ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å¤§å®¶é€šè¿‡é˜…è¯»è¿™ç¯‡æ–‡ç« èƒ½å­¦åˆ°ç‚¹ä»€ä¹ˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ReactiveCocoa" scheme="http://example.com/categories/ReactiveCocoa/"/>
    
    
    <category term="ReactiveCocoa" scheme="http://example.com/tags/ReactiveCocoa/"/>
    
  </entry>
  
  <entry>
    <title>nilã€Nilã€NULLã€NSNullçš„ç†è§£</title>
    <link href="http://example.com/post/937a3ecd.html"/>
    <id>http://example.com/post/937a3ecd.html</id>
    <published>2016-06-06T15:22:30.000Z</published>
    <updated>2023-12-02T10:27:22.218Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å·¥ä½œå½“ä¸­æˆ‘ä»¬åœ¨è°ƒç”¨å®˜æ–¹çš„apiçš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªå‚æ•°å³å¯ä»¥å†™æˆ<code>nil</code>ï¼Œè€Œå†™æˆ<code>NULL</code>ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ä¹Ÿæ˜¯ä¸€ç›´æ²¡æœ‰ææ˜ç™½ä¸ºä»€ä¹ˆã€‚ç„¶åé€šè¿‡æŸ¥é˜…èµ„æ–™ï¼Œå‘ç°åŸæ¥é™¤äº†<code>nil</code>,<code>NULL</code>,è¿˜æœ‰<code>Nil</code>,<code>NSNull</code>ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆæ™•ï¼Œæˆ‘ä¹Ÿæ˜¯æ‡µé€¼äº†ã€‚äºæ˜¯åšä¸€ä¸‹ç¬”è®°è®°å½•ä¸€ä¸‹ã€‚</p><span id="more"></span><h2 id="nil"><a href="#nil" class="headerlink" title="nil"></a>nil</h2><p>æˆ‘ä»¬ç»™å¯¹è±¡èµ‹å€¼æ—¶ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨<code>object = nil</code>,è¡¨ç¤ºæˆ‘æƒ³æŠŠè¿™ä¸ªå¯¹è±¡é‡Šæ”¾æ‰ï¼›</p><p>æˆ–è€…å¯¹è±¡ç”±äºæŸç§åŸå› ï¼Œç»è¿‡å¤šæ¬¡releaseï¼Œäºæ˜¯å¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º0äº†ï¼Œç³»ç»Ÿå°†è¿™å—å†…å­˜é‡Šæ”¾æ‰ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªå¯¹è±¡ä¸ºnil,æˆ‘ä»¬ç§°å®ƒä¸º<strong>â€œç©ºå¯¹è±¡â€</strong>ã€‚ï¼ˆ**æ³¨æ„ï¼šè¿™é‡Œå¼ºè°ƒçš„æ˜¯â€œç©ºå¯¹è±¡â€ï¼Œä¸‹é¢æˆ‘ä¼šæ‹¿å®ƒå’Œâ€œå€¼ä¸ºç©ºçš„å¯¹è±¡â€åšå¯¹æ¯”!**ï¼‰</p><p>æ‰€ä»¥å¯¹äºè¿™ç§ç©ºå¯¹è±¡ï¼Œæ‰€æœ‰å…³äºretainçš„æ“ä½œéƒ½ä¼šå¼•èµ·ç¨‹åºcrash(<strong>æ³¨æ„:æˆ‘æ˜¯è¯´å…³äºretainæ“ä½œï¼Œè€Œå‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯æ˜¯ä¸ä¼šcrashçš„</strong>),ä¾‹å¦‚å­—å…¸æ·»åŠ é”®å€¼æˆ–è€…æ•°ç»„æ·»åŠ æ–°å…ƒç´ ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p><pre><code>- (void)viewDidLoad &#123;    [super viewDidLoad];    NSMutableArray *mArr = [[NSMutableArray alloc] init];    NSMutableDictionary *mDic = [[NSMutableDictionary alloc] init];        // ä»¥ä¸‹ç”¨æ³•ä¸ä¼šå¼•èµ·crash//    id object = [[NSObject alloc] init];//    [mArr addObject:object];//    [mDic setObject:object forKey:@&quot;objectKey&quot;];            // ä»¥ä¸‹ç”¨æ³•ä¼šå¯¼è‡´crash    id obj = nil;    [mArr addObject:obj];    [mDic setObject:obj forKey:@&quot;objKey&quot;];    &#125;</code></pre><h2 id="NSNull"><a href="#NSNull" class="headerlink" title="NSNull"></a>NSNull</h2><p><code>NSNull</code>å’Œ<code>nil</code>çš„åŒºåˆ«åœ¨äº<code>nil</code>æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå·²ç»å®Œå…¨ä»å†…å­˜ä¸­æ¶ˆå¤±äº†ï¼Œè€Œå¦‚æœæˆ‘ä»¬æƒ³è¡¨è¾¾â€œæˆ‘ä»¬éœ€è¦æœ‰è¿™æ ·ä¸€ä¸ªå®¹å™¨ï¼Œä½†æ˜¯è¿™ä¸ªå®¹å™¨é‡Œé¢ä»€ä¹ˆä¹Ÿæ²¡æœ‰â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°<code>NSNull</code>ï¼Œæˆ‘ç§°å®ƒä¸ºâ€å€¼ä¸ºç©ºçš„å¯¹è±¡â€ã€‚å¦‚æœä½ æŸ¥é˜…å¼€å‘æ–‡æ¡£ä½ ä¼šå‘ç°<code>NSNull</code>è¿™ä¸ªç±»æ˜¯ç»§æ‰¿<code>NSObject</code>ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ª<code>+ (NSNull *) null;</code>ç±»æ–¹æ³•ã€‚è¿™å°±è¯´æ˜<code>NSNull</code>å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å†…å­˜åœ°å€ï¼Œæ‰€ä»¥åœ¨ç¨‹åºä¸­å¯¹å®ƒçš„ä»»ä½•å¼•ç”¨éƒ½æ˜¯ä¸ä¼šå¯¼è‡´ç¨‹åºå´©æºƒçš„ã€‚å‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><pre><code>- (void)viewDidLoad &#123;    [super viewDidLoad];    NSMutableArray *mArr = [[NSMutableArray alloc] init];    NSMutableDictionary *mDic = [[NSMutableDictionary alloc] init];        id obj = nil;    if (obj == nil) &#123;        obj = [NSNull null];    &#125;        [mArr addObject:obj];    [mDic setObject:obj forKey:@&quot;objKey&quot;];    NSLog(@&quot;%@--%@&quot;,[mArr firstObject],mDic[@&quot;objKey&quot;]);&#125;</code></pre><h2 id="Nil"><a href="#Nil" class="headerlink" title="Nil"></a>Nil</h2><p><code>Nil</code>å’Œ<code>nil</code>åœ¨ä½¿ç”¨ä¸Šæ²¡æœ‰ä¸¥æ ¼è§„å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å‡¡æ˜¯ä½¿ç”¨<code>nil</code>çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨<code>Nil</code>æ¥ä»£æ›¿ï¼Œåä¹‹äº¦ç„¶ã€‚åªä¸è¿‡ä»ç¼–ç¨‹å‘½åè§„èŒƒæ¥è¯´ï¼Œæˆ‘ä»¬çº¦å®šä¿—æˆåœ°å°†<code>Nil</code>è¡¨ç¤ºæˆä¸€ä¸ªç©ºç±»ï¼Œ<code>nil</code>è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡ã€‚å‚è€ƒä»£ç å¦‚ä¸‹:</p><pre><code>- (void)viewDidLoad &#123;    [super viewDidLoad];    id obj = nil;    if (obj == nil) &#123;        NSLog(@&quot;obj is nil&quot;);    &#125;        Class classA = Nil;    if (classA == Nil) &#123;        NSLog(@&quot;classA is Nil&quot;);    &#125;&#125;</code></pre><h2 id="NULL"><a href="#NULL" class="headerlink" title="NULL"></a>NULL</h2><p>æˆ‘ä»¬çŸ¥é“<code>Object-C</code>æ¥æºäºCã€æ”¯æŒCï¼Œå½“ç„¶ä¹Ÿæœ‰åˆ«äºCï¼Œè€Œ<code>NULL</code>å°±æ˜¯å…¸å‹Cè¯­è¨€çš„è¯­æ³•ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š</p><pre><code>NSInteger *point = NULL;</code></pre>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨å·¥ä½œå½“ä¸­æˆ‘ä»¬åœ¨è°ƒç”¨å®˜æ–¹çš„apiçš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªå‚æ•°å³å¯ä»¥å†™æˆ&lt;code&gt;nil&lt;/code&gt;ï¼Œè€Œå†™æˆ&lt;code&gt;NULL&lt;/code&gt;ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ä¹Ÿæ˜¯ä¸€ç›´æ²¡æœ‰ææ˜ç™½ä¸ºä»€ä¹ˆã€‚ç„¶åé€šè¿‡æŸ¥é˜…èµ„æ–™ï¼Œå‘ç°åŸæ¥é™¤äº†&lt;code&gt;nil&lt;/code&gt;,&lt;code&gt;NULL&lt;/code&gt;,è¿˜æœ‰&lt;code&gt;Nil&lt;/code&gt;,&lt;code&gt;NSNull&lt;/code&gt;ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆæ™•ï¼Œæˆ‘ä¹Ÿæ˜¯æ‡µé€¼äº†ã€‚äºæ˜¯åšä¸€ä¸‹ç¬”è®°è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="iOSå¼€å‘" scheme="http://example.com/tags/iOS%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>ä¸¤ä¸ªAppä¹‹é—´è°ƒèµ·é€šä¿¡</title>
    <link href="http://example.com/post/a47a005e.html"/>
    <id>http://example.com/post/a47a005e.html</id>
    <published>2016-06-05T15:24:34.000Z</published>
    <updated>2023-12-02T10:27:22.219Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç»å¸¸ä½¿ç”¨ä¸€äº›appçš„åˆ†äº«åŠŸèƒ½ï¼Œæ¯”å¦‚ç‚¹å‡»QQåˆ†äº«ï¼Œå°±ä»appæ‰“å¼€(è·³è½¬åˆ°)QQï¼Œç„¶ååˆ†äº«å®Œä¹‹ååˆå›åˆ°æˆ‘ä»¬çš„appï¼Œé‚£ä¹ˆè¿™æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿ</p><span id="more"></span><p>å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œç”±app1è·³è½¬åˆ°app2ï¼Œå½“app2å®Œæˆä»»åŠ¡ä¹‹åï¼Œè¦æŠŠapp2ä¸­çš„æŸäº›ä¿¡æ¯ä¼ åˆ°app1ä¸­(å‡è®¾æˆ‘ä»¬è‡ªå·±çš„ç¨‹åºæ˜¯app1)</p><h2 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h2><p>æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæ–°çš„å·¥ç¨‹ï¼Œä¸€ä¸ªå«Test1ï¼Œä¸€ä¸ªå«Test2ã€‚</p><p>æœ¬ç¯‡æ–‡ç« å°†ä½¿ç”¨<code>Test1</code>ä½œä¸ºç¬¬ä¸€ä¸ªappçš„<code>URL Schemes</code>,<code>Test2</code>ä½œä¸ºç¬¬äºŒä¸ªappçš„<code>URL Schemes</code>ã€‚</p><h3 id="Test1å·¥ç¨‹é…ç½®"><a href="#Test1å·¥ç¨‹é…ç½®" class="headerlink" title="Test1å·¥ç¨‹é…ç½®"></a>Test1å·¥ç¨‹é…ç½®</h3><p>ç”±äºiOS9.0ä¹‹åè·³è½¬<code>URL Schemes</code>éœ€è¦å°†æ·»åŠ <code>ç™½åå•</code><br><img src="http://7xv28v.com1.z0.glb.clouddn.com/app1.png" alt="å›¾1"><br>å¯¹äº<code>URL Schemes</code>ä¸­çš„Test1æ˜¯æœ¬åº”ç”¨ç•™ç»™å…¶ä»–åº”ç”¨è°ƒç”¨çš„ã€‚</p><h3 id="Test2å·¥ç¨‹é…ç½®"><a href="#Test2å·¥ç¨‹é…ç½®" class="headerlink" title="Test2å·¥ç¨‹é…ç½®"></a>Test2å·¥ç¨‹é…ç½®</h3><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/app2.png" alt="å›¾2"><br>å¯¹äº<code>URL Schemes</code>ä¸­çš„Test2æ˜¯æœ¬åº”ç”¨ç•™ç»™å…¶ä»–åº”ç”¨è°ƒç”¨çš„ã€‚</p><h3 id="Test1å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç "><a href="#Test1å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç " class="headerlink" title="Test1å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç "></a>Test1å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç </h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">// Test2æ˜¯åœ¨Test2è¿™ä¸ªé¡¹ç›®çš„info.plistä¸­é…ç½®çš„URL Schemes</span></span><br><span class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;Test2://&quot;</span>]]) &#123;</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;Test2://success=1&amp;&amp;name=test2&quot;</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application handleOpenURL:(<span class="built_in">NSURL</span> *)url &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *str = [[url host] stringByRemovingPercentEncoding];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@---%@&quot;</span>,str, url.absoluteString); </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ¤æ–­æ‰‹æœºæ˜¯å¦å®‰è£…äº†åº”ç”¨Test2ï¼Œé€šè¿‡Test2å·¥ç¨‹å…¬å¼€çš„<code>URL Schemes</code>æ¥åˆ¤æ–­ï¼Œå³<code>Test2://</code>ã€‚éœ€è¦ä¼ å‚æ•°æ—¶ï¼Œæ˜¯é€šè¿‡URLå‚æ•°æ¥ä¼ çš„ã€‚å¦‚ï¼š<code>Test2://success=1&amp;&amp;name=test2</code>å°±æ˜¯ä¸€ä¸ªURLã€‚</p><h3 id="Test2å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç "><a href="#Test2å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç " class="headerlink" title="Test2å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç "></a>Test2å·¥ç¨‹ä¸­æµ‹è¯•ä»£ç </h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application handleOpenURL:(<span class="built_in">NSURL</span> *)url &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *str = [[url host] stringByRemovingPercentEncoding];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%@---%@&quot;</span>,str, url.absoluteString); </span><br><span class="line">    [<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(goBackToApp1) withObject:<span class="literal">nil</span> afterDelay:<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">void</span>)goBackToApp1 &#123;</span><br><span class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;Test1://&quot;</span>]]) &#123;</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;Test1://loginSuccess=1&quot;</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨<code>- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url</code>å¤„ç†æ¥è‡ªTest1åº”ç”¨çš„è°ƒç”¨ï¼Œè·å–åˆ°ç›¸åº”çš„å‚æ•°äº†ã€‚</p><p>å½“æˆ‘ä»¬å¤„ç†æ•°æ®å®Œæˆï¼Œéœ€è¦åé¦ˆç»™Test1æ—¶ï¼Œå°±éœ€è¦è°ƒç”¨é€šè¿‡<code>Test1://loginSuccess=1</code>è°ƒç”¨å›åˆ°Test1å¹¶å°†çŠ¶æ€å¸¦å›å»ã€‚</p><h3 id="Test1æ‰“å°æ—¥å¿—"><a href="#Test1æ‰“å°æ—¥å¿—" class="headerlink" title="Test1æ‰“å°æ—¥å¿—"></a>Test1æ‰“å°æ—¥å¿—</h3><pre><code>2016-06-05 23:23:09.807 test1[1277:219009] loginSuccess=1---Test1://loginSuccess=1</code></pre><p>è¯´æ˜å‚æ•°èƒ½ä»Test2æ­£ç¡®åœ°ä¼ é€’è¿‡æ¥ã€‚</p><h3 id="Test2æ‰“å°æ—¥å¿—"><a href="#Test2æ‰“å°æ—¥å¿—" class="headerlink" title="Test2æ‰“å°æ—¥å¿—"></a>Test2æ‰“å°æ—¥å¿—</h3><pre><code>2016-06-05 23:22:15.008 test2[1243:216871] success=1&amp;&amp;name=test2---Test2://success=1&amp;&amp;name=test2</code></pre><p>è¯´æ˜å‚æ•°èƒ½ä»Test1æ­£ç¡®åœ°ä¼ é€’è¿‡æ¥ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ç»å¸¸ä½¿ç”¨ä¸€äº›appçš„åˆ†äº«åŠŸèƒ½ï¼Œæ¯”å¦‚ç‚¹å‡»QQåˆ†äº«ï¼Œå°±ä»appæ‰“å¼€(è·³è½¬åˆ°)QQï¼Œç„¶ååˆ†äº«å®Œä¹‹ååˆå›åˆ°æˆ‘ä»¬çš„appï¼Œé‚£ä¹ˆè¿™æ˜¯æ€æ ·å®ç°çš„å‘¢ï¼Ÿ&lt;/p&gt;</summary>
    
    
    
    <category term="appé€šä¿¡" scheme="http://example.com/categories/app%E9%80%9A%E4%BF%A1/"/>
    
    
    <category term="iOS" scheme="http://example.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>æ”¶è—</title>
    <link href="http://example.com/post/89b6cade.html"/>
    <id>http://example.com/post/89b6cade.html</id>
    <published>2016-06-04T09:44:27.000Z</published>
    <updated>2023-12-02T10:27:22.237Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p><a href="http://www.cnblogs.com/dsxniubility/p/5099191.html">http://www.cnblogs.com/dsxniubility/p/5099191.html</a></p><h2 id="ç±»åº“"><a href="#ç±»åº“" class="headerlink" title="ç±»åº“"></a>ç±»åº“</h2><p><a href="http://www.cocoachina.com/ios/20150727/12720.html">http://www.cocoachina.com/ios/20150727/12720.html</a></p><span id="more"></span><h2 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h2><p><a href="https://github.com/tangqiaoboy/iOSBlogCN">https://github.com/tangqiaoboy/iOSBlogCN</a></p><h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><ul><li><a href="https://wangmeng.gitbooks.io/ios-note/content/interview_1.html">é¢è¯•é¢˜</a></li><li><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.md">æ‹›ä¸€ä¸ªé è°±çš„iOS</a></li></ul><h2 id="å¸¸ç”¨ç½‘å€"><a href="#å¸¸ç”¨ç½‘å€" class="headerlink" title="å¸¸ç”¨ç½‘å€"></a>å¸¸ç”¨ç½‘å€</h2><p><a href="https://ioser.org/">https://ioser.org/</a></p><p>ä¸æ–­æ›´æ–°ä¸­â€¦</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;æ’ä»¶&quot;&gt;&lt;a href=&quot;#æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æ’ä»¶&quot;&gt;&lt;/a&gt;æ’ä»¶&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/dsxniubility/p/5099191.html&quot;&gt;http://www.cnblogs.com/dsxniubility/p/5099191.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç±»åº“&quot;&gt;&lt;a href=&quot;#ç±»åº“&quot; class=&quot;headerlink&quot; title=&quot;ç±»åº“&quot;&gt;&lt;/a&gt;ç±»åº“&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20150727/12720.html&quot;&gt;http://www.cocoachina.com/ios/20150727/12720.html&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="æ”¶è—" scheme="http://example.com/categories/%E6%94%B6%E8%97%8F/"/>
    
    
    <category term="æ”¶è—" scheme="http://example.com/tags/%E6%94%B6%E8%97%8F/"/>
    
  </entry>
  
  <entry>
    <title>Gitä»å…¥é—¨åˆ°é€Ÿæˆ</title>
    <link href="http://example.com/post/206bda90.html"/>
    <id>http://example.com/post/206bda90.html</id>
    <published>2016-06-04T05:15:49.000Z</published>
    <updated>2023-12-02T10:27:22.179Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯Git"><a href="#ä»€ä¹ˆæ˜¯Git" class="headerlink" title="ä»€ä¹ˆæ˜¯Git"></a>ä»€ä¹ˆæ˜¯Git</h2><p>Gitæ˜¯Linuxå‘æ˜è€…Linuså¼€å‘çš„ä¸€æ¬¾æ–°æ—¶ä»£çš„<strong>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</strong>ï¼Œé‚£ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå‘¢ï¼Ÿæ€ä¹ˆç†è§£ï¼Ÿç½‘ä¸Šä¸€å¤§å †è¯¦ç»†çš„ä»‹ç»ï¼Œä½†æ˜¯å¤§å¤šæ¯ç‡¥ä¹å‘³ï¼Œå¯¹äºæ–°æ‰‹ä¹Ÿå¾ˆéš¾ç†è§£ï¼Œè¿™é‡Œæˆ‘åªä¸¾å‡ ä¸ªä¾‹å­ã€‚</p><p>ç†Ÿæ‚‰ç¼–ç¨‹çš„éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨è½¯ä»¶å¼€å‘ä¸­æºä»£ç å…¶å®æ˜¯æœ€é‡è¦çš„ï¼Œé‚£ä¹ˆå¯¹æºä»£ç çš„ç®¡ç†å˜å¾—å¼‚å¸¸é‡è¦ï¼š</p><ul><li>ä¸ºäº†é˜²æ­¢ä»£ç çš„ä¸¢å¤±ï¼Œè‚¯å®šæœ¬åœ°æœºå™¨ä¸è¿œç¨‹æœåŠ¡å™¨éƒ½è¦å­˜æ”¾ä¸€ä»½ï¼Œè€Œä¸”è¿˜éœ€è¦æœ‰ä¸€å¥—æœºåˆ¶è®©æœ¬åœ°å¯ä»¥è·Ÿè¿œç¨‹åŒæ­¥ï¼›</li><li>æˆ‘ä»¬å¼€å‘çš„æ—¶å€™å…ä¸äº†æœ‰bugï¼Œæœ‰æ—¶å€™åˆšå‘å¸ƒçš„åŠŸèƒ½å°±å‡ºç°äº†ä¸¥é‡çš„bug,è¿™ä¸ªæ—¶å€™éœ€è¦å¯¹ä»£ç è¿›è¡Œè¿˜åŸï¼›</li><li>éšç€æˆ‘ä»¬ç‰ˆæœ¬è¿­ä»£çš„åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ¸…é™¤çš„çŸ¥é“å†å²æ¯ä¸€ä¸ªç‰ˆæœ¬çš„ä»£ç æ›´æ”¹è®°å½•ï¼Œç”šè‡³çŸ¥é“æ¯ä¸ªäººå†å²æäº¤ä»£ç çš„æƒ…å†µ<span id="more"></span>ç­‰ç­‰ç±»ä¼¼ä»¥ä¸Šçš„æƒ…å†µï¼Œè¿™äº›éƒ½æ˜¯ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿèƒ½è§£å†³çš„é—®é¢˜ã€‚æ‰€ä»¥è¯´ï¼Œç‰ˆæœ¬æ§åˆ¶æ˜¯ä¸€ç§è®°å½•ä¸€ä¸ªæˆ–è€…è‹¥å¹²ä¸ªæ–‡ä»¶å†…å®¹å˜æ¢ï¼Œä»¥ä¾¿å°†æ¥æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬ä¿®æ”¹æƒ…å†µçš„ç³»ç»Ÿï¼Œå¯¹äºè½¯ä»¶å¼€å‘é¢†åŸŸæ¥è¯´ç‰ˆæœ¬æ§åˆ¶æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ï¼Œè€ŒGitæ˜¯å½“ä¸‹æ¯”è¾ƒæµè¡Œã€å¥½ç”¨çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</li></ul><h2 id="Gitå®‰è£…"><a href="#Gitå®‰è£…" class="headerlink" title="Gitå®‰è£…"></a>Gitå®‰è£…</h2><p>ä¸Šé¢è¯´äº†ï¼ŒGitæ˜¯ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ä¸ªå·¥å…·ï¼Œè·ŸJavaç±»ä¼¼ï¼Œä½¿ç”¨ä¹‹å‰å¿…é¡»å¾—å…ˆå®‰è£…ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥å¿…é¡»è¦å®‰è£…ï¼Œç”±äºæˆ‘ç”¨çš„æ˜¯Macï¼ŒMacä¸Šç³»ç»Ÿè‡ªå¸¦Gitã€‚æ‰€ä»¥å®‰è£…è¿™ä¸€æ­¥éª¤å°±çœç•¥ï¼Œç›¸ä¿¡å¤§å®¶å¯ä»¥æçš„å®šã€‚</p><h2 id="å¦‚ä½•å­¦ä¹ Git"><a href="#å¦‚ä½•å­¦ä¹ Git" class="headerlink" title="å¦‚ä½•å­¦ä¹ Git"></a>å¦‚ä½•å­¦ä¹ Git</h2><p>å®‰è£…å¥½Gitä¹‹åï¼Œæ€ä¹ˆå­¦ä¹ æ˜¯ä¸ªé—®é¢˜ï¼Œå…¶å®å…³äºGitæœ‰å¾ˆå¤šå›¾å½¢åŒ–çš„è½¯ä»¶ï¼Œä½†æ˜¯æˆ‘å¼ºçƒˆå»ºè®®å¤§å®¶ä»å‘½ä»¤è¡Œå¼€å§‹å­¦ä¹ ç†è§£ï¼Œæˆ‘çŸ¥é“æ²¡æœ‰æ¥è§¦è¿‡å‘½ä»¤è¡Œçš„åŒå­¦å†…å¿ƒå¯èƒ½æ˜¯æ‹’ç»çš„ï¼Œä½†æ˜¯æˆ‘çš„äº²èº«å®è·µè¯æ˜ï¼Œåªæœ‰ä¸€å¼€å§‹å­¦ä¹ å‘½ä»¤è¡Œï¼Œä¹‹åä½ å¯¹Gitçš„æ¯ä¸€æ­¥æ“ä½œæ‰èƒ½ç†è§£å…¶æ„ä¹‰ï¼Œè€Œç­‰ä½ ç†Ÿç»ƒä¹‹å ï¼Œä½ æƒ³ç”¨ä»»ä½•çš„å›¾å½¢åŒ–çš„è½¯ä»¶å»æ“ä½œå®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚</p><h2 id="Gitå‘½ä»¤åˆ—è¡¨"><a href="#Gitå‘½ä»¤åˆ—è¡¨" class="headerlink" title="Gitå‘½ä»¤åˆ—è¡¨"></a>Gitå‘½ä»¤åˆ—è¡¨</h2><p>æ€ä¹ˆåˆ¤æ–­ä½ Gitæœ‰æ²¡æœ‰å®‰è£…æˆåŠŸå‘¢ï¼Ÿè¯·åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥gitï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹æç¤ºè¯æ˜ä½ å·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/git1.png" alt="å¦‚å›¾"></p><p>Gitæ‰€æœ‰çš„æ“ä½œå‘½ä»¤éƒ½æ˜¯ä»¥gitå¼€å¤´ï¼Œä¸Šé¢åˆ—ä¸¾äº†æœ€å¸¸ç”¨çš„ä¸€äº›Gitå‘½ä»¤ï¼Œç´§æ¥ç€ä¼šæœ‰ä¸€å¥å¼•æ–‡è§£é‡Šè¿™ä¸ªå‘½ä»¤çš„æ„æ€ï¼Œéƒ½ä¸æ˜¯å¾ˆéš¾ç†è§£çš„å•è¯ï¼Œä¸å¦¨è¯•ç€çœ‹ä¸€ä¸‹ï¼Œä¸è¿‡æ²¡æœ‰å®é™…æ“ä½œä½ ä»ç„¶ä¸å¥½ç†è§£ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä»¥ä¸€ä¸ªå®é™…çš„æ“ä½œæ¥ä»‹ç»ä¸‹ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤çš„å«ä¹‰ã€‚</p><h2 id="Gitå…·ä½“å‘½ä»¤"><a href="#Gitå…·ä½“å‘½ä»¤" class="headerlink" title="Gitå…·ä½“å‘½ä»¤"></a>Gitå…·ä½“å‘½ä»¤</h2><p>ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹é‡Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶(ps:<strong>æˆ‘æ˜¯ç”¨å‘½ä»¤è¡Œå»æ–°å»ºçš„</strong>)</p><ul><li><p>æ–°å»ºæ–‡ä»¶å¤¹ï¼š<code>mkdir test</code></p></li><li><p>è·³è½¬åˆ°æ–‡ä»¶å¤¹ç›®å½•ï¼š<code>cd test</code></p></li><li><p>æ–°å»ºtest.mdæ–‡ä»¶: <code>touch test.md</code></p></li></ul><p><strong>æé†’ï¼šåœ¨è¿›è¡Œä»»ä½•Gitæ“ä½œä¹‹å‰ï¼Œéƒ½è¦å…ˆåˆ‡æ¢åˆ°Gitä»“åº“ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¦å…ˆåˆ‡æ¢åˆ°é¡¹ç›®çš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹</strong></p><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å…ˆéšä¾¿æ“ä½œä¸€ä¸ªå‘½ä»¤ï¼Œæ¯”å¦‚git statusï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æç¤ºï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git2.png" alt="å¦‚å›¾"></p><p>æ„æ€å°±æ˜¯å½“å‰ç›®å½•è¿˜ä¸æ˜¯ä¸€ä¸ªGitä»“åº“ã€‚</p><h3 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h3><p>è¿™ä¸ªæ—¶å€™ç”¨åˆ°äº†ç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œä»£è¡¨åˆå§‹åŒ–gitä»“åº“ï¼Œè¾“å…¥git initä¹‹åä¼šæç¤ºï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git3.png" alt="å¦‚å›¾"></p><p>å¯ä»¥çœ‹åˆ°åˆå§‹åŒ–æˆåŠŸäº†ï¼Œè‡³æ­¤testç›®å½•å·²ç»æ˜¯ä¸€ä¸ªgitä»“åº“äº†ã€‚</p><h3 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h3><p>ç´§æ¥ç€æˆ‘ä»¬è¾“å…¥git statuså‘½ä»¤ï¼Œä¼šæœ‰å¦‚ä¸‹æç¤º:<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git4.png" alt="å¦‚å›¾"></p><p>é»˜è®¤å°±ç›´æ¥åœ¨masteråˆ†æ”¯ï¼Œå…³äºåˆ†æ”¯çš„æ¦‚å¿µåé¢ä¼šæï¼Œè¿™æ—¶æœ€ä¸»è¦çš„æ˜¯æç¤ºtest.mdè¿™ä¸ªæ–‡ä»¶<br><code>Untracked files</code>å°±æ˜¯è¯´test.mdè¿™ä¸ªæ–‡ä»¶è¿˜æ²¡æœ‰è¢«è·Ÿè¸ªï¼Œè¿˜æ²¡æœ‰æäº¤åœ¨gitä»“åº“é‡Œå‘¢ï¼Œè€Œä¸”æç¤ºä½ å¯ä»¥ç”¨git addå»æ“ä½œä½ æƒ³è¦æäº¤çš„æ–‡ä»¶ã€‚</p><p><code>git status</code>è¿™ä¸ªå‘½ä»¤å°±æ˜¯æŸ¥çœ‹çŠ¶æ€ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥ç®—æ˜¯ä½¿ç”¨æœ€é¢‘ç¹çš„äº†ï¼Œå»ºè®®å¤§å®¶æ²¡äº‹å°±è¾“å…¥è¿™ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹ä½ å½“å‰gitä»“åº“çš„ä¸€äº›çŠ¶æ€ã€‚</p><h3 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h3><p>ä¸Šé¢æç¤ºtest.mdæ–‡ä»¶è¿˜æ²¡æœ‰æäº¤åˆ°gitä»“åº“é‡Œï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥éšä¾¿ç¼–è¾‘ä¸‹test.mdæ–‡ä»¶ï¼Œç„¶åè¾“å…¥<code>git add test.md</code>ï¼Œç„¶åå†è¾“å…¥<code>git status</code>ï¼š<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git5.png" alt="å¦‚å›¾"></p><p>æ­¤æ—¶æç¤ºä»¥ä¸‹æ–‡ä»¶ <code>Changes to be committed</code>,æ„æ€å°±æ˜¯test.mdæ–‡ä»¶ç­‰å¾…è¢«æäº¤ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>git rm -cached</code>è¿™ä¸ªå‘½ä»¤å»ç§»é™¤è¿™ä¸ªç¼“å­˜ã€‚</p><h3 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h3><p>æ¥ç€ï¼Œæˆ‘ä»¬è¾“å…¥ <code>git commit -m &quot;first commit&quot;</code>ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿcommitæ˜¯æäº¤çš„æ„æ€ï¼Œ-m ä»£è¡¨æäº¤ä¿¡æ¯ï¼Œæ‰§è¡Œäº†ä»¥ä¸Šå‘½ä»¤ä»£è¡¨æˆ‘ä»¬å·²ç»æ­£å¼è¿›è¡Œäº†ç¬¬ä¸€æ¬¡æäº¤ã€‚è¿™ä¸ªæ—¶å€™å†è¾“å…¥ <code>git status</code> ï¼Œä¼šæç¤º <code>nothing to commit</code> ã€‚<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git6.png" alt="å›¾6"></p><h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬è¾“å…¥ <code>git log</code>å‘½ä»¤ï¼Œå°±ä¼šçœ‹åˆ°å¦‚ä¸‹:<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git7.png" alt="å›¾7"></p><p><code>git log</code>è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰commitäº§ç”Ÿçš„è®°å½•ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°å·²ç»äº§ç”Ÿäº†ä¸€æ¡commitè®°å½•ï¼Œè€Œæäº¤æ—¶å€™çš„é™„å¸¦ä¿¡æ¯å« <code>â€œfirst commitâ€</code> ã€‚</p><h3 id="git-add-git-commit"><a href="#git-add-git-commit" class="headerlink" title="git add &amp; git commit"></a>git add &amp; git commit</h3><p>çœ‹åˆ°è¿™é‡Œä¼°è®¡å¾ˆå¤šäººéƒ½ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘æƒ³è¦æäº¤ç›´æ¥è¿›è¡Œcommitä¸å°±è¡Œäº†ä¹ˆä¸ºä»€ä¹ˆéœ€è¦å…ˆaddä¸€æ¬¡å‘¢ï¼Ÿé¦–å…ˆ <code>git add</code> æ˜¯æŠŠæ”¹åŠ¨æ·»åŠ åˆ°ä¸€ä¸ª<strong>æš‚å­˜åŒº</strong>ï¼Œä½ å¯ä»¥ç†è§£æˆä¸€ä¸ªç¼“å­˜åŒºåŸŸï¼Œä¸´æ—¶ä¿å­˜ä½ çš„æ”¹åŠ¨ï¼Œè€Œ <code>git commit</code> æ‰æ˜¯æœ€åçœŸæ­£çš„æäº¤ï¼Œå½“ç„¶ä¹Ÿæœ‰åŠæ³•æŠŠè¿™ä¸¤æ­¥åˆå¹¶æˆä¸€æ­¥ï¼Œä¸è¿‡åé¢å†ä»‹ç»ï¼Œå»ºè®®æ–°æ‰‹å…ˆæŒ‰éƒ¨å°±ç­çš„ä¸€æ­¥æ­¥æ¥ã€‚</p><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><p>branchå³åˆ†æ”¯çš„æ„æ€ï¼Œåˆ†æ”¯çš„æ¦‚å¿µå¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯å›¢é˜Ÿåä½œçš„æ—¶å€™ï¼Œå‡è®¾ä¸¤ä¸ªäººéƒ½åšåŒä¸€ä¸ªé¡¹ç›®ï¼Œè¿™ä¸ªæ—¶å€™åˆ†æ”¯å°±æ˜¯ä¿è¯ä¸¤äººèƒ½ååŒåˆä½œçš„æœ€å¤§åŠ›æ°”äº†ã€‚</p><p>ä¸¾ä¸ªğŸŒ°ï¼šAã€Bä¸¤äººéƒ½åœ¨åšåŒä¸€ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯ä¸åŒçš„æ¨¡å—ï¼Œè¿™ä¸ªæ—¶å€™Aæ–°å»ºäº†ä¸€ä¸ªåˆ†æ”¯å«aï¼ŒBæ–°å»ºäº†ä¸€ä¸ªåˆ†æ”¯å«bï¼Œè¿™æ ·Aã€Båšçš„æ‰€æœ‰ä»£ç æ”¹åŠ¨éƒ½åœ¨å„è‡ªçš„åˆ†æ”¯ï¼Œäº’ä¸å½±å“ï¼Œç­‰åˆ°ä¸¤äººéƒ½æŠŠå„è‡ªçš„æ¨¡å—éƒ½åšå®Œäº†ï¼Œæœ€åå†ç»Ÿä¸€æŠŠåˆ†æ”¯åˆå¹¶èµ·æ¥ã€‚</p><p>æ‰§è¡Œ <code>git init</code>åˆå§‹åŒ–gitä»“åº“ä¹‹åä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªä¸»åˆ†æ”¯masterï¼Œä¹Ÿæ˜¯ä½ æ‰€åœ¨çš„é»˜è®¤åˆ†æ”¯ï¼Œä¹ŸåŸºæœ¬æ˜¯å®é™…å¼€å‘æ­£å¼ç¯å¢ƒä¸‹çš„åˆ†æ”¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹masteråˆ†æ”¯ä¸ä¼šè½»æ˜“ç›´æ¥åœ¨ä¸Šé¢æ“ä½œçš„ï¼Œä½ ä»¬å¯ä»¥è¾“å…¥<code>git branch</code>æŸ¥çœ‹ä¸‹å½“å‰åˆ†æ”¯æƒ…å†µï¼›å¦‚æœæˆ‘ä»¬æƒ³åœ¨æ­¤åŸºç¡€ä¸Šæ–°å»ºä¸€ä¸ªåˆ†æ”¯å‘¢ï¼Œå¾ˆç®€å•ï¼Œæ‰§è¡Œ <code>git branch a</code>å°±æ–°å»ºäº†ä¸€ä¸ªåå­—å«açš„åˆ†æ”¯ï¼Œè¿™æ—¶å€™åˆ†æ”¯aè·Ÿåˆ†æ”¯masteræ˜¯ä¸€æ¨¡ä¸€æ ·çš„å†…å®¹ï¼Œæˆ‘ä»¬å†è¾“å…¥<code>git branch</code> æŸ¥çœ‹å½“å‰çš„åˆ†æ”¯æƒ…å†µï¼›</p><p>ä½†æ˜¯å¯ä»¥çœ‹åˆ°masteråˆ†æ”¯å‰æœ‰ä¸ª * å·ï¼Œ(<strong>æ³¨æ„: * æ‰€æŒ‡çš„åˆ†æ”¯ä»£è¡¨å½“å‰æ‰€åœ¨çš„åˆ†æ”¯</strong>) å³è™½ç„¶æ–°å»ºäº†ä¸€ä¸ª a çš„åˆ†æ”¯ï¼Œä½†æ˜¯å½“å‰æ‰€åœ¨çš„åˆ†æ”¯è¿˜æ˜¯åœ¨masterä¸Šï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨ a åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œé¦–å…ˆè¦å…ˆåˆ‡æ¢åˆ° a åˆ†æ”¯ä¸Šæ‰è¡Œï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥è¦åˆ‡æ¢åˆ†æ”¯ã€‚<code>git checkout a</code><br>æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œç„¶åå†è¾“å…¥<code>git branch</code>æŸ¥çœ‹åˆ†æ”¯æƒ…å†µï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æˆ‘ä»¬æ‰€åœ¨çš„åˆ†æ”¯å·²ç»æ˜¯aäº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒAåŒå­¦å°±å¯ä»¥åœ¨ä»–æ–°å»ºçš„aåˆ†æ”¯è¿›è¡Œå†™ä»£ç äº†ã€‚<br>é‚£å°±æœ‰äººè¯´äº†ï¼Œæˆ‘è¦å…ˆæ–°å»ºå†åˆ‡æ¢ï¼Œæœªå…æœ‰ç‚¹éº»çƒ¦ï¼Œæœ‰æ²¡æœ‰ä¸€æ­¥åˆ°ä½çš„ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼š<br><code>git checkout -b a</code>è¿™ä¸ªå‘½ä»¤ä»£è¡¨çš„æ„æ€å°±æ˜¯æ–°å»ºä¸€ä¸ªaåˆ†æ”¯ï¼Œå¹¶ä¸”è‡ªåŠ¨åˆ‡æ¢åˆ°aåˆ†æ”¯</p><h3 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h3><p>AåŒå­¦åœ¨aåˆ†æ”¯ä¸Šä»£ç å†™å®Œäº†ï¼Œå¹¶ä¸”æµ‹è¯•ä¹ŸOKäº†ï¼Œå‡†å¤‡è¦ä¸Šçº¿äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŠŠä»–çš„ä»£ç åˆå¹¶åˆ°åˆ†æ”¯masterä¸Šï¼Œç„¶åå‘å¸ƒã€‚<code>git merge</code>å°±æ˜¯åˆå¹¶åˆ†æ”¯ç”¨åˆ°çš„å‘½ä»¤ï¼Œè¿™å¯¹è¿™ä¸ªæƒ…å†µï¼Œéœ€è¦å…ˆåšä¸¤æ­¥:</p><ul><li>ç¬¬ä¸€æ­¥æ˜¯åˆ‡æ¢åˆ°masteråˆ†æ”¯ï¼Œå¦‚æœä½ å·²ç»åœ¨é‚£å°±ä¸ç”¨åˆ‡æ¢äº†</li><li>ç¬¬äºŒæ­¥æ‰§è¡Œgit merge a,æ„æ€å°±æ˜¯æŠŠ a åˆ†æ”¯çš„ä»£ç åˆå¹¶è¿‡æ¥ï¼Œä¸å‡ºæ„å¤–ï¼Œè¿™ä¸ªæ—¶å€™ a åˆ†æ”¯çš„ä»£ç å°±é¡ºåˆ©åˆå¹¶åˆ°masteråˆ†æ”¯æ¥äº†ï¼Œä¸ºä»€ä¹ˆè¯´ä¸å‡ºæ„å¤–å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªæ—¶å€™å¯èƒ½å› ä¸ºäº§ç”Ÿå†²çªè€Œå¯¼è‡´åˆå¹¶å¤±è´¥ã€‚</li></ul><h3 id="git-branch-d"><a href="#git-branch-d" class="headerlink" title="git branch -d"></a>git branch -d</h3><p>æœ‰æ–°å»ºåˆ†æ”¯ï¼Œé‚£è‚¯å®šå°±æœ‰åˆ é™¤åˆ†æ”¯ï¼ŒåŠ å…¥è¿™ä¸ªåˆ†æ”¯æ–°å»ºé”™äº†ï¼Œæˆ–è€…aåˆ†æ”¯çš„ä»£ç å·²ç»é¡ºåˆ©åˆå¹¶åˆ°masteråˆ†æ”¯æ¥äº†ï¼Œé‚£ä¹ˆaåˆ†æ”¯æ²¡ç”¨äº†ï¼Œéœ€è¦åˆ é™¤ï¼Œè¿™ä¸ªæ—¶å€™æ‰§è¡Œä»£ç  <code>git branch -d a</code><br>å°±å¯ä»¥æŠŠaåˆ†æ”¯åˆ é™¤äº†ã€‚</p><h3 id="git-branch-D"><a href="#git-branch-D" class="headerlink" title="git branch -D"></a>git branch -D</h3><p>æœ‰äº›æ—¶å€™å¯èƒ½ä¼šåˆ é™¤å¤±è´¥ï¼Œæ¯”å¦‚å¦‚æœaåˆ†æ”¯çš„ä»£ç è¿˜æ²¡æœ‰åˆå¹¶åˆ°masteråˆ†æ”¯ï¼Œä½ æ‰§è¡Œ <code>git branch -d a</code>æ˜¯åˆ é™¤ä¸äº†çš„ï¼Œå®ƒä¼šæ™ºèƒ½çš„æç¤ºä½ aåˆ†æ”¯è¿˜æœ‰æœªåˆå¹¶çš„ä»£ç ï¼Œä½†æ˜¯å¦‚æœä½ éè¦åˆ é™¤ï¼Œé‚£å°±æ‰§è¡Œ <code>git branch -D a</code>å°±å¯ä»¥å¼ºåˆ¶åˆ é™¤aåˆ†æ”¯äº†ã€‚</p><h3 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h3><p>æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯å¼€å‘çš„æ—¶å€™ç»å¸¸æœ‰ç‰ˆæœ¬çš„æ¦‚å¿µï¼Œæ¯”å¦‚v1.0ã€v1.1ä¹‹ç±»çš„ï¼Œä¸åŒçš„ç‰ˆæœ¬è‚¯å®šå¯¹åº”ä¸åŒçš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è¦ç»™æˆ‘ä»¬çš„ä»£ç åŠ ä¸Šæ ‡ç­¾ï¼Œè¿™æ ·å‡è®¾v1.1ç‰ˆæœ¬å‡ºäº†ä¸€ä¸ªæ–°bugï¼Œä½†æ˜¯åˆä¸çŸ¥é“v1.0æ˜¯ä¸æ˜¯æœ‰è¿™ä¸ªbugï¼Œæœ‰äº†æ ‡ç­¾å°±å¯ä»¥é¡ºåˆ©åˆ‡æ¢åˆ°v1.0çš„ä»£ç ï¼Œé‡æ–°æ‰“ä¸ªåŒ…æµ‹è¯•å°±çŸ¥é“äº†ã€‚<br>æ‰€ä»¥å¦‚æœæƒ³è¦æ–°å»ºä¸€ä¸ªæ ‡ç­¾å¾ˆç®€å•ï¼Œæ¯”å¦‚ <code>git tag v1.0</code>å°±ä»£è¡¨æˆ‘åœ¨å½“å‰ä»£ç çŠ¶æ€ä¸‹æ–°å»ºäº†ä¸€ä¸ªv1.0çš„æ ‡ç­¾ï¼Œè¾“å…¥ <code>git tag</code>å¯ä»¥æŸ¥çœ‹å†å²tagè®°å½•ã€‚</p><p>æƒ³è¦åˆ‡æ¢åˆ°æŸä¸ªtagæ€ä¹ˆåŠï¼Ÿ<br>ä¹Ÿå¾ˆç®€å•ï¼Œæ‰§è¡Œ <code>git checkout v1.0</code>è¿™æ ·å°±é¡ºåˆ©çš„åˆ‡æ¢åˆ°v1.0 tagçš„ä»£ç çŠ¶æ€äº†ã€‚</p><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>OKï¼Œä»¥ä¸Šå…¨æ˜¯ä¸€äº›æœ€åŸºæœ¬çš„gitæ“ä½œï¼Œè€Œä¸”å…¨æ˜¯åœ¨æœ¬åœ°ç¯å¢ƒè¿›è¡Œæ“ä½œçš„ï¼Œå®Œå…¨æ²¡æœ‰æ¶‰åŠåˆ°è¿œç¨‹ä»“åº“ã€‚æ¯•ç«Ÿè¿™ç¯‡æ–‡ç« æ˜¯é’ˆå¯¹å°ç™½çš„ï¼Œå¤§ç¥å¯ä»¥å¿½ç•¥ã€‚</p><p>é™„ä¸Šä¸€å¼ gitæ“ä½œçš„å›¾<br><img src="http://7xv28v.com1.z0.glb.clouddn.com/git8.png" alt="å›¾8"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯Git&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯Git&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯Git&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯Git&lt;/h2&gt;&lt;p&gt;Gitæ˜¯Linuxå‘æ˜è€…Linuså¼€å‘çš„ä¸€æ¬¾æ–°æ—¶ä»£çš„&lt;strong&gt;ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ&lt;/strong&gt;ï¼Œé‚£ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå‘¢ï¼Ÿæ€ä¹ˆç†è§£ï¼Ÿç½‘ä¸Šä¸€å¤§å †è¯¦ç»†çš„ä»‹ç»ï¼Œä½†æ˜¯å¤§å¤šæ¯ç‡¥ä¹å‘³ï¼Œå¯¹äºæ–°æ‰‹ä¹Ÿå¾ˆéš¾ç†è§£ï¼Œè¿™é‡Œæˆ‘åªä¸¾å‡ ä¸ªä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;ç†Ÿæ‚‰ç¼–ç¨‹çš„éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨è½¯ä»¶å¼€å‘ä¸­æºä»£ç å…¶å®æ˜¯æœ€é‡è¦çš„ï¼Œé‚£ä¹ˆå¯¹æºä»£ç çš„ç®¡ç†å˜å¾—å¼‚å¸¸é‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºäº†é˜²æ­¢ä»£ç çš„ä¸¢å¤±ï¼Œè‚¯å®šæœ¬åœ°æœºå™¨ä¸è¿œç¨‹æœåŠ¡å™¨éƒ½è¦å­˜æ”¾ä¸€ä»½ï¼Œè€Œä¸”è¿˜éœ€è¦æœ‰ä¸€å¥—æœºåˆ¶è®©æœ¬åœ°å¯ä»¥è·Ÿè¿œç¨‹åŒæ­¥ï¼›&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å¼€å‘çš„æ—¶å€™å…ä¸äº†æœ‰bugï¼Œæœ‰æ—¶å€™åˆšå‘å¸ƒçš„åŠŸèƒ½å°±å‡ºç°äº†ä¸¥é‡çš„bug,è¿™ä¸ªæ—¶å€™éœ€è¦å¯¹ä»£ç è¿›è¡Œè¿˜åŸï¼›&lt;/li&gt;
&lt;li&gt;éšç€æˆ‘ä»¬ç‰ˆæœ¬è¿­ä»£çš„åŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ¸…é™¤çš„çŸ¥é“å†å²æ¯ä¸€ä¸ªç‰ˆæœ¬çš„ä»£ç æ›´æ”¹è®°å½•ï¼Œç”šè‡³çŸ¥é“æ¯ä¸ªäººå†å²æäº¤ä»£ç çš„æƒ…å†µ</summary>
    
    
    
    <category term="Git" scheme="http://example.com/categories/Git/"/>
    
    
    <category term="Git" scheme="http://example.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>ä¸¤ä¸ªimageViewå®ç°å›¾ç‰‡è½®æ’­</title>
    <link href="http://example.com/post/6645abe0.html"/>
    <id>http://example.com/post/6645abe0.html</id>
    <published>2016-04-10T15:12:22.000Z</published>
    <updated>2023-12-02T10:27:22.222Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¸å°‘çš„é¡¹ç›®ä¸­ï¼Œéƒ½ä¼šç”¨åˆ°å›¾ç‰‡è½®æ’­è¿™ä¸ªåŠŸèƒ½ï¼Œç°åœ¨ç½‘ä¸Šå…³äºå›¾ç‰‡è½®æ’­çš„è½®å­ä¹Ÿå±‚å‡ºä¸ç©·ï¼Œåƒå¥‡ç™¾æ€ªï¼Œç¬”è€…æ ¹æ®è‡ªå·±çš„æ€è·¯ï¼Œç”¨ä¸¤ä¸ªimageViewä¹Ÿå®ç°äº†å›¾ç‰‡è½®æ’­ï¼Œè¿™é‡Œç»™å¤§å®¶ä»‹ç»ç¬”è€…çš„ä¸»è¦æ€è·¯ä»¥åŠå¤§æ¦‚æ­¥éª¤ã€‚</p><span id="more"></span><h2 id="è½®æ’­å®ç°æ­¥éª¤"><a href="#è½®æ’­å®ç°æ­¥éª¤" class="headerlink" title="è½®æ’­å®ç°æ­¥éª¤"></a>è½®æ’­å®ç°æ­¥éª¤</h2><h4 id="å±‚çº§ç»“æ„"><a href="#å±‚çº§ç»“æ„" class="headerlink" title="å±‚çº§ç»“æ„"></a>å±‚çº§ç»“æ„</h4><p>æœ€åº•å±‚æ˜¯ä¸€ä¸ªUIView,ä¸Šé¢æœ‰ä¸€ä¸ªUIScrollViewå’ŒUIPageControl,scrollViewä¸Šæœ‰ä¸¤ä¸ªUIImageView,imageViewçš„å®½é«˜&#x3D;scrollViewçš„å®½é«˜&#x3D;viewçš„å®½é«˜</p><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%BD%AE%E6%92%AD1.png" alt="å›¾1"></p><h4 id="è½®æ’­åŸç†"><a href="#è½®æ’­åŸç†" class="headerlink" title="è½®æ’­åŸç†"></a>è½®æ’­åŸç†</h4><p>å‡è®¾è½®æ’­æ§ä»¶çš„å®½ä¸ºxï¼Œé«˜ä¸ºyï¼Œæˆ‘ä»¬è®¾ç½®scrollViewçš„contentSizeçš„å®½åº¦ä¸º3xï¼Œå¹¶ä¸”è®©scrollViewåœ¨xæ–¹å‘åç§»é‡ä¸ºxï¼Œå³æ˜¾ç¤ºä¸­é—´å†…å®¹</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scrollView.contentSize = <span class="built_in">CGSizeMake</span>(<span class="number">3</span>x, y);</span><br><span class="line">scrollView.contentOffset = <span class="built_in">CGPointMake</span>(x, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%BD%AE%E6%92%AD2.png" alt="2"></p><p>æ¥ä¸‹æ¥ä½¿ç”¨ä»£ç†æ–¹æ³•scrollViewDidScrollæ¥ç›‘å¬scrollViewçš„æ»šåŠ¨ï¼Œå®šä¹‰ä¸€ä¸ªæšä¸¾æ¥è®°å½•æ»šåŠ¨çš„æ–¹å‘</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, Direction) &#123;</span><br><span class="line">    DirectionNone = <span class="number">1</span> &lt;&lt; <span class="number">0</span>,</span><br><span class="line">    DirectionLeft = <span class="number">1</span> &lt;&lt; <span class="number">1</span>,</span><br><span class="line">    DirectionRight = <span class="number">1</span> &lt;&lt; <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æ»šåŠ¨æ–¹å‘</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) Direction direction;</span><br><span class="line">- (<span class="type">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> offX = scrollView.contentOffset.x;</span><br><span class="line">    <span class="keyword">self</span>.direction = offX &gt; <span class="keyword">self</span>.width ? DirectionLeft : offX &lt; <span class="keyword">self</span>.width ? DirectionRight : DirectionNone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å†™directionçš„setteræ–¹æ³•ï¼Œæ ¹æ®æ»šåŠ¨æ–¹å‘æ¥è®¾ç½®ä¸‹ä¸€å¼ å›¾ç‰‡çš„æ˜¾ç¤ºï¼Œå¦‚æœæ˜¯å¾€å·¦è¾¹æ»šåŠ¨ï¼Œé‚£ä¹ˆä¸‹ä¸€å¼ å›¾ç‰‡çš„ä½ç½®åº”è¯¥åœ¨å³è¾¹ï¼Œå¦‚æœæ˜¯å¾€å³æ»šåŠ¨ï¼Œé‚£ä¹ˆä¸‹ä¸€å¼ å›¾ç‰‡çš„ä½ç½®åº”è¯¥åœ¨å·¦è¾¹ã€‚(ps:<strong>æ­¤å¤„åº”è¯¥æ³¨æ„æ»šåŠ¨åˆ°ç¬¬ä¸€å¼ å’Œæœ€åä¸€å¼ çš„è¾¹ç•Œæƒ…å†µ</strong>)</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> mark - è®¾ç½®æ»šåŠ¨æ–¹å‘</span></span><br><span class="line">- (<span class="type">void</span>)setDirection:(Direction)direction &#123;</span><br><span class="line">    <span class="keyword">if</span> (_direction == direction) <span class="keyword">return</span>;</span><br><span class="line">    _direction = direction;</span><br><span class="line">    <span class="keyword">if</span> (_direction == DirectionNone) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (_direction == DirectionRight) &#123; <span class="comment">// å¦‚æœæ˜¯å‘å³æ»šåŠ¨</span></span><br><span class="line">        <span class="keyword">self</span>.nextImageView.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">self</span>.width, <span class="keyword">self</span>.height);</span><br><span class="line">        <span class="keyword">self</span>.nextIndex = <span class="keyword">self</span>.currentIndex - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">self</span>.nextIndex &lt; <span class="number">0</span>) <span class="keyword">self</span>.nextIndex = _images.count - <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (_direction == DirectionLeft)&#123; <span class="comment">// å¦‚æœæ˜¯å‘å·¦è¾¹æ»šåŠ¨</span></span><br><span class="line">        <span class="keyword">self</span>.nextImageView.frame = <span class="built_in">CGRectMake</span>(<span class="built_in">CGRectGetMaxX</span>(_currentImageView.frame), <span class="number">0</span>, <span class="keyword">self</span>.width, <span class="keyword">self</span>.height);</span><br><span class="line">        <span class="keyword">self</span>.nextIndex = (<span class="keyword">self</span>.currentIndex + <span class="number">1</span>) % _images.count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.nextImageView.image = <span class="keyword">self</span>.images[<span class="keyword">self</span>.nextIndex];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»£ç†æ–¹æ³•scrollViewDidEndDeceleratingæ¥ç›‘å¬æ»šåŠ¨ç»“æŸï¼Œç»“æŸåï¼Œä¼šå˜æˆä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å·¦æ»šä¹‹å</li></ul><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%BD%AE%E6%92%AD3.png" alt="å›¾3"></p><ul><li>å³æ»šä¹‹å</li></ul><p><img src="http://7xv28v.com1.z0.glb.clouddn.com/%E8%BD%AE%E6%92%AD4.png" alt="å›¾4"></p><p>æ­¤æ—¶ï¼ŒscrollViewçš„åç§»é‡ä¸º0æˆ–è€…2xä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç å†æ¬¡å°†scrollViewçš„åç§»é‡è®¾ç½®ä¸ºxï¼Œå¹¶ä¸”å°†nextImageViewçš„å›¾ç‰‡ä¿®æ”¹ä¸ºèµ‹å€¼ç»™currentImageViewçš„å›¾ç‰‡</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)scrollViewDidEndDecelerating:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line">    [<span class="keyword">self</span> pauseScroll];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">void</span>)pauseScroll &#123;</span><br><span class="line">    <span class="comment">// ç­‰äº1è¡¨ç¤ºæ²¡æœ‰æ»šåŠ¨</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.scrollView.contentOffset.x / <span class="keyword">self</span>.width == <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">self</span>.currentIndex = <span class="keyword">self</span>.nextIndex;</span><br><span class="line">    <span class="keyword">self</span>.pageControl.currentPage = <span class="keyword">self</span>.currentIndex;</span><br><span class="line">    <span class="keyword">self</span>.currentImageView.frame = <span class="built_in">CGRectMake</span>(<span class="keyword">self</span>.width, <span class="number">0</span>, <span class="keyword">self</span>.width, <span class="keyword">self</span>.height);</span><br><span class="line">    <span class="keyword">self</span>.descLabel.text = <span class="keyword">self</span>.describeArray[<span class="keyword">self</span>.currentIndex];</span><br><span class="line">    <span class="keyword">self</span>.currentImageView.image = <span class="keyword">self</span>.nextImageView.image;</span><br><span class="line">    <span class="keyword">self</span>.scrollView.contentOffset = <span class="built_in">CGPointMake</span>(<span class="keyword">self</span>.width, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¹‹åï¼Œæˆ‘ä»¬çœ‹åˆ°çš„è¿˜æ˜¯currentImageViewï¼Œåªæ˜¯å›¾ç‰‡æ˜¾ç¤ºçš„æ˜¯ä¸‹ä¸€å¼ çš„å›¾ç‰‡æˆ–è€…ä¸Šä¸€å¼ çš„å›¾ç‰‡ï¼Œåˆå›åˆ°äº†æœ€åˆçš„æ ·å­ã€‚</p><h4 id="è‡ªåŠ¨æ»šåŠ¨"><a href="#è‡ªåŠ¨æ»šåŠ¨" class="headerlink" title="è‡ªåŠ¨æ»šåŠ¨"></a>è‡ªåŠ¨æ»šåŠ¨</h4><p>è½®æ’­çš„åŠŸèƒ½å®ç°äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ·»åŠ å®šæ—¶å™¨è®©å®ƒè‡ªåŠ¨æ»šåŠ¨äº†ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯å®šæ—¶å™¨</span></span><br><span class="line">- (<span class="type">void</span>)startTimer &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœåªæœ‰ä¸€å¼ ï¼Œç›´æ¥æ”¾å›ï¼Œä¸éœ€è¦å¼€å¯å®šæ—¶å™¨</span></span><br><span class="line">    <span class="keyword">if</span> (_images.count &lt;= <span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœå®šæ—¶å™¨å·²ç»å¼€å¯ï¼Œåˆ™å…ˆåœæ­¢å†å¼€å¯</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.timer) [<span class="keyword">self</span> stopTimer];</span><br><span class="line">    <span class="keyword">self</span>.timer = [<span class="built_in">NSTimer</span> timerWithTimeInterval:_time &lt; <span class="number">1</span> ? DEFAULTTIME : _time target:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(nextPage) userInfo:<span class="literal">nil</span> repeats:<span class="literal">YES</span>];</span><br><span class="line">    [[<span class="built_in">NSRunLoop</span> currentRunLoop] addTimer:<span class="keyword">self</span>.timer forMode:<span class="built_in">NSRunLoopCommonModes</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸‹ä¸€é¡µ</span></span><br><span class="line">- (<span class="type">void</span>)nextPage &#123;</span><br><span class="line">    [<span class="keyword">self</span>.scrollView setContentOffset:<span class="built_in">CGPointMake</span>(<span class="keyword">self</span>.width * <span class="number">2</span>, <span class="number">0</span>) animated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><blockquote><p>setContentOffset:animated:æ–¹æ³•æ‰§è¡Œå®Œæ¯•åä¸ä¼šè°ƒç”¨scrollviewçš„scrollViewDidEndDeceleratingæ–¹æ³•ï¼Œä½†æ˜¯ä¼šè°ƒç”¨scrollViewDidEndScrollingAnimationæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬è¦åœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨pauseScroll</p></blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)scrollViewDidEndScrollingAnimation:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line">    [<span class="keyword">self</span> pauseScroll];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ‹–æ‹½æ—¶åœæ­¢å®šæ—¶å™¨"><a href="#æ‹–æ‹½æ—¶åœæ­¢å®šæ—¶å™¨" class="headerlink" title="æ‹–æ‹½æ—¶åœæ­¢å®šæ—¶å™¨"></a>æ‹–æ‹½æ—¶åœæ­¢å®šæ—¶å™¨</h4><p>å½“æˆ‘ä»¬æ‰‹åŠ¨æ‹–æ‹½çš„æ—¶å€™ï¼Œéœ€è¦åœæ­¢è‡ªåŠ¨æ»šåŠ¨ï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€è¦å…³é—­å®šæ—¶å™¨å°±è¡Œäº†ï¼Œå½“æˆ‘ä»¬æ‹–æ‹½ç»“æŸçš„æ—¶å€™ï¼Œé‡æ–°å¯åŠ¨å®šæ—¶å™¨</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="type">void</span>)scrollViewWillBeginDragging:(<span class="built_in">UIScrollView</span> *)scrollView &#123;</span><br><span class="line">    [<span class="keyword">self</span> stopTimer];</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="type">void</span>)scrollViewDidEndDragging:(<span class="built_in">UIScrollView</span> *)scrollView willDecelerate:(<span class="type">BOOL</span>)decelerate &#123;</span><br><span class="line">    [<span class="keyword">self</span> startTimer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŠ è½½å›¾ç‰‡"><a href="#åŠ è½½å›¾ç‰‡" class="headerlink" title="åŠ è½½å›¾ç‰‡"></a>åŠ è½½å›¾ç‰‡</h4><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘è‡ªåŠ¨è½®æ’­æœ¬åœ°çš„å›¾ç‰‡ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æœåŠ¡å™¨è·å–çš„å›¾ç‰‡url,ä¹Ÿæœ‰å¯èƒ½æ—¢æœ‰æœ¬åœ°å›¾ç‰‡ï¼Œåˆæœ‰ç½‘ç»œå›¾ç‰‡ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åŠ è½½å‘¢ï¼Ÿ</p><ol><li>å®šä¹‰ä¸€ä¸ªimageArrç”¨æ¥æ¥æ”¶å¤–ç•Œä¼ è¿›æ¥çš„æ•°ç»„(å¯ä»¥æ˜¯å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œå›¾ç‰‡è·¯å¾„ï¼Œå¯ä»¥å›¾ç‰‡å’Œè·¯å¾„æ··åˆ)</li><li>å®šä¹‰ä¸€ä¸ªimagesç”¨æ¥å­˜å‚¨å›¾ç‰‡(åªè£…å›¾ç‰‡).åˆ¤æ–­å¤–ç•Œä¼ è¿›æ¥çš„æ•°ç»„ï¼Œå¦‚æœæ˜¯å›¾ç‰‡ï¼Œç›´æ¥æ·»åŠ åˆ°imagesï¼Œå¦‚æœæ˜¯è¿æ¥ï¼Œå…ˆæ·»åŠ ä¸€å¼ é»˜è®¤çš„å ä½å›¾</li><li>å®šä¹‰ä¸€ä¸ªimageDicç”¨æ¥ç¼“å­˜å›¾ç‰‡çš„å­—å…¸ï¼Œkeyä¸ºå›¾ç‰‡URL</li><li>å®šä¹‰ä¸€ä¸ªoperationDicç”¨æ¥ä¿å­˜ä¸‹è½½æ“ä½œçš„å­—å…¸ï¼Œkeyä¸ºå›¾ç‰‡URL</li></ol><h4 id="å›¾ç‰‡ç¼“å­˜ç­–ç•¥-SDWebImageçš„æ€è·¯"><a href="#å›¾ç‰‡ç¼“å­˜ç­–ç•¥-SDWebImageçš„æ€è·¯" class="headerlink" title="å›¾ç‰‡ç¼“å­˜ç­–ç•¥(SDWebImageçš„æ€è·¯)"></a>å›¾ç‰‡ç¼“å­˜ç­–ç•¥(SDWebImageçš„æ€è·¯)</h4><p>ä¸‹è½½å›¾ç‰‡ï¼Œå…ˆä»ç¼“å­˜ä¸­å–ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æ›¿æ¢ä¹‹å‰çš„å ä½å›¾ç‰‡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå»æ²™ç›’ä¸­å–ï¼Œå¦‚æœæœ‰ï¼Œæ›¿æ¢å ä½å›¾ç‰‡ï¼Œå¹¶æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¼€å¯å¼‚æ­¥çº¿ç¨‹ä¸‹è½½</p><h4 id="ç›‘å¬å›¾ç‰‡ç‚¹å‡»"><a href="#ç›‘å¬å›¾ç‰‡ç‚¹å‡»" class="headerlink" title="ç›‘å¬å›¾ç‰‡ç‚¹å‡»"></a>ç›‘å¬å›¾ç‰‡ç‚¹å‡»</h4><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸è½®æ’­å›¾éƒ½æœ‰ç‚¹å‡»å›¾ç‰‡è·³è½¬åˆ°å¯¹åº”çš„å†…å®¹çš„æ“ä½œï¼Œå› æ­¤éœ€è¦ç›‘å¬å›¾ç‰‡çš„ç‚¹å‡»ï¼Œæä¾›ä¸¤ç§æ€è·¯ï¼š</p><ul><li><p>é€šè¿‡block:</p><blockquote><ol><li>å®šä¹‰ä¸€ä¸ªblockç»™å¤–ç•Œ</li><li>æ‰“å¼€currentImageViewçš„ç”¨æˆ·äº¤äº’</li><li>ç»™currentImageViewæ·»åŠ ä¸€ä¸ªç‚¹å‡»æ‰‹åŠ¿</li><li>åœ¨ç‚¹å‡»æ‰‹åŠ¿å“åº”æ–¹æ³•é‡Œé¢è°ƒç”¨block,å¹¶ä¼ å…¥å›¾ç‰‡æ‰€åœ¨çš„ç´¢å¼•</li></ol></blockquote></li><li><p>é€šè¿‡ä»£ç†ï¼š</p><blockquote><ol><li>å®šä¹‰ä¸€ä¸ªåè®®æ–¹æ³•ï¼Œè®¾ç½®ä¸€ä¸ªä»£ç†å±æ€§</li><li>æ‰“å¼€currentImageViewçš„ç”¨æˆ·äº¤äº’</li><li>ç»™currentImageViewæ·»åŠ ä¸€ä¸ªç‚¹å‡»æ‰‹åŠ¿</li><li>åœ¨ç‚¹å‡»æ‰‹åŠ¿å“åº”æ–¹æ³•é‡Œé¢ç”¨ä»£ç†è°ƒç”¨åè®®æ–¹æ³•ï¼Œ</li></ol></blockquote></li></ul><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>ä¸Šé¢æ˜¯ç¬”è€…å®ç°è½®æ’­å›¾çš„æ€è·¯ä»¥åŠéƒ¨åˆ†ä»£ç ï¼Œéœ€è¦æºç çš„<a href="https://github.com/LZAscott/ScottPageView">è¯·æˆ³è¿™é‡Œ</a>,å¦‚æœåœ¨ä½¿ç”¨ä¸­å‘ç°æœ‰bugï¼Œæ¬¢è¿æå‡ºï¼å¦‚æœè§‰å¾—å¥½ç”¨ï¼Œè®°å¾—çŒ®ä¸Šä½ çš„starå“¦ï¼</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨ä¸å°‘çš„é¡¹ç›®ä¸­ï¼Œéƒ½ä¼šç”¨åˆ°å›¾ç‰‡è½®æ’­è¿™ä¸ªåŠŸèƒ½ï¼Œç°åœ¨ç½‘ä¸Šå…³äºå›¾ç‰‡è½®æ’­çš„è½®å­ä¹Ÿå±‚å‡ºä¸ç©·ï¼Œåƒå¥‡ç™¾æ€ªï¼Œç¬”è€…æ ¹æ®è‡ªå·±çš„æ€è·¯ï¼Œç”¨ä¸¤ä¸ªimageViewä¹Ÿå®ç°äº†å›¾ç‰‡è½®æ’­ï¼Œè¿™é‡Œç»™å¤§å®¶ä»‹ç»ç¬”è€…çš„ä¸»è¦æ€è·¯ä»¥åŠå¤§æ¦‚æ­¥éª¤ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="è½®æ’­" scheme="http://example.com/tags/%E8%BD%AE%E6%92%AD/"/>
    
  </entry>
  
  <entry>
    <title>Xcode7å…è¯ä¹¦çœŸæœºè°ƒè¯•</title>
    <link href="http://example.com/post/10f55270.html"/>
    <id>http://example.com/post/10f55270.html</id>
    <published>2015-10-26T06:09:46.000Z</published>
    <updated>2023-12-02T10:27:22.194Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨Xcode7æ­£å¼å‘å¸ƒçš„æ—¥å­é‡Œï¼Œè‹¹æœç»™å¼€å‘è€…å¸¦æ¥äº†ä¸€æ¬¡æƒŠå¤©çš„å˜åŒ–ï¼Œä»æ­¤å¼€å‘è€…ä¸éœ€è¦èŠ±99åˆ€è´­ä¹°å¼€å‘è€…è¯ä¹¦å°±èƒ½å¤Ÿè¿›è¡ŒçœŸæœºè°ƒè¯•äº†ï¼Œå½“ç„¶å¦‚æœæƒ³è¦å‘å¸ƒåˆ°App storeé‚£è‚¯å®šæ˜¯éœ€è¦è´­ä¹°çš„ã€‚ä½†æ˜¯è¿™å¯¹äºæ­£åœ¨å­¦ä¹ é˜¶æ®µæˆ–è€…æƒ³åšä¸€ä¸ªå±äºè‡ªå·±APPçš„åŒå­¦æ¥è¯´ï¼Œå·²ç»æ˜¯ä¸°åšçš„ç¦åˆ©äº†ã€‚</p><span id="more"></span><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é…ç½®æ€ä¹ˆä½¿ç”¨å…è¯ä¹¦çœŸæœºè°ƒè¯•ï¼š</p><ol><li><p>éœ€è¦ä¸€ä¸ªApple IDï¼ˆå¦‚æœæ²¡æœ‰ï¼Œè¯·æ³¨å†Œä¸€ä¸ªç”³è¯·<a href="https://appleid.apple.com/cn">Apple ID</a>ï¼‰,ä¸€ä¸ªiPhoneæ‰‹æœº(å¦‚æœæ²¡æœ‰å°±å…³é—­è¯¥æ–‡ç« )å’ŒXcode7(å¦‚æœæ²¡æœ‰ä¸ŠApp storeä¸‹è½½) ã€‚</p></li><li><p>æ‰“å¼€Xcode é€‰æ‹©å±å¹•å·¦ä¸Šè§’Xcode-&gt; preferencese(å¿«æ·é”®ï¼šcommand+é€—å· ä¸¤ä¸ªé”®)<br> <img src="http://7xv28v.com1.z0.glb.clouddn.com/%E5%85%8D%E8%AF%81%E4%B9%A6%E8%B0%83%E8%AF%951.png" alt="å›¾1"></p></li><li><p>é€‰æ‹©Accountsï¼Œç‚¹å‡»å·¦ä¸‹è§’+æŒ‰é’®ç™»é™†Apple ID<br> <img src="http://7xv28v.com1.z0.glb.clouddn.com/%E5%85%8D%E8%AF%81%E4%B9%A6%E8%B0%83%E8%AF%952.png" alt="å›¾2"></p></li><li><p>ç™»é™†ä½ çš„Apple IDè´¦å·ï¼Œå¡«å®Œè´¦å·å¯†ç ä¹‹åç‚¹å‡»Addã€‚<br> <img src="http://7xv28v.com1.z0.glb.clouddn.com/%E5%85%8D%E8%AF%81%E4%B9%A6%E8%B0%83%E8%AF%953.png" alt="å›¾3"></p><p> ç™»é™†æˆåŠŸä¹‹åï¼Œåœ¨å³ä¾§ä¼šæ˜¾ç¤ºä½ çš„è´¦å·åœ¨iOSå’ŒMacä¸Šéƒ½æ˜¯freeçš„ï¼ŒåŒå‡»è¿™ä¸€åˆ—ï¼ˆæˆ–è€…ç‚¹å‡»é€‰æ‹©view detailsï¼‰<br> <img src="http://7xv28v.com1.z0.glb.clouddn.com/%E5%85%8D%E8%AF%81%E4%B9%A6%E8%B0%83%E8%AF%954.png" alt="å›¾4"></p></li><li><p>è¿™é‡Œéœ€è¦ä¸€å®šæ—¶é—´è·å–ä½ çš„Apple IDçš„å¼€å‘è€…ä¿¡æ¯ï¼Œç‚¹å‡»iOS Development åé¢çš„create ï¼Œç„¶åç¨ç­‰ç‰‡åˆ»ï¼Œç›´åˆ°createæŒ‰é’®å˜æˆç°è‰²æˆ–è€…å˜æˆReset(æˆ–è€…å˜æ²¡äº†)ã€‚<br> <img src="http://7xv28v.com1.z0.glb.clouddn.com/%E5%85%8D%E8%AF%81%E4%B9%A6%E8%B0%83%E8%AF%955.png" alt="å›¾5"></p></li><li><p>åˆ°äº†è¿™é‡ŒåŸºæœ¬ä¸Šå·²ç»ç»“æŸã€‚<br>å¼€å§‹çœŸæœºæµ‹è¯•ï¼šæ‰“å¼€éœ€è¦çœŸæœºæµ‹è¯•çš„é¡¹ç›®æ’ä¸Šæ‰‹æœºï¼ˆXcodeç¬¬ä¸€æ¬¡é“¾æ¥æ‰‹æœºä¼šå¾ˆæ…¢ï¼Œå¯ä»¥é€‰æ‹©Xcodeèœå•æ ä¸­çš„window-&gt;devicesæŸ¥çœ‹æ‰‹æœºæ˜¯å¦å‡†å¤‡å°±ç»ªäº†ï¼‰ï¼Œé€‰æ‹©é¡¹ç›®æ–‡ä»¶-&gt; General - &gt; Team -&gt; é€‰æ‹©ä½ å±äºä½ çš„Apple ID ï¼Œå†ç‚¹å‡»Team ä¸‹é¢çš„fix issueä¿®å¤Team æ­£ä¸‹æ–¹çš„è­¦å‘Šã€‚</p></li><li><p>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œä½ æœ€ç»ˆä¼šå‘ç°Xcodeä¼šå¼¹å‡ºä¸€ä¸ªæ¡†ï¼ˆprocess launch failed: Securityï¼‰ï¼Œè¿™é‡Œéœ€è¦æ‰“å¼€ä½ æ‰‹æœºçš„è®¾ç½®-&gt;é€šç”¨- &gt; æè¿°æ–‡ä»¶-&gt; é€‰æ‹©ä½ çš„Apple ID - &gt; ç‚¹å‡»ä¿¡ä»» - &gt; æ‰“å®Œæ”¶å·¥ï¼</p></li></ol><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>ç„¶åä½ å°±å¯ä»¥äº«å—å…è¯ä¹¦çœŸæœºè°ƒè¯•çš„ç¦åˆ©äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;åœ¨Xcode7æ­£å¼å‘å¸ƒçš„æ—¥å­é‡Œï¼Œè‹¹æœç»™å¼€å‘è€…å¸¦æ¥äº†ä¸€æ¬¡æƒŠå¤©çš„å˜åŒ–ï¼Œä»æ­¤å¼€å‘è€…ä¸éœ€è¦èŠ±99åˆ€è´­ä¹°å¼€å‘è€…è¯ä¹¦å°±èƒ½å¤Ÿè¿›è¡ŒçœŸæœºè°ƒè¯•äº†ï¼Œå½“ç„¶å¦‚æœæƒ³è¦å‘å¸ƒåˆ°App storeé‚£è‚¯å®šæ˜¯éœ€è¦è´­ä¹°çš„ã€‚ä½†æ˜¯è¿™å¯¹äºæ­£åœ¨å­¦ä¹ é˜¶æ®µæˆ–è€…æƒ³åšä¸€ä¸ªå±äºè‡ªå·±APPçš„åŒå­¦æ¥è¯´ï¼Œå·²ç»æ˜¯ä¸°åšçš„ç¦åˆ©äº†ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="iOS" scheme="http://example.com/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://example.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>NSStringä¸ºä»€ä¹ˆä½¿ç”¨copy,è€Œä¸ä½¿ç”¨retain?</title>
    <link href="http://example.com/post/ba545077.html"/>
    <id>http://example.com/post/ba545077.html</id>
    <published>2015-01-10T14:09:17.000Z</published>
    <updated>2023-12-02T10:27:22.183Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h1 id="ä¸€ã€åŸå› "><a href="#ä¸€ã€åŸå› " class="headerlink" title="ä¸€ã€åŸå› "></a>ä¸€ã€åŸå› </h1><h2 id="1-1-ä¸€æ–¹é¢"><a href="#1-1-ä¸€æ–¹é¢" class="headerlink" title="1.1 ä¸€æ–¹é¢"></a>1.1 ä¸€æ–¹é¢</h2><p>å¦‚æœä½¿ç”¨retainï¼Œåªæ˜¯å¼•ç”¨è®¡æ•° +1ï¼Œå¹¶æ²¡æœ‰ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ•ˆç‡å¥½ã€‚</p><h2 id="1-2-å¦ä¸€æ–¹é¢"><a href="#1-2-å¦ä¸€æ–¹é¢" class="headerlink" title="1.2 å¦ä¸€æ–¹é¢"></a>1.2 å¦ä¸€æ–¹é¢</h2><p>ä½†æ˜¯ä½¿ç”¨copyå®‰å…¨ã€‚å› ä¸ºNSStringä¸ºNSMutableString çš„åŸºç±»ï¼Œå¦‚æœå°†NSMutableString ä»¥retainçš„å½¢å¼èµ‹å€¼ç»™NSStringåï¼Œåç»­ä¿®æ”¹NSMutableStringä¼šå¯¼è‡´NSStringå†…å®¹çš„å˜åŒ–ï¼Œè¿™é€šå¸¸ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œæ‰€ä»¥NSStringè¦ä½¿ç”¨copyã€‚æ¯”å¦‚ï¼š</p><pre><code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *mName = [NSMutableString stringWithString:@&quot;li&quot;];  </span><br><span class="line">Person *p = [[[Person alloc] init] autorelease];  </span><br><span class="line">p.name = mName;  </span><br><span class="line">[mName setString:@&quot;zhang&quot;];  </span><br><span class="line">NSLog(@&quot;p.name:%@&quot;, p.name); </span><br></pre></td></tr></table></figure>    </code></pre><span id="more"></span><p>æˆ‘ä»¬æŠŠmNameçš„å€¼ â€œliâ€ èµ‹ç»™äº†p.nameï¼Œè€Œå¦‚æœpé‡Œé¢çš„nameä½¿ç”¨çš„æ˜¯retainï¼Œé‚£ä¹ˆåªæ˜¯å°†mNameçš„å¼•ç”¨è®¡æ•°+1ï¼Œè¿™æ—¶å€™p.nameçš„å€¼æ˜¯ â€liâ€œ</p><p>ç´§æ¥ç€æˆ‘ä»¬åœ¨ä¸‹é¢æŠŠmNameçš„å€¼è®¾ç½®ä¸ºâ€œzhangâ€ï¼Œç»“æœä½ å†æ‰“å°p.nameï¼Œè¿™æ—¶å€™å®ƒçš„å€¼ä¹Ÿä¼šå˜æˆzhangï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³è§åˆ°çš„ã€‚</p><p>ä½¿ç”¨copyå°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt;

&lt;h1 id=&quot;ä¸€ã€åŸå› &quot;&gt;&lt;a href=&quot;#ä¸€ã€åŸå› &quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€åŸå› &quot;&gt;&lt;/a&gt;ä¸€ã€åŸå› &lt;/h1&gt;&lt;h2 id=&quot;1-1-ä¸€æ–¹é¢&quot;&gt;&lt;a href=&quot;#1-1-ä¸€æ–¹é¢&quot; class=&quot;headerlink&quot; title=&quot;1.1 ä¸€æ–¹é¢&quot;&gt;&lt;/a&gt;1.1 ä¸€æ–¹é¢&lt;/h2&gt;&lt;p&gt;å¦‚æœä½¿ç”¨retainï¼Œåªæ˜¯å¼•ç”¨è®¡æ•° +1ï¼Œå¹¶æ²¡æœ‰ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ•ˆç‡å¥½ã€‚&lt;/p&gt;
&lt;h2 id=&quot;1-2-å¦ä¸€æ–¹é¢&quot;&gt;&lt;a href=&quot;#1-2-å¦ä¸€æ–¹é¢&quot; class=&quot;headerlink&quot; title=&quot;1.2 å¦ä¸€æ–¹é¢&quot;&gt;&lt;/a&gt;1.2 å¦ä¸€æ–¹é¢&lt;/h2&gt;&lt;p&gt;ä½†æ˜¯ä½¿ç”¨copyå®‰å…¨ã€‚å› ä¸ºNSStringä¸ºNSMutableString çš„åŸºç±»ï¼Œå¦‚æœå°†NSMutableString ä»¥retainçš„å½¢å¼èµ‹å€¼ç»™NSStringåï¼Œåç»­ä¿®æ”¹NSMutableStringä¼šå¯¼è‡´NSStringå†…å®¹çš„å˜åŒ–ï¼Œè¿™é€šå¸¸ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œæ‰€ä»¥NSStringè¦ä½¿ç”¨copyã€‚æ¯”å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;NSMutableString *mName = [NSMutableString stringWithString:@&amp;quot;li&amp;quot;];  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Person *p = [[[Person alloc] init] autorelease];  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p.name = mName;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[mName setString:@&amp;quot;zhang&amp;quot;];  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSLog(@&amp;quot;p.name:%@&amp;quot;, p.name); &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
&lt;/code&gt;&lt;/pre&gt;</summary>
    
    
    
    <category term="iOS Tips" scheme="http://example.com/categories/iOS-Tips/"/>
    
    
    <category term="NSStringã€copy" scheme="http://example.com/tags/NSString%E3%80%81copy/"/>
    
  </entry>
  
</feed>
